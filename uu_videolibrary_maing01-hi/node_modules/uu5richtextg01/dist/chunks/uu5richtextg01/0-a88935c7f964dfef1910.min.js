/*!
 * UAF Licence for the uu5 software.
 * 
 * Copyright (c) 2016-present, Unicorn a.s.
 * All rights reserved.
 * 
 * Definitions
 * -----------
 * This licence agreement is based on the original "BSD Licence" published by
 * the Regents of the University of California in 1990.
 * 
 * The term "Software" means the uu5 package, its modules, components,
 * all program files, source code, examples, media, and documentation which are part
 * of the Software package, as well as any portion of them. The term "Author" means
 * Unicorn a.s. and all its subsidiaries and/or affiliates.
 * 
 * Licence Agreement
 * -----------------
 * 
 * Redistribution and use of this Software in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 
 * 3. All derivative products containing user interface must display the following
 *    acknowledgement in the appropriate "About window" or website section accessible
 *    by all users of the product:
 * 
 *      This product includes following software developed by
 *      <a href="https://unicorn.com">Unicorn a.s.</a>:
 *      <a href="https://uuapp.plus4u.net/uu-bookkit-maing01/86b4d5a4a030400784764ebdb972bbda/book">UAF</a>,
 *      <a href="https://docs.plus4u.net/uaf/uuapp/uu5">uu5</a>.
 * 
 * 4. All derivative products must not block the default uu5 browser console message containing
 *    Software version information and copyright notice of the Author.
 * 
 * 5. The use of any portion of this Software is not allowed in the products
 *    that fully or partially resemble the functionality of the Software
 *    or otherwise compete with the Software unless they are licenced under the same licence
 *    conditions and provided free of charge. Specific prior written permission is required otherwise.
 * 
 * 6. Neither the name of the Author nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 * 
 * Disclaimer
 * ----------
 * THIS SOFTWARE IS PROVIDED BY AUTHOR "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL AUTHOR BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
(window.__webpack_jsonp_uu5richtextg01_1_14_1_uu5richtextg01=window.__webpack_jsonp_uu5richtextg01_1_14_1_uu5richtextg01||[]).push([[0],{238:function(t,e,o){"use strict";o.r(e);var n=o(23)
;e.default=n.EditorBlock},240:function(t,e,o){"use strict";var n=o(23),r=o(119);function i(t,e){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=function(t,e){
if(!t)return;if("string"==typeof t)return s(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t)
;if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var n=0,r=function(){};return{s:r,n:function(){
return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}
throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){
o=t[Symbol.iterator]()},n:function(){var t=o.next();return a=t.done,t},e:function(t){l=!0,i=t},f:function(){try{a||null==o.return||o.return()}finally{if(l)throw i}}}}function s(t,e){
(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}var a="unordered-list-item",l="ordered-list-item",u=function(t,e){
return t&&e&&e.getDepth()>=t.getDepth()&&(0!==e.getDepth()&&(e.getType()===a||e.getType()===l)||0===e.getDepth()&&e.getType()===t.getType())},c={toggleInline:function(t,e,o){var r=e.indexOf(".")
;if(-1!==r){var i=e.substr(0,r),s=new RegExp("^".concat(i,"\\.")),a=c.getStylesFromSelection(t).filter((function(t){return t.match(s)})),l=o||!t.getCurrentInlineStyle().has(e)
;return t=c.removeInline(t,a),l&&e.length>r+1&&(t=n.RichUtils.toggleInlineStyle(t,e)),t}return n.RichUtils.toggleInlineStyle(t,e)},removeInline:function(t,e){
"string"==typeof e&&(e="*"===e?c.getAllStyleNamesFromSelection(t):[e]);var o=t;(e=e.filter((function(t){return!t.match(/^whitespace\./)}))).forEach((function(t){
if(o.getSelection().isCollapsed())o.getCurrentInlineStyle().has(t)&&(o=n.RichUtils.toggleInlineStyle(o,t));else{var e=n.Modifier.removeInlineStyle(o.getCurrentContent(),o.getSelection(),t)
;o=n.EditorState.set(o,{currentContent:e})}}));var r=o.getCurrentContent();return o=n.EditorState.set(o,{currentContent:t.getCurrentContent()}),n.EditorState.push(o,r,"remove inline styles")},
toggleBlock:function(t,e){var o=t,i=t.getSelection(),s=t.getCurrentContent(),c=s.getBlockForKey(i.getStartKey())
;if(c.getType()!==a&&c.getType()!==l||e!==a&&e!==l||c.getType()===e)o=n.RichUtils.toggleBlockType(t,e);else{
for(var p=c.getDepth(),m=[c.getKey()],f=s.getBlockBefore(c.getKey());u(c,f);)f.getDepth()===p&&m.push(f.getKey()),f=s.getBlockBefore(f.getKey())
;for(var d=s.getBlockAfter(c.getKey());u(c,d);)d.getDepth()===p&&m.push(d.getKey()),d=s.getBlockAfter(d.getKey());for(var h=t.getSelection(),b=0;b<m.length;b++){var g=m[b],y=r.a.modifySelection(t,{
anchorKey:g,anchorOffset:0,focusKey:g,focusOffset:s.getBlockForKey(g).getText().length});o=n.RichUtils.toggleBlockType(n.EditorState.set(o,{selection:y}),e)}for(var v=(o=n.EditorState.set(o,{
selection:h})).getCurrentContent(),k=v.getBlockMap(),S=0;S<m.length;S++){var C=m[S],w=v.getBlockForKey(C).set("depth",p);k=k.set(C,w)}v=v.set("blockMap",k),o=n.EditorState.push(o,v,"toggle block")}
return o},toggleSelectedBlocksStyles:function(t,e,o){var n=t;return r.a.updateSelectedBlocks(t,(function(t){return n=c.toggleBlockStyles(n,t,e,o),null})),n},toggleBlockStyles:function(t,e,o,i){
var s=t.getSelection();s=r.a.modifySelection(t,{anchorKey:e.getKey(),anchorOffset:0,focusKey:e.getKey(),focusOffset:0});var a=t.getCurrentContent(),l=e.getData().toJSON();l.props=l.props||{}
;var u=l.props;u.style=u.style||{};var c=u.style;"function"==typeof i?u.style=i(c)||c:o.every((function(t){return c[t.name]===t.value}))?o.forEach((function(t){return delete c[t.name]
})):o.forEach((function(t){return c[t.name]=t.value})),0===Object.keys(c).length&&delete u.style;var p=n.Modifier.setBlockData(a,s,l);return n.EditorState.push(t,p,"toggle block style")},
isSelected:function(t,e,o){if(!t)return!1;var n,r,i=t.getSelection(),s=t.getCurrentContent(),a=!1;switch(e){case"inline":a=t.getCurrentInlineStyle().has(o);break;case"block":
a=!!(n=s.getBlockForKey(i.getAnchorKey()))&&n.getType()===o;break;case"entity":(r=(n=s.getBlockForKey(i.getAnchorKey()))&&n.getEntityAt(i.getStartOffset()))&&(a=s.getEntity(r).type===o)}return a},
getStylesFromSelection:function(t){var e=[],o=t.getSelection();if(o.isCollapsed()){var n,r=i(t.getCurrentInlineStyle().keys());try{for(r.s();!(n=r.n()).done;){var s=n.value;e.push(s)}}catch(t){r.e(t)
}finally{r.f()}}else!function(){for(var n=o.getStartKey(),r=t.getSelection().getEndKey(),i=t.getCurrentContent(),s=i.getBlockForKey(n),a={};s;){s.getCharacterList().forEach((function(t){
return t.getStyle().forEach((function(t){return a[t]=!0}))}));var l=s.getKey();s=l===r?null:i.getBlockAfter(l)}for(var u in a)e.push(u)}();return e},getCurrentStylesWithPrefix:function(t,e){
var o,n=[],r=new RegExp("^".concat(e,"\\.")),s=i(t.getCurrentInlineStyle().keys());try{for(s.s();!(o=s.n()).done;){var a=o.value;a.match(r)&&n.push(a)}}catch(t){s.e(t)}finally{s.f()}return n},
getAllStyleNamesFromSelection:function(t){var e,o=[],n=t.getSelection(),r=!1,i=n.getEndKey()===n.getStartKey(),s=n.getStartOffset(),a=n.getEndOffset()
;i?t.getCurrentContent().getBlockForKey(t.getSelection().anchorKey).findStyleRanges((function(t){return(e=t.getStyle().toJS()).length>0}),(function(t,n){
(t>=s&&t<a||n>s&&n<=a||t<s&&n>a)&&(o=o.concat(e))})):function(){for(var e={},i=t.getCurrentContent().getBlocksAsArray(),s=function(t){var o,s,a=i[t]
;if(a.getKey()===n.getStartKey())return a.findStyleRanges((function(t){return o=t.getStyle().toJS(),!0}),(function(t){t>=n.getStartOffset()&&o.forEach((function(t){return e[t]=!0}))})),r=!0,
a.getKey()===n.getEndKey()?"break":"continue";if(a.getKey()===n.getEndKey())return a.findStyleRanges((function(t){return s=t.getStyle().toJS(),!0}),(function(t){
t<n.getEndOffset()&&s.forEach((function(t){return e[t]=!0}))})),"break";if(!r)return"continue";var l=void 0;a.findStyleRanges((function(t){return l=t.getStyle().toJS()}),(function(t){
t<n.getEndOffset()&&l.forEach((function(t){return e[t]=!0}))}))},a=0;a<i.length;a++){var l=s(a);if("break"===l)break}for(var u in e)o.push(u)}();return o}};e.a=c},246:function(t,e,o){var n=o(247)
;"string"==typeof n&&(n=[[t.i,n,""]]);var r={hmr:!1,transform:void 0,insertInto:function(){return o(19)()}};o(20)(n,r);n.locals&&(t.exports=n.locals)},247:function(t,e,o){
(e=o(18)(!1)).push([t.i,".uu5-richtext-toolbar{text-align:left;border-radius:2px;white-space:nowrap;font-family:ClearSans,sans-serif;font-size:14px;position:relative}.uu5-richtext-toolbar-button.uu5-richtext-toolbar-button.uu5-bricks-button,.uu5-richtext-toolbar-button.uu5-richtext-toolbar-button.uu5-bricks-dropdown .uu5-richtext-toolbar-button,.uu5-richtext-toolbar-button.uu5-richtext-toolbar-button.uu5-bricks-dropdown>div>.uu5-bricks-button{border-radius:0;height:32px;width:32px}.uu5-richtext-toolbar-button.uu5-richtext-toolbar-button.uu5-bricks-button:not(.active):not(:hover),.uu5-richtext-toolbar-button.uu5-richtext-toolbar-button.uu5-bricks-dropdown .uu5-richtext-toolbar-button:not(.active):not(:hover),.uu5-richtext-toolbar-button.uu5-richtext-toolbar-button.uu5-bricks-dropdown>div>.uu5-bricks-button:not(.active):not(:hover){background:transparent}.uu5-richtext-toolbar-button.uu5-richtext-toolbar-button .uu5-richtext-toolbar-dropdown-button{background:transparent;width:100%;height:100%;display:inline-block;text-align:left;min-height:auto}.uu5-richtext-toolbar-button.uu5-richtext-toolbar-button.uu5-bricks-button,.uu5-richtext-toolbar-button.uu5-richtext-toolbar-button.uu5-bricks-dropdown>div>button{padding:0 4px}.uu5-richtext-toolbar-dropdown-menu .uu5-bricks-dropdown-item:not(.uu5-richtext-item-with-button)>.uu5-bricks-dropdown-item-link{display:-webkit-flex;display:flex}.uu5-richtext-toolbar-dropdown-menu .uu5-bricks-dropdown-item-submenu .uu5-bricks-dropdown-item-link{-webkit-justify-content:flex-start;justify-content:flex-start}.uu5-richtext-toolbar-dropdown-menu .uu5-bricks-dropdown-item-submenu .uu5-bricks-dropdown-item-link>.mdi-menu-right{-webkit-flex:1 1 auto;flex:1 1 auto;-webkit-justify-content:flex-end;justify-content:flex-end}.uu5-richtext-toolbar-dropdown-menu .uu5-bricks-dropdown-item-submenu .uu5-bricks-dropdown-submenu.uu5-bricks-dropdown-menu.uu5-bricks-dropdown-menu{left:0;width:100%;top:100%}.uu5-richtext-toolbar-dropdown-menu .uu5-richtext-toolbar-dropdown-item-icon{margin:0 8px 0 -8px}.uu5-richtext-toolbar-dropdown-menu .uu5-richtext-toolbar-dropdown-item-icon:before{font-size:20px}.uu5-richtext-toolbar-dropdown-menu .uu5-richtext-toolbar-dropdown-button{background:transparent;width:100%;height:100%;display:inline-block;text-align:left;min-height:auto}.uu5-bricks-compact-menu-item.uu5-richtext-item-with-button.uu5-richtext-item-with-button,.uu5-richtext-item-with-button.uu5-richtext-item-with-button>.uu5-bricks-dropdown-item-link{padding:0}@-webkit-keyframes uu5-richtext-toolbar-show{0%{overflow:hidden}to{overflow:hidden}}@keyframes uu5-richtext-toolbar-show{0%{overflow:hidden}to{overflow:hidden}}",""]),
t.exports=e},250:function(t,e,o){"use strict";o.r(e),o.d(e,"Toolbar",(function(){return d}));var n=o(0),r=o(6);function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){
var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t}).apply(this,arguments)}function s(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function a(t){
for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?s(Object(o),!0).forEach((function(e){l(t,e,o[e])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))
}return t}function l(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var u=n.Common.VisualComponent.create({
mixins:[n.Common.BaseMixin,n.Common.ElementaryMixin,n.Common.ColorSchemaMixin],statics:{tagName:r.a.TAG+"Toolbar.Button",classNames:{main:r.a.CSS+"toolbar-button",
dropdownItemIcon:r.a.CSS+"toolbar-dropdown-item-icon",dropdownItemLabel:r.a.CSS+"toolbar-dropdown-item-label "+r.a.CSS+"toolbar-dropdown-item-icon",dropdownButton:r.a.CSS+"toolbar-dropdown-button",
dropdownMenu:r.a.CSS+"toolbar-dropdown-menu",itemWithButton:r.a.CSS+"item-with-button"}},propTypes:{onClick:n.PropTypes.func,type:n.PropTypes.string.isRequired,value:n.PropTypes.string.isRequired,
pressed:n.PropTypes.bool,items:n.PropTypes.array,label:n.PropTypes.string,icon:n.PropTypes.string,getArea:n.PropTypes.func,baseline:n.PropTypes.bool,buttonProps:n.PropTypes.object,
preserveStyle:n.PropTypes.bool},getDefaultProps:function(){return{onClick:null,type:"",value:"",pressed:!1,items:null,label:void 0,icon:void 0,getArea:null,baseline:!1,buttonProps:void 0,
preserveStyle:!1}},componentWillUnmount:function(){"function"==typeof this.props.ref_&&this.props.ref_(null)},press:function(){this._button&&this._button.press()},pressUp:function(){
this._button&&this._button.pressUp()},isPressed:function(){return this._button?this._button.isPressed():this.props.pressed},isDropdown:function(){return this._dropdown&&this._dropdown.isDropdown()},
isOpen:function(){return this.isDropdown()&&this._dropdown.isOpen()},open:function(){return this._dropdown?this._dropdown.open():null},close:function(){
return this._dropdown?this._dropdown.close():null},_onClick:function(t){this._blockEditorBlur(this.props.type)&&this._blockEvent(t),"function"==typeof this.props.onClick&&this.props.onClick({
component:this,type:this.props.type,value:this.props.value,preserveStyle:this.props.preserveStyle})},_onItemClick:function(t,e){var o={component:this,type:e.type||this.props.type,value:e.value,
preserveStyle:this.props.preserveStyle};"function"==typeof e.onClick&&(o.onClick=e.onClick),"function"==typeof this.props.onClick&&this.props.onClick(o)},_blockEvent:function(t){t.preventDefault(),
t.stopPropagation()},_blockUU5Click:function(t,e){this._blockEvent(e)},_blockEditorBlur:function(t){return!0},_registerButton:function(t){this._button=t},_registerDropdown:function(t){this._dropdown=t
},_getItemClickFn:function(t){var e=this;return function(o){return e._onItemClick(o,t)}},_renderDropDownItems:function(){
var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.items,o=e.some((function(t){return t.icon}));return e.map((function(e){var s=e.props;return e.props&&(e=a(a({},e),s)),
n.Common.Element.create(n.Bricks.Dropdown.Item,{key:e.label,className:(e.className||"")+(e.button?t.getClassName("itemWithButton"):""),label:e.button?n.Common.Element.create(e.button,i({
className:t.getClassName("dropdownButton"),label:e.dropdownItemLabel||e.label,icon:e.icon,onClick:t.props.onClick,selected:e.selected,disabled:e.disabled,dropdownItem:!0,getArea:t.props.getArea,
colorSchema:t.props.colorSchema,preserveStyle:t.props.preserveStyle},s)):n.Common.Element.create("span",{className:r.a.Css.css("display: flex; align-items: center;")
},o&&(e.icon?n.Common.Element.create(n.Bricks.Icon,{className:t.getClassName("dropdownItemIcon"),icon:e.icon||"mdi-blank"}):e.dropdownItemLabel?n.Common.Element.create("span",{
className:t.getClassName("dropdownItemLabel")},e.label):n.Common.Element.create(n.Bricks.Icon,{className:t.getClassName("dropdownItemIcon"),icon:"mdi-blank"})),e.dropdownItemLabel||e.label),
tooltip:e.tooltip,mainAttrs:t._blockEditorBlur(e.type)?{onMouseDown:t._blockEvent}:void 0,selected:e.selected,onClick:e.button||e.items?t._blockUU5Click:t._getItemClickFn(e)
},e.items?t._renderDropDownItems(e.items):void 0)}))},render:function(){var t=this.getMainPropsToPass();if(Array.isArray(this.props.items)&&this.props.items.length>0){
var e=this.props.icon&&'<uu5string /><UU5.Bricks.Icon icon="'.concat(this.props.icon,'" />');return n.Common.Element.create(n.Bricks.Dropdown,i({},t,this.props.buttonProps,{
ref_:this._registerDropdown,label:e||this.props.label,iconHidden:!0,buttonProps:{mainAttrs:{onMouseDown:this._blockEvent,tabIndex:-1}},baseline:this.props.baseline,colorSchema:this.props.colorSchema,
popoverLocation:"portal",menuClassName:this.getClassName("dropdownMenu")}),this._renderDropDownItems())}return n.Common.Element.create(n.Bricks.Button,i({ref_:this._registerButton},t,{
pressed:this.props.pressed,mainAttrs:{onMouseDown:this._onClick,tabIndex:-1},onClick:this._blockUU5Click,baseline:this.props.baseline,colorSchema:this.props.colorSchema
},this.props.buttonProps),this.props.icon?n.Common.Element.create(n.Bricks.Icon,{icon:this.props.icon}):this.props.label)}}),c=o(240);o(246);function p(){return(p=Object.assign||function(t){
for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t}).apply(this,arguments)}function m(t){
return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var f={9:"Tab",13:"Enter",53:"5"
},d=n.Common.LsiMixin.withContext(n.Common.VisualComponent.create({mixins:[n.Common.BaseMixin,n.Common.ElementaryMixin,n.Common.ResizeMixin,n.Common.LsiMixin],statics:{tagName:r.a.TAG+"Toolbar",
classNames:{main:function(t,e){
return r.a.CSS+"toolbar "+n.Common.Css.css("\n            max-height: 34px;\n            border: 1px solid #BDBDBD;\n            ".concat(t.dynamic&&e.empty?"height: 0; border: none;":"","\n            pointer-events: ").concat(e.empty&&t.dynamic?"none":"auto",";\n            overflow: ").concat(e.empty&&t.dynamic?"hidden":"visible",";\n            ").concat(!e.empty&&t.dynamic&&t.animated?"animation-name: uu5-richtext-toolbar-show; animation-duration: 0.5s;":"",";\n\n            & > * {\n              position: relative;\n              ").concat(t.animated&&t.dynamic?"transition: top 0.5s;":"","\n            }\n\n            && > * {\n              top: ").concat(t.dynamic&&e.empty?-35:0,"px;\n            }\n          "))
},invisible:function(){return n.Common.Css.css("visibility: hidden;")},background:function(){return n.Common.Css.css("\n            height: 32px;\n            background: #FFFFFF;\n          ")}}},
propTypes:{items:n.PropTypes.arrayOf(n.PropTypes.shape({icon:n.PropTypes.string,items:n.PropTypes.arrayOf(n.PropTypes.shape({
label:n.PropTypes.oneOfType([n.PropTypes.string,n.PropTypes.object,n.PropTypes.func]),value:n.PropTypes.string,usePrefix:n.PropTypes.bool})),
label:n.PropTypes.oneOfType([n.PropTypes.string,n.PropTypes.object,n.PropTypes.func]),type:n.PropTypes.oneOf(["inline","block","entity","custom","customEntity","customBlock"]),value:n.PropTypes.string
})),getArea:n.PropTypes.func,animated:n.PropTypes.bool,dynamic:n.PropTypes.bool},getDefaultProps:function(){return{items:[],getArea:null,animated:!1,dynamic:!0}},getInitialState:function(){
return this._buttons=new Array(this.props.items.length),{maxIcons:9999,editorState:null,getArea:this.props.getArea,items:this.props.items,visible:!1,empty:!this.props.items||!this.props.items.length}
},componentWillReceiveProps:function(t){if(this.props.controlled){var e={};if(t.getArea!==this.state.getArea&&"function"==typeof t.getArea){var o=t.getArea(),n=o.getEditorState()
;o&&this.state.editorState!==n&&(e.editorState=n),e.getArea=t.getArea}if(t.items.length>this.props.items.length){
for(var r=new Array(t.items.length),i=0;i<this._buttons.length;i++)r[i]=this._buttons[i];this._buttons=r}t.items&&t.items.length?(e.items=t.items,e.empty=!1):e.empty=!0,this.setState(e)}},
update:function(t){var e=this;this.setState({editorState:t},(function(){for(var t=0;t<e._buttons.length;t++){var o=e._buttons[t];o&&"function"==typeof o.isOpen&&o.isOpen()&&o.close()}}))},
setItems:function(t,e){var o=this;this.setState((function(n){return{getArea:t.getArea,items:e&&e.length?e:o.props.dynamic?n.items:e,empty:!e||!e.length,editorState:t.getArea().getEditorState()}}))},
onResize_:function(t,e){var o=Math.max(Math.floor(e/32),0),n=this.state.maxIcons;o&&o!==n&&n!==o&&this.setState({maxIcons:o,visible:!0})},_onButtonClick:function(t,e){
if("function"==typeof this.state.getArea){var o=this.state.getArea();if(o)if("function"==typeof t.onClick){var n=o.getEditorState();n=t.onClick(n,o)||n,o.setEditorState(n,e)}else switch(t.type){
case"inline":o.toggleInlineStyle(t.value,t.preserveStyle,t.focus);break;case"block":o.toggleBlockType(t.value);break;case"entity":o.editSelectedComponent(t.value,t.component,t.component,t.onClick)}}},
_isItemSelected:function(t,e){return!this.isDisabled()&&!!t&&("function"==typeof e.isSelected?e.isSelected(t,e):c.a.isSelected(t,e.type,e.value))},_getItems:function(){
var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.editorState,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.items,r=arguments.length>2?arguments[2]:void 0,i=[]
;return o.forEach((function(o,s){var a=n.Common.Tools.mergeDeep(o);if(a.props=a.props||{},r&&(a.value=r.ignorePrefix?a.value:"".concat(r.value,".").concat(a.value),a.type=a.type||r.type),
a.disabled=t.isDisabled()||!e||"function"==typeof o.isDisabled&&o.isDisabled(e),a.selected=t._isItemSelected(e,a),
"function"==typeof a.getProps&&(a.props=n.Common.Tools.merge(a.props,a.getProps(e,t.props.getArea,t))),a.label=t._getLsiItem(a.label),
a.dropdownItemLabel=t._getLabelWithShortcut(a.dropdownItemLabel||a.label,a.shortcut),a.tooltip=t._getLabelWithShortcut(a.label,a.shortcut,!0),
(a.props.items||a.items)&&(a.items=t._getItems(e,a.props.items||a.items,a),delete a.props.items),!r&&s>=t.state.maxIcons){if(s===t.state.maxIcons){var l=i.pop();i.push({value:"",
icon:"mdi-dots-horizontal",items:[l],props:{buttonProps:{pullRight:!0}},disabled:t.isDisabled()})}i[t.state.maxIcons-1].items.push(a)}else i.push(a)})),i},_getLabelWithShortcut:function(t,e,o){
if(!e)return this._getLsiItem(t);var i,s,a=(s=e.keyCode)<=64||s>=91?f[s]:String.fromCharCode(96<=s&&s<=105?s-48:s),l=[];return e.ctrlKey&&l.push(n.Common.Tools.isMac()?"Cmd":"Ctrl"),
e.altKey&&l.push("Alt"),e.shiftKey&&l.push("Shift"),a&&(l.push(a),i="".concat(l.join(" + "))),i?o?"".concat(this._getLsiItem(t)," (").concat(i,")"):n.Common.Element.create("span",{
className:r.a.Css.css("flex-grow: 1; display: flex;")},n.Common.Element.create("span",{className:r.a.Css.css("flex-grow: 1;")},this._getLsiItem(t)),n.Common.Element.create("span",{
className:r.a.Css.css("flex: none; margin-left: 8px;")},"(",i,")")):this._getLsiItem(t)},_getLsiItem:function(t){
return t&&"object"===m(t)?this.getLsiItem(t):"function"==typeof t?this.getLsiItem(t()):t},_getLocalizedItems:function(t){if(!t||!Array.isArray(t))return t;for(var e=[],o=0;o<t.length;o++){
var n=t[o],r={};for(var i in n)"label"!==i&&"tooltip"!==i?("items"===i&&(r[i]=this._getLocalizedItems(n[i])),r[i]=n[i]):r[i]=this._getLsiItem(n[i]);e.push(r)}return e},_registerButton:function(t,e){
this._buttons[t]=e},_renderButtons:function(){var t=this;return this._getItems().map((function(e,o){var r=e.button||u;return n.Common.Element.create(r,p({ref_:function(e){return t._registerButton(o,e)
},key:o,className:"uu5-richtext-toolbar-button",icon:e.icon,onClick:function(o){o.onClick=o.onClick||e.onClick,t._onButtonClick(o)},type:e.type||"custom",value:e.value,getArea:t.state.getArea,
disabled:e.disabled,pressed:e.selected,label:t._getLsiItem(e.label),items:t._getLocalizedItems(e.items),colorSchema:"custom",tooltip:t._getLsiItem(e.tooltip||e.label),preserveStyle:e.preserveStyle
},e.props,{baseline:!0}))}))},render:function(){var t=this.getMainPropsToPass();return t.disabled=!1,this.state.visible||(t.className+=" ".concat(this.getClassName("invisible"))),
n.Common.Element.create(n.Bricks.Div,t,n.Common.Element.create("div",{className:this.getClassName("background")},this.state.items&&this.state.items.length?this._renderButtons():null))}}));e.default=d}
}]);