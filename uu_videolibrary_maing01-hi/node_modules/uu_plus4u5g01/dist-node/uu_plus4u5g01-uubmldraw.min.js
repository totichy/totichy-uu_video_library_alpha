/*!
 * UAF Licence for the uuPlus4U5 software.
 * 
 * Copyright (c) 2016-present, Unicorn a.s.
 * All rights reserved.
 * 
 * Definitions
 * -----------
 * This licence agreement is based on the original "BSD Licence" published by
 * the Regents of the University of California in 1990.
 * 
 * The term "Software" means the plus4u5 package, its modules, components,
 * all program files, source code, examples, media, and documentation which are part
 * of the Software package, as well as any portion of them. The term "Author" means
 * Unicorn a.s. and all its subsidiaries and/or affiliates.
 * 
 * Licence Agreement
 * -----------------
 * 
 * Redistribution and use of this Software in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 
 * 3. All derivative products containing user interface must display the following
 *    acknowledgement in the appropriate "About window" or website section accessible
 *    by all users of the product:
 * 
 *      This product includes following software developed by
 *      <a href="https://unicorn.com">Unicorn a.s.</a>:
 *      <a href="https://uuos9.plus4u.net/uu-bookkitg01-main/78462435-86b4d5a4a030400784764ebdb972bbda/book">UAF</a>,
 *      <a href="https://uuos9.plus4u.net/uu-bookkitg01-main/78462435-ed11ec379073476db0aa295ad6c00178/book">uu5</a>.
 * 
 * 4. All derivative products must not block the default plus4u5 browser console message containing
 *    Software version information and copyright notice of the Author.
 * 
 * 5. The use of any portion of this Software is not allowed in the products
 *    that fully or partially resemble the functionality of the Software
 *    or otherwise compete with the Software unless they are licenced under the same licence
 *    conditions and provided free of charge. Specific prior written permission is required otherwise.
 * 
 * 6. Neither the name of the Author nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 * 
 * Disclaimer
 * ----------
 * THIS SOFTWARE IS PROVIDED BY AUTHOR "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL AUTHOR BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
"undefined"!=typeof SystemJS&&SystemJS&&"function"==typeof SystemJS.normalizeSync&&function(){
var t=!SystemJS.normalizeSync("uu5g05").match(/uu5g05$/),e=!SystemJS.normalizeSync("uu_plus4u5g02").match(/uu_plus4u5g02$/);if(!t||!e){for(var r,n=(SystemJS._loader||{}).loads||[],o=0;o<n.length;o++){
var i=n[o]||{};if("loading"===i.status&&"string"==typeof i.name&&i.name.match(/\/uu_plus4u5g01-uubmldraw(?:\.min)?\.js([?#]|$)/)){r=i.name;break}}if(r){
var s=r.match(/\.min\.js(\?|$)/)?".min":"",a=r.replace(/\/[^\/?]*(\?.*)?$/,"/");if("/4.0.0/"===a.substr(-"/4.0.0/".length)&&(a=a.substr(0,a.length-"/4.0.0/".length)+"/4.19.2/"),e||SystemJS.config({
paths:{uu_plus4u5g02:a+"uu_plus4u5g02/uu_plus4u5g02"+s+".js"}}),!t){var u=SystemJS.normalizeSync("uu5g04").replace(/\/[^\/]*$/,"/");SystemJS.config({paths:{uu5g05:u+"uu5g05/uu5g05"+s+".js"}}),
!SystemJS.normalizeSync("uu5stringg01").match(/uu5stringg01$/)||SystemJS.config({paths:{uu5stringg01:u+"uu5stringg01/uu5stringg01"+s+".js"}})}}}}(),module.exports=function(t){var e={};function r(n){
if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{
enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},
r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),
2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t}
;return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=8)}([function(t,e){t.exports=require("uu5g04")},function(t,e){t.exports=require("../index.js")
},function(t,e){t.exports=require("uu5g04-bricks")},function(t,e,r){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=function(t,e){
var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var o=(s=n,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),
u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(u," */")),i=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}))
;return[r].concat(i).concat([o]).join("\n")}var s,a,u;return[r].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,n){
"string"==typeof t&&(t=[[null,t,""]]);var o={};if(n)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(o[s]=!0)}for(var a=0;a<t.length;a++){var u=[].concat(t[a])
;n&&o[u[0]]||(r&&(u[2]?u[2]="".concat(r," and ").concat(u[2]):u[2]=r),e.push(u))}},e}},function(t,e){function r(t){var e=document.head||document.body
;t.setAttribute("data-owner","uu_plus4u5g01/uu_plus4u5g01-uubmldraw@4.19.2"),t.setAttribute("data-emotion","plusu-uubmldraw"),t.setAttribute("data-tech","less")
;for(var r=e.querySelectorAll('style[data-emotion="plusu-uubmldraw"]'),n=r.length-1;n>=0;n--){var o=r[n];if("less"===o.getAttribute("data-tech"))return void o.parentNode.insertBefore(t,o.nextSibling)}
for(var i=0;i<r.length;i++){var s=r[i];if("less"!==s.getAttribute("data-tech"))return void s.parentNode.insertBefore(t,s)}var a=document.querySelector("[data-uu-app-styles-insert-before]")
;a?a.parentNode.insertBefore(t,a):e.appendChild(t)}var n={appendChild:r,insertBefore:r,insertAfter:r};t.exports=function(){return n}},function(t,e,r){var n,o,i={},s=(n=function(){
return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=n.apply(this,arguments)),o}),a=function(t,e){return e?e.querySelector(t):document.querySelector(t)},u=function(t){
var e={};return function(t,r){if("function"==typeof t)return t();if(void 0===e[t]){var n=a.call(this,t,r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{
n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),l=null,c=0,d=[],m=r(12);function f(t,e){for(var r=0;r<t.length;r++){var n=t[r],o=i[n.id];if(o){o.refs++
;for(var s=0;s<o.parts.length;s++)o.parts[s](n.parts[s]);for(;s<n.parts.length;s++)o.parts.push(y(n.parts[s],e))}else{var a=[];for(s=0;s<n.parts.length;s++)a.push(y(n.parts[s],e));i[n.id]={id:n.id,
refs:1,parts:a}}}}function p(t,e){for(var r=[],n={},o=0;o<t.length;o++){var i=t[o],s=e.base?i[0]+e.base:i[0],a={css:i[1],media:i[2],sourceMap:i[3]};n[s]?n[s].parts.push(a):r.push(n[s]={id:s,parts:[a]
})}return r}function g(t,e){var r=u(t.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.")
;var n=d[d.length-1];if("top"===t.insertAt)n?n.nextSibling?r.insertBefore(e,n.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),
d.push(e);else if("bottom"===t.insertAt)r.appendChild(e);else{
if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n")
;var o=u(t.insertAt.before,r);r.insertBefore(e,o)}}function h(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=d.indexOf(t);e>=0&&d.splice(e,1)}function v(t){
var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var n=function(){0;return r.nc}();n&&(t.attrs.nonce=n)}return b(e,t.attrs),g(t,e),e}
function b(t,e){Object.keys(e).forEach((function(r){t.setAttribute(r,e[r])}))}function y(t,e){var r,n,o,i;if(e.transform&&t.css){
if(!(i="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=i}if(e.singleton){var s=c++;r=l||(l=v(e)),n=S.bind(null,r,s,!1),o=S.bind(null,r,s,!0)
}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(t){
var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",b(e,t.attrs),g(t,e),e}(e),n=A.bind(null,r,e),o=function(){h(r),
r.href&&URL.revokeObjectURL(r.href)}):(r=v(e),n=_.bind(null,r),o=function(){h(r)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}
t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment")
;(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var r=p(t,e)
;return f(r,e),function(t){for(var n=[],o=0;o<r.length;o++){var s=r[o];(a=i[s.id]).refs--,n.push(a)}t&&f(p(t,e),e);for(o=0;o<n.length;o++){var a;if(0===(a=n[o]).refs){
for(var u=0;u<a.parts.length;u++)a.parts[u]();delete i[a.id]}}}};var w,C=(w=[],function(t,e){return w[t]=e,w.filter(Boolean).join("\n")});function S(t,e,r,n){var o=r?"":n.css
;if(t.styleSheet)t.styleSheet.cssText=C(e,o);else{var i=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}function _(t,e){
var r=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}
function A(t,e,r){var n=r.css,o=r.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(n=m(n)),
o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),
a&&URL.revokeObjectURL(a)}},function(t,e){t.exports=require("uu_appg01_core")},function(t,e){t.exports=require("uu_appg01")},function(t,e,r){t.exports=r(9)},function(t,e,r){t.exports=r(15)
},function(t,e,r){var n=r(11);"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!1,transform:void 0,insertInto:function(){return r(4)()}};r(5)(n,o);n.locals&&(t.exports=n.locals)},function(t,e,r){
(e=r(3)(!1)).push([t.i,".plus4u5-uubmldraw-image :hover{cursor:pointer}.plus4u5-uubmldraw-image-modal{text-align:center}.plus4u5-uubmldraw-image-image-wrapper{display:inline-block;position:relative}.plus4u5-uubmldraw-image-modal .uu5-bricks-modal-dialog{width:auto;display:inline-block}.plus4u5-uubmldraw-image-button{position:absolute;top:10px;right:10px}.plus4u5-uubmldraw-image-button .uu5-bricks-icon{opacity:.54;font-size:30px}.plus4u5-uubmldraw-image-inprogress{position:absolute;top:0;right:0;width:200px}",""]),
t.exports=e},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t
;var r=e.protocol+"//"+e.host,n=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){
var o,i=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}))
;return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:n+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(t,e,r){
var n=r(14);"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!1,transform:void 0,insertInto:function(){return r(4)()}};r(5)(n,o);n.locals&&(t.exports=n.locals)},function(t,e,r){
(e=r(3)(!1)).push([t.i,".plus4u5-uubmldraw-image-modal-legacy .uu5-bricks-modal-dialog{text-align:center}.plus4u5-uubmldraw-image-modal-legacy .uu5-bricks-image-responsive{display:inline-block}.plus4u5-uubmldraw-image-iframe-legacy{-webkit-overflow-scrolling:touch;overflow-y:hidden;overflow-x:auto}",""]),
t.exports=e},function(t,e,r){"use strict";r.r(e),r.d(e,"Image",(function(){return v}));var n={};r.r(n),r.d(n,"Image",(function(){return v}));var o=r(1),i=r.n(o),s=r(0),a=(r(2),r(6)),u=r(7)
;function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var c={call:function(t,e,r,n){u.Client[t](e,n.data).then((function(t){
(t=t||{}).data=t.data||{},n.done(t.data)}),(function(t){(t=t||{}).data=t.data||{},n.fail(t)}))},loadDiagram:function(t){var e=t.data.tidAwid||t.tidAwid;delete t.data.tidAwid
;var r=c.getCommandUri("loadDiagram",e);c.call("post",r.toString(),null,t)},lock:function(t){var e=t.data.tidAwid||t.tidAwid;delete t.data.tidAwid;var r=c.getCommandUri("lock",e)
;c.call("post",r.toString(),null,t)},getCommandUri:function(t,e,r){!e&&s.Common.Tools.error("tidAwid was not set for useCase ".concat(t,"."),{useCase:t}),t=t.match(/^\//)?t:"/"+t
;var n="https://uuos9.plus4u.net/uu-uubmldrawg03-main/".concat(e,"/"),o=a.Uri.UriBuilder.parse(n).setUseCase(t);if(r&&"object"===l(r))for(var i in r)o.setParameter(i,r[i]);return o.toUri()}},d=c;r(10)
;function m(){return(m=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t
}).apply(this,arguments)}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return
;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==a.return||a.return()}finally{
if(o)throw i}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name)
;if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(t,e)}(t,e)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){
(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var g=s.Common.VisualComponent.create({
mixins:[s.Common.BaseMixin,s.Common.ElementaryMixin,s.Common.LsiMixin,s.Common.LoadMixin],statics:{tagName:"Plus4U5.UuBmlDraw.ImageLoader",classNames:{main:"plus4u5-uubmldraw-image",
modal:"plus4u5-uubmldraw-image-modal",button:"plus4u5-uubmldraw-image-button uu5-elevation-2",inProgress:"plus4u5-uubmldraw-image-inprogress",img:"plus4u5-uubmldraw-image-img uu5-elevation-0",
imageWrapper:"plus4u5-uubmldraw-image-image-wrapper"},defaults:{width:250,height:150,locked:"mdi-lock-outline",editable:"mdi-lead-pencil",
inProgress:o.Environment.basePath+"uubmldraw/assets/in-progress.png",placeholder:o.Environment.basePath+"uubmldraw/assets/placeholder.png"},calls:{onLoad:"loadDiagram",lock:"lock"},lsi:{tooltip:{
cs:"Editovat",en:"Edit"},lockedAlert:{cs:"Editor je uzamčen uživatelem %s (%s)",en:"The editor is currently locked by %s (%s)"}}},propTypes:{tidAwid:s.PropTypes.string.isRequired,
code:s.PropTypes.string.isRequired,readOnly:s.PropTypes.bool},getDefaultProps:function(){return{tidAwid:null,readOnly:!1}},UNSAFE_componentWillMount:function(){this.setCalls(d)},
componentWillUnmount:function(){return s.Environment.EventListener.removeWindowEvent("message",this.getId()),this},edit:function(){var t=this
;return this.editor?this.editor.focus():this.getCall("lock")({tidAwid:this.props.tidAwid,data:{code:this.props.code},done:function(e){t._handleLock(e),t.setState({dtoOut:e})},fail:function(t){
console.error(t)}}),this},showAlert:function(){var t=this.getDtoOut().lock||{};return this._alertBus.addAlert({content:this.getLsiComponent("lockedAlert",null,[t.author,t.uuIdentity]),
colorSchema:"warning"}),this},showImage:function(){return this._modal.open({size:"auto",content:s.Common.Element.create(s.Bricks.Image,{src:this._buildImgSrc()})}),this},onLoadError_:function(t){
this.setState({loadFeedback:"error"})},getOnLoadData_:function(){return{code:this.props.code,tidAwid:this.props.tidAwid}},_receiveMessage:function(t){if("https://uuos9.plus4u.net"!==t.origin)return t
;try{var e=f(t.data.split("."),2),r=e[0],n=e[1];if(r===this.props.code)switch(n){case"unlock":this.editor=null,this.reload(),s.Environment.EventListener.removeWindowEvent("message",this.getId())}
}catch(t){console.error(t)}},_handleButtonClick:function(){this.edit()},_handleLock:function(t){if(t.lock){var e=d.getCommandUri("editor",this.props.tidAwid,{code:this.props.code,
inProgress:(!!t.inProgress).toString(),image:(!!t.image).toString()}).toString();this.editor=window.open(e),s.Environment.EventListener.addWindowEvent("message",this.getId(),this._receiveMessage)
}else this.showAlert()},_getButtonTooltip:function(){var t=this.getDtoOut().lock||{};if(t.uuIdentity)return"".concat(t.author,"\n").concat(t.uuIdentity)},_getCorrectIcon:function(){
var t=this.getDtoOut().lock,e=this.getDefault();return(!!t&&Object.keys(t).length)>0?e.locked:e.editable},_buildButtonAttrs:function(){var t=this,e={className:this.getClassName().button,hidden:!0,
size:"xl",ref_:function(e){return t._button=e},onClick:function(e,r){r.stopPropagation(),t.edit()}},r=this._getButtonTooltip();return r&&(e.tooltip=r),e},_buildModalAttrs:function(){var t=this;return{
header:this.getDtoOut().name||" ",className:this.getClassName().modal,ref_:function(e){t._modal=e}}},_buildImgSrc:function(){return this.getDtoOut().imgUrl||this.getDefault().placeholder},
_buildImageAttrs:function(){var t=this;return{src:this._buildImgSrc(),className:this.getClassName().img,ref_:function(e){return t._image=e}}},_onMouseOverHandler:function(){
!this.getDtoOut().readOnly&&this._button.show()},_onMouseOutHandler:function(){this._button.hide()},_buildInProgressBar:function(){
if(this.getDtoOut().inProgress)return s.Common.Element.create(s.Bricks.Image,this._buildInProgressProps())},_buildInProgressProps:function(){return{className:this.getClassName().inProgress,
src:this.getDefault().inProgress}},render:function(){var t=this;return this.getLoadFeedbackChildren((function(){return s.Common.Element.create("div",m({},t.getMainAttrs(),{onMouseOver:function(){
return t._onMouseOverHandler()},onMouseOut:function(){return t._onMouseOutHandler()}}),s.Common.Element.create(s.Bricks.Modal,t._buildModalAttrs()),s.Common.Element.create(s.Bricks.AlertBus,{
ref_:function(e){return t._alertBus=e}}),s.Common.Element.create("div",{onClick:function(){return t.showImage()},className:t.getClassName().imageWrapper
},t._buildInProgressBar(),s.Common.Element.create(s.Bricks.Image,t._buildImageAttrs()),s.Common.Element.create(s.Bricks.Button,t._buildButtonAttrs(),s.Common.Element.create(s.Bricks.Icon,{
icon:t._getCorrectIcon()}))))}))}}),h=(r(13),s.Common.VisualComponent.create({mixins:[s.Common.BaseMixin,s.Common.ElementaryMixin],statics:{tagName:"Plus4U5.UuBmlDraw.ImageLegacy_",classNames:{
main:"plus4u5-uubmldraw-image plus4u5-uubmldraw-image-legacy",modal:"plus4u5-uubmldraw-image-modal-legacy",iframe:"plus4u5-uubmldraw-image-iframe-legacy"},defaults:{width:250,height:150,
contentUrl:"https://widget.plus4u.net/%s/uu-uubmldraw/getContent?referrerUri=%s&uuid=%s&uuAT=Bearer %s&readOnly=%s",
sheetUri:"ues:VPH-BT[29537617]:UUAPPKNH/PORTAL[44191581396036005]:50946987294721227[50946987294721227]"}},propTypes:{sheetUri:s.PropTypes.string.isRequired,code:s.PropTypes.string.isRequired,
readOnly:s.PropTypes.bool,inProgress:s.PropTypes.bool,userIdentity:s.PropTypes.string,userName:s.PropTypes.string},getDefaultProps:function(){return{readOnly:!1,inProgress:!1,userIdentity:null,
userName:null}},componentDidMount:function(){window.uuBMLDraw=window.uuBMLDraw||{},uuBMLDraw[this.props.code]=uuBMLDraw[this.props.code]||{},uuBMLDraw.initStack=uuBMLDraw.initStack||[],
s.Environment.EventListener.addWindowEvent("message",this.getId(),this._receiveMessage)},componentWillUnmount:function(){s.Environment.EventListener.removeWindowEvent("message",this.getId()),
delete uuBMLDraw[this.props.code]},showImage:function(){uuBMLDraw[this.props.code]&&uuBMLDraw[this.props.code].image&&this._modal.open({size:"auto",content:s.Common.Element.create(s.Bricks.Image,{
src:uuBMLDraw[this.props.code].image})})},_getIframeProps:function(){var t=this;return{className:this.getClassName().iframe,src:this._buildSrc(),inline:!0,resize:!0,ref_:function(e){return t._iframe=e
},iframeAttrs:{name:this.getId()}}},_buildSrc:function(){var t=this.props.sheetUri||this.getDefault().sheetUri
;return s.Common.Tools.formatString(this.getDefault().contentUrl,[this._getTerritoryCode(t),t,this.props.code,o.Environment.getToken(),this.props.readOnly])},_getTerritoryCode:function(t){
return t.match(/:([A-Z0-9-]+)/)[1]},_receiveMessage:function(t){var e=t.data,r=uuBMLDraw[this.props.code]||{};if(e.name===this.getId())switch(e.type){case"setDimensions":case"restoreDimensions":
this._iframe.setSize(e.width+1,e.height+10);break;case"setImage":var n=e.base64;r.image=n,this._iframe.setSize(e.width+1,e.height+10);break;case"showImages":this.showImage()}},render:function(){
var t=this;return s.Common.Element.create("div",this.getMainAttrs(),s.Common.Element.create(s.Bricks.Modal,{parent:this,header:" ",ref_:function(e){return t._modal=e},
className:this.getClassName().modal}),s.Common.Element.create(s.Bricks.Iframe,this._getIframeProps()))}})),v=s.Common.VisualComponent.create({
mixins:[s.Common.BaseMixin,s.Common.ElementaryMixin,s.Common.IdentityMixin],statics:{tagName:"Plus4U5.UuBmlDraw.Image",lsi:{codeError:{cs:"Chybí povinná vlastnost 'code'!",
en:"Required property 'code' is missing!"}}},propTypes:{code:s.PropTypes.string.isRequired},_getCorrectChild:function(){if(!this.props.code)return s.Common.Element.create(s.Bricks.Error,{
content:this.getLsiComponent("codeError")});var t=this.getIdentity(),e=Object.assign({},this.props,{userIdentity:t.uuIdentity,userName:t.name})
;return this.props.tidAwid?s.Common.Element.create(g,e):s.Common.Element.create(h,e)},render:function(){var t=this;return this.getAuthenticatedChild((function(){return t._getCorrectChild()}),{
silent:!0,inline:!0})}});e.default=n;for(var b in n)i.a.UuBmlDraw[b]=n[b]}]);