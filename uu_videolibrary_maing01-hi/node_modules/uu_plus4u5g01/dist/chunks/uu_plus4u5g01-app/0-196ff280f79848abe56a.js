/*!
 * UAF Licence for the uuPlus4U5 software.
 * 
 * Copyright (c) 2016-present, Unicorn a.s.
 * All rights reserved.
 * 
 * Definitions
 * -----------
 * This licence agreement is based on the original "BSD Licence" published by
 * the Regents of the University of California in 1990.
 * 
 * The term "Software" means the plus4u5 package, its modules, components,
 * all program files, source code, examples, media, and documentation which are part
 * of the Software package, as well as any portion of them. The term "Author" means
 * Unicorn a.s. and all its subsidiaries and/or affiliates.
 * 
 * Licence Agreement
 * -----------------
 * 
 * Redistribution and use of this Software in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 
 * 3. All derivative products containing user interface must display the following
 *    acknowledgement in the appropriate "About window" or website section accessible
 *    by all users of the product:
 * 
 *      This product includes following software developed by
 *      <a href="https://unicorn.com">Unicorn a.s.</a>:
 *      <a href="https://uuos9.plus4u.net/uu-bookkitg01-main/78462435-86b4d5a4a030400784764ebdb972bbda/book">UAF</a>,
 *      <a href="https://uuos9.plus4u.net/uu-bookkitg01-main/78462435-ed11ec379073476db0aa295ad6c00178/book">uu5</a>.
 * 
 * 4. All derivative products must not block the default plus4u5 browser console message containing
 *    Software version information and copyright notice of the Author.
 * 
 * 5. The use of any portion of this Software is not allowed in the products
 *    that fully or partially resemble the functionality of the Software
 *    or otherwise compete with the Software unless they are licenced under the same licence
 *    conditions and provided free of charge. Specific prior written permission is required otherwise.
 * 
 * 6. Neither the name of the Author nor the names of its contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 * 
 * Disclaimer
 * ----------
 * THIS SOFTWARE IS PROVIDED BY AUTHOR "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL AUTHOR BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
(window["__webpack_jsonp_uu_plus4u5g01_4_19_2_uu_plus4u5g01_app"] = window["__webpack_jsonp_uu_plus4u5g01_4_19_2_uu_plus4u5g01_app"] || []).push([[0],{

/***/ 132:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuthorizedEditable", function() { return AuthorizedEditable; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(8);
/* harmony import */ var uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var uu_plus4u5g01__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4);
/* harmony import */ var uu_plus4u5g01__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(uu_plus4u5g01__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _custom_editation_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(133);
/* harmony import */ var _authorization_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(39);
/* harmony import */ var _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(134);
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

/**
 * Copyright (C) 2019 Unicorn a.s.
 *
 * This program is free software; you can use it under the terms of the UAF Open License v01 or
 * any later version. The text of the license is available in the file LICENSE or at www.unicorn.com.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even
 * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See LICENSE for more details.
 *
 * You may contact Unicorn a.s. at address: V Kapslovne 2767/2, Praha 3, Czech Republic or
 * at the email: info@unicorn.com.
 */
//@@viewOn:imports





 //@@viewOff:imports

var authorizedProfiles = [{
  label: "Authorities",
  name: "Authorities"
}, {
  label: "Executives",
  name: "Executives"
}, {
  label: "Readers",
  name: "Readers"
}, {
  label: "Guests",
  name: "Guests"
}];

var ProfilesCheckboxes = function ProfilesCheckboxes(props) {
  function onChange(_ref) {
    var value = _ref.value;
    var newItems = props.items.map(function (item) {
      var itemData = {
        id: item.id
      };

      if (item.id === props.editedItem.id) {
        itemData.props = {
          profile: []
        };
        Object.keys(value).forEach(function (valueKey) {
          return value[valueKey] === true && itemData.props.profile.push(valueKey);
        });
        if (itemData.props.profile.length === 0) itemData.props.profile = undefined;
      }

      return itemData;
    });
    props.onChangeItems(newItems);
  }

  function getValue(profileList) {
    var profileValues = Object(_authorization_helpers__WEBPACK_IMPORTED_MODULE_4__["stringListToArray"])(props.editedItem.props.profile);
    return profileList.map(function (profile) {
      return {
        name: profile.name,
        label: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Span, {
          content: profile.label
        }),
        value: !!(profileValues && profileValues.find(function (value) {
          return value === profile.name;
        }))
      };
    });
  }

  var profileList = props.profileList || authorizedProfiles;
  return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Forms.Checkboxes, {
    value: getValue(profileList),
    onChange: onChange,
    label: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Lsi, {
      lsi: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].authorized.profilesLabel
    }),
    disabled: !props.editedItem.props.authorized
  });
};

var disableCheck = function disableCheck(props) {
  var prop = props.roleGroupInterfaceUri || props.roleUri;

  if (prop && typeof prop === "string") {
    return true;
  } else if (_typeof(prop) === "object" && (prop.value || prop.tempValue)) {
    return true;
  }

  return false;
};

var editablePropsSetup = [{
  name: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Lsi, {
    lsi: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].common.componentPropsLabel
  }),
  setup: [_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["RoleGroupInterfaceUriEditComponent"], {
    name: "artifactUri",
    type: "text",
    label: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].authorized.artifactLabel,
    getProps: function getProps(props, componentProps) {
      return {
        disabled: disableCheck(componentProps)
      };
    }
  }, {
    name: "useCase",
    type: "text",
    label: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].authorized.useCaseLabel,
    getProps: function getProps(props, componentProps) {
      return {
        disabled: disableCheck(componentProps)
      };
    }
  }, {
    name: "firstMatch",
    type: "switchSelector",
    label: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].authorized.firstMatchLabel,
    getProps: function getProps() {
      return {
        items: [{
          value: true,
          content: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Lsi, {
            lsi: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].authorized.firstMatchValueTrue
          })
        }, {
          value: false,
          content: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Lsi, {
            lsi: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].authorized.firstMatchValueFalse
          })
        }]
      };
    }
  }, function () {
    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["InfoMessage"], {
      message: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Lsi, {
        lsi: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].authorized.firstMatchMessage
      })
    });
  }]
}];
var ItemEditation = Object(uu5g04__WEBPACK_IMPORTED_MODULE_0__["createVisualComponent"])({
  getInitialState: function getInitialState() {
    this._init(this.props);

    return {};
  },
  UNSAFE_componentWillReceiveProps: function UNSAFE_componentWillReceiveProps(nextProps) {
    this._init(nextProps);
  },
  _init: function _init() {
    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;
    this._editedItem = props.items[props.items.findIndex(function (item) {
      return item.id === props.editedItemId;
    })];
  },
  _onChangeAuthorizedState: function _onChangeAuthorizedState(value, newItems) {
    this.props.onChangeItems(newItems);
  },
  render: function render() {
    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Fragment, null, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["AuthorizedStateEditComponent"], _extends({}, this.props, {
      editedItem: this._editedItem,
      onChange: this._onChangeAuthorizedState
    })), uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(ProfilesCheckboxes, _extends({}, this.props, {
      editedItem: this._editedItem
    })));
  }
});
var editableItemPropsSetup = {
  setup: ItemEditation
};
var newEditableItem = {
  tagName: "Plus4U5.App.Authorized.Item",
  isElement: true,
  props: {
    contentEditable: true,
    authorized: true
  }
};
var AuthorizedEditable = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.VisualComponent.create({
  //@@viewOn:mixins
  mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.BaseMixin],
  //@@viewOff:mixins
  //@@viewOn:statics
  statics: {
    tagName: "Plus4U5.App.AuthorizedEditable",
    classNames: {
      main: "plu4u5-app-authorized-editable"
    },
    lsi: function lsi() {
      return _objectSpread(_objectSpread({}, _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].common), _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].authorized);
    }
  },
  //@@viewOff:statics
  //@@viewOn:propTypes
  propTypes: {
    component: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.object.isRequired
  },
  //@@viewOff:propTypes
  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      component: null
    };
  },
  //@@viewOff:getDefaultProps
  //@@viewOn:reactLifeCycle
  getInitialState: function getInitialState() {
    return {
      editationModalOpen: false
    };
  },
  //@@viewOff:reactLifeCycle
  //@@viewOn:interface
  getPropsToSave: function getPropsToSave() {
    return {};
  },
  //@@viewOff:interface
  //@@viewOn:overriding
  //@@viewOff:overriding
  //@@viewOn:private
  _onSettingsClick: function _onSettingsClick() {
    //EditationModal will use the content/children value of the component, but it's children can be already in edit mode, so their actual values can be lost, so endChildrenEditation and make sure that data are correct.
    this.props.component.endChildrenEditation();
    this.setState(function (state) {
      return {
        editationModalOpen: !state.editationModalOpen
      };
    });
  },
  _getItemLabel: function _getItemLabel(item) {
    return Object(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["getAuthorizedItemLabel"])(item);
  },
  _getToolbarItemLabel: function _getToolbarItemLabel(item) {
    return Object(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["getAuthorizedItemLabel"])(item, undefined, true);
  },
  _onCloseEditationModal: function _onCloseEditationModal(newProps) {
    var _this = this;

    if (newProps) {
      if ("roleGroupInterfaceUri" in newProps) {
        var roleGroupInterfaceUri = newProps.roleGroupInterfaceUri.value;

        if (newProps.roleGroupInterfaceUri.tempValue && roleGroupInterfaceUri.indexOf(newProps.roleGroupInterfaceUri.tempValue) === -1) {
          roleGroupInterfaceUri.push(newProps.roleGroupInterfaceUri.tempValue);
        }

        newProps.roleGroupInterfaceUri = roleGroupInterfaceUri;
      }

      this.setState({
        editationModalOpen: false
      }, function () {
        _this.props.component.saveEditation(newProps);
      });
    } else {
      this.setState({
        editationModalOpen: false
      });
    }
  },
  _renderMoreSettingsModal: function _renderMoreSettingsModal() {
    var componentProps = this.props.component.getEditablePropsValues(Object.keys(this.props.component.props)); // remove roleUri as it's deprecated

    componentProps.roleGroupInterfaceUri = componentProps.roleGroupInterfaceUri || componentProps.roleUri;
    delete componentProps.roleUri;
    componentProps = _objectSpread(_objectSpread({}, componentProps), {}, {
      roleGroupInterfaceUri: {
        tempValue: "",
        value: Object(_authorization_helpers__WEBPACK_IMPORTED_MODULE_4__["stringListToArray"])(componentProps.roleGroupInterfaceUri)
      }
    });
    return this.state.editationModalOpen ? uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Suspense, {
      fallback: ""
    }, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.BricksEditable.Modal, {
      shown: true,
      componentName: this.props.component.getTagName(),
      componentProps: componentProps,
      componentPropsForm: editablePropsSetup,
      header: this.getLsiComponent("modalHeader"),
      onClose: this._onCloseEditationModal,
      itemName: uu_plus4u5g01__WEBPACK_IMPORTED_MODULE_2__["App"].Authorized.Item.tagName,
      itemDefaultProps: uu_plus4u5g01__WEBPACK_IMPORTED_MODULE_2__["App"].Authorized.Item.defaultProps,
      itemPropsForm: editableItemPropsSetup,
      newItem: newEditableItem,
      itemsSource: "children",
      getItemLabel: this._getItemLabel
    })) : null;
  },
  //@@viewOff:private
  //@@viewOn:render
  render: function render() {
    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["AuthorizedInlineEditation"], _extends({}, this.getMainPropsToPass(), {
      component: this.props.component,
      getModal: this._renderMoreSettingsModal,
      onMoreSettingsClick: this._onSettingsClick,
      getItemLabel: this._getToolbarItemLabel
    }));
  } //@@viewOff:render

});
/* harmony default export */ __webpack_exports__["default"] = (AuthorizedEditable);

/***/ }),

/***/ 135:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HocArtifactUri", function() { return HocArtifactUri; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ArtifactAuthorizedEditable", function() { return ArtifactAuthorizedEditable; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(8);
/* harmony import */ var uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var uu_plus4u5g01__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4);
/* harmony import */ var uu_plus4u5g01__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(uu_plus4u5g01__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _custom_editation_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(133);
/* harmony import */ var _editable_lsi_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(134);
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

/**
 * Copyright (C) 2019 Unicorn a.s.
 *
 * This program is free software; you can use it under the terms of the UAF Open License v01 or
 * any later version. The text of the license is available in the file LICENSE or at www.unicorn.com.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even
 * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See LICENSE for more details.
 *
 * You may contact Unicorn a.s. at address: V Kapslovne 2767/2, Praha 3, Czech Republic or
 * at the email: info@unicorn.com.
 */
//@@viewOn:imports




 //@@viewOff:imports

var HocArtifactUri = function HocArtifactUri(onLoad, onDone, onFail) {
  return Object(uu5g04__WEBPACK_IMPORTED_MODULE_0__["createHoc"])({
    getProps: function getProps(props) {
      return _objectSpread(_objectSpread({}, props), {}, {
        onLoad: onLoad,
        onDone: onDone,
        onFail: onFail,
        validate: true
      });
    },
    component: _custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["ArtifactUri"]
  });
};

var getEditablePropsSetup = function getEditablePropsSetup(onLoad, onDone, onFail) {
  return [{
    name: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Lsi, {
      lsi: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_4__["default"].common.componentPropsLabel
    }),
    setup: [HocArtifactUri(onLoad, onDone, onFail), {
      name: "useCase",
      type: "text",
      label: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_4__["default"].authorized.useCaseLabel
    }, {
      name: "firstMatch",
      type: "switchSelector",
      label: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_4__["default"].authorized.firstMatchLabel,
      getProps: function getProps() {
        return {
          items: [{
            value: true,
            content: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Lsi, {
              lsi: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_4__["default"].authorized.firstMatchValueTrue
            })
          }, {
            value: false,
            content: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Lsi, {
              lsi: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_4__["default"].authorized.firstMatchValueFalse
            })
          }]
        };
      }
    }, function () {
      return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["InfoMessage"], {
        message: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Lsi, {
          lsi: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_4__["default"].authorized.firstMatchMessage
        })
      });
    }]
  }];
};

var ItemEditation = Object(uu5g04__WEBPACK_IMPORTED_MODULE_0__["createVisualComponent"])({
  getInitialState: function getInitialState() {
    this._init(this.props);

    return {};
  },
  UNSAFE_componentWillReceiveProps: function UNSAFE_componentWillReceiveProps(nextProps) {
    this._init(nextProps);
  },
  _init: function _init() {
    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;
    this._editedItem = props.items[props.items.findIndex(function (item) {
      return item.id === props.editedItemId;
    })];
    this._profilesDisplayValue = _custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["cache"].itemProfileCache[this._editedItem.id];
  },
  _onChangeAuthorizedState: function _onChangeAuthorizedState(value, newItems) {
    var _this$_editedItem$pro;

    var isError = value === "authorized" && !((_this$_editedItem$pro = this._editedItem.props.profile) !== null && _this$_editedItem$pro !== void 0 && _this$_editedItem$pro.length) && (this._profilesDisplayValue && !this._profilesDisplayValue.length || this._editedItem.isNew && !this._profilesDisplayValue);
    this.props.onChangeItems(newItems, {
      profile: isError
    });
  },
  render: function render() {
    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Fragment, null, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["NameInput"], _extends({}, this.props, {
      editedItem: this._editedItem
    })), uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["InfoMessage"], {
      message: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Lsi, {
        lsi: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_4__["default"].authorized.nameMessage
      })
    }), uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["AuthorizedStateEditComponent"], _extends({}, this.props, {
      editedItem: this._editedItem,
      onChange: this._onChangeAuthorizedState
    })), uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["Profiles"], _extends({}, this.props, {
      editedItem: this._editedItem,
      displayValue: this._profilesDisplayValue,
      profileList: this.props.profileList,
      profileListState: this.props.profileListState
    })));
  }
});

var getEditableItemPropsSetup = function getEditableItemPropsSetup(profileList, profileListState) {
  return {
    setup: function setup(props) {
      return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(ItemEditation, _extends({}, props, {
        profileList: profileList,
        profileListState: profileListState
      }));
    }
  };
};

var newEditableItem = {
  tagName: "Plus4U5.App.ArtifactAuthorized.Item",
  isElement: true,
  isNew: true,
  props: {
    contentEditable: true,
    notAuthorized: true
  }
};
var ArtifactAuthorizedEditable = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.VisualComponent.create({
  //@@viewOn:mixins
  mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.BaseMixin],
  //@@viewOff:mixins
  //@@viewOn:statics
  statics: {
    tagName: "Plus4U5.App.ArtifactAuthorizedEditable",
    classNames: {
      main: "plu4u5-app-artifact-authorized-editable"
    },
    lsi: function lsi() {
      return _objectSpread(_objectSpread(_objectSpread({}, _editable_lsi_js__WEBPACK_IMPORTED_MODULE_4__["default"].common), _editable_lsi_js__WEBPACK_IMPORTED_MODULE_4__["default"].authorized), _editable_lsi_js__WEBPACK_IMPORTED_MODULE_4__["default"].artifactAuthorized);
    }
  },
  //@@viewOff:statics
  //@@viewOn:propTypes
  propTypes: {
    component: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.object.isRequired
  },
  //@@viewOff:propTypes
  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      component: null
    };
  },
  //@@viewOff:getDefaultProps
  //@@viewOn:reactLifeCycle
  getInitialState: function getInitialState() {
    return {
      editationModalOpen: false,
      profileList: undefined,
      profileListState: "load"
    };
  },
  componentDidMount: function componentDidMount() {
    Object(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["loadArtifactPermission"])(this.props.component.props.artifactUri, this._onLoadProfiles, this._onLoadProfilesDone, this._onLoadProfilesFail);
  },
  //@@viewOff:reactLifeCycle
  //@@viewOn:interface
  getPropsToSave: function getPropsToSave() {
    return {};
  },
  //@@viewOff:interface
  //@@viewOn:overriding
  //@@viewOff:overriding
  //@@viewOn:private
  _onSettingsClick: function _onSettingsClick() {
    //EditationModal will use the content/children value of the component, but it's children can be already in edit mode, so their actual values can be lost, so endChildrenEditation and make sure that data are correct.
    this.props.component.endChildrenEditation();
    this.setState(function (state) {
      return {
        editationModalOpen: !state.editationModalOpen
      };
    });
  },
  _onLoadProfiles: function _onLoadProfiles() {
    this.setState({
      profileListState: "load"
    });
  },
  _onLoadProfilesDone: function _onLoadProfilesDone(data) {
    var profileList = data.profileList.map(function (profile) {
      return {
        name: profile.code,
        label: profile.name
      };
    });
    this.setState({
      profileList: profileList,
      profileListState: "done"
    });
  },
  _onLoadProfilesFail: function _onLoadProfilesFail() {
    this.setState({
      profileList: undefined,
      profileListState: "fail"
    });
  },
  _getItemLabel: function _getItemLabel(item) {
    return Object(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["getAuthorizedItemLabel"])(item, this.state.profileList);
  },
  _getToolbarItemLabel: function _getToolbarItemLabel(item) {
    return Object(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["getAuthorizedItemLabel"])(item, this.state.profileList, true);
  },
  _onCloseEditationModal: function _onCloseEditationModal(newProps) {
    var _this = this;

    if (newProps) {
      this.setState({
        editationModalOpen: false
      }, function () {
        _this.props.component.saveEditation(newProps);
      });
    } else {
      this.setState({
        editationModalOpen: false
      });
    }
  },
  _renderMoreSettingsModal: function _renderMoreSettingsModal() {
    var componentProps = this.props.component.getEditablePropsValues(Object.keys(this.props.component.props));
    return this.state.editationModalOpen ? uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Suspense, {
      fallback: ""
    }, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.BricksEditable.Modal, {
      shown: true,
      componentName: this.props.component.getTagName(),
      componentProps: componentProps,
      componentPropsForm: getEditablePropsSetup(this._onLoadProfiles, this._onLoadProfilesDone, this._onLoadProfilesFail),
      header: this.getLsiComponent("modalHeader"),
      onClose: this._onCloseEditationModal,
      itemName: uu_plus4u5g01__WEBPACK_IMPORTED_MODULE_2__["App"].ArtifactAuthorized.Item.tagName,
      itemDefaultProps: uu_plus4u5g01__WEBPACK_IMPORTED_MODULE_2__["App"].ArtifactAuthorized.Item.defaultProps,
      itemPropsForm: getEditableItemPropsSetup(this.state.profileList, this.state.profileListState),
      newItem: newEditableItem,
      itemsSource: "children",
      getItemLabel: this._getItemLabel
    })) : null;
  },
  //@@viewOff:private
  //@@viewOn:render
  render: function render() {
    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["AuthorizedInlineEditation"], _extends({}, this.getMainPropsToPass(), {
      component: this.props.component,
      getModal: this._renderMoreSettingsModal,
      onMoreSettingsClick: this._onSettingsClick,
      profileList: this.state.profileList,
      profileListState: this.state.profileListState,
      getItemLabel: this._getToolbarItemLabel
    }));
  } //@@viewOff:render

});
/* harmony default export */ __webpack_exports__["default"] = (ArtifactAuthorizedEditable);

/***/ }),

/***/ 161:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Roles", function() { return Roles; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RoleGroupAuthorizedEditable", function() { return RoleGroupAuthorizedEditable; });
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7);
/* harmony import */ var uu5g04__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(uu5g04__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(8);
/* harmony import */ var uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(uu5g04_bricks__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var uu_plus4u5g01__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4);
/* harmony import */ var uu_plus4u5g01__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(uu_plus4u5g01__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _custom_editation_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(133);
/* harmony import */ var _authorization_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(39);
/* harmony import */ var _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(134);
function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

/**
 * Copyright (C) 2019 Unicorn a.s.
 *
 * This program is free software; you can use it under the terms of the UAF Open License v01 or
 * any later version. The text of the license is available in the file LICENSE or at www.unicorn.com.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even
 * the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See LICENSE for more details.
 *
 * You may contact Unicorn a.s. at address: V Kapslovne 2767/2, Praha 3, Czech Republic or
 * at the email: info@unicorn.com.
 */
//@@viewOn:imports





 //@@viewOff:imports

var getItemLabel = function getItemLabel(item, simple) {
  var itemProps = item;
  if (item.props) itemProps = item.props;

  if (itemProps.name) {
    return itemProps.name;
  }

  var authorizedState = _custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["authorizedStates"].find(function (stateItem) {
    return itemProps[stateItem];
  });
  var roles = Object(_authorization_helpers__WEBPACK_IMPORTED_MODULE_4__["stringListToArray"])(itemProps.roleGroupInterfaceUri);

  if (authorizedState !== "authorized") {
    roles = undefined;
  } else if (Array.isArray(roles)) {
    authorizedState = "authorized";
    roles = roles.map(function (role) {
      var parsedRole = uu_plus4u5g01__WEBPACK_IMPORTED_MODULE_2__["Common"].Url.parse(role);
      return parsedRole.parameters.code || parsedRole.parameters.id;
    }).join(", ");

    if (simple && roles) {
      return roles;
    }
  }

  return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Fragment, null, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create("div", null, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Lsi, {
    lsi: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].authorized[authorizedState]
  })), roles ? uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create("div", null, roles) : null);
};

var ItemEditation = Object(uu5g04__WEBPACK_IMPORTED_MODULE_0__["createVisualComponent"])({
  getInitialState: function getInitialState() {
    this._init(this.props);

    return {};
  },
  componentDidMount: function componentDidMount() {
    this._validate(this.props);
  },
  UNSAFE_componentWillReceiveProps: function UNSAFE_componentWillReceiveProps(nextProps) {
    this._init(nextProps);
  },
  _validate: function _validate() {
    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;

    if (this._editedItem.isNew && this._editedItem.props.authorized && (!this._itemRoleList || this._itemRoleList.length === 0)) {
      props.onChangeItems(this.props.items, {
        roleGroupInterfaceUri: true
      });
    }
  },
  _init: function _init() {
    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;
    this._editedItem = props.items[props.items.findIndex(function (item) {
      return item.id === props.editedItemId;
    })];
    this._roleList = Object(_authorization_helpers__WEBPACK_IMPORTED_MODULE_4__["stringListToArray"])(Object(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["getRoleGroupInterfaceUriValue"])(props.componentProps.roleGroupInterfaceUri));
    this._itemRoleList = Object(_authorization_helpers__WEBPACK_IMPORTED_MODULE_4__["stringListToArray"])(this._editedItem.props.roleGroupInterfaceUri);
    this._rolesDisplayValue = _custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["cache"].itemRoleCache[this._editedItem.id];
  },
  _onChangeAuthorizedState: function _onChangeAuthorizedState(value, newItems) {
    var _this$_editedItem$pro;

    var isError = value === "authorized" && !((_this$_editedItem$pro = this._editedItem.props.roleGroupInterfaceUri) !== null && _this$_editedItem$pro !== void 0 && _this$_editedItem$pro.length) && (this._rolesDisplayValue && !this._rolesDisplayValue.length || this._editedItem.isNew && !this._rolesDisplayValue);
    this.props.onChangeItems(newItems, {
      roleGroupInterfaceUri: isError
    });
  },
  render: function render() {
    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Fragment, null, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["NameInput"], _extends({}, this.props, {
      editedItem: this._editedItem
    })), uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["InfoMessage"], {
      message: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Lsi, {
        lsi: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].authorized.nameMessage
      })
    }), uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["AuthorizedStateEditComponent"], _extends({}, this.props, {
      editedItem: this._editedItem,
      onChange: this._onChangeAuthorizedState
    })), uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(Roles, _extends({}, this.props, {
      editedItem: this._editedItem,
      roleList: this._roleList,
      itemRoleList: this._itemRoleList,
      displayValue: this._rolesDisplayValue
    })));
  }
});
var Roles = function Roles(props) {
  function onChange(_ref) {
    var value = _ref.value;
    var hasValue = false;
    var displayValue = value;
    var newItems = props.items.map(function (item) {
      var itemData = {
        id: item.id
      };

      if (item.id === props.editedItem.id) {
        var _itemRoleGroupInterfa;

        var itemRoleGroupInterfaceUri = [];
        Object.keys(value).forEach(function (valueKey) {
          if (value[valueKey] === true) {
            itemRoleGroupInterfaceUri.push(valueKey);
            hasValue = true;
          }
        });
        displayValue = itemRoleGroupInterfaceUri;
        if (itemRoleGroupInterfaceUri.length === 0) itemRoleGroupInterfaceUri = undefined;

        if (((_itemRoleGroupInterfa = itemRoleGroupInterfaceUri) === null || _itemRoleGroupInterfa === void 0 ? void 0 : _itemRoleGroupInterfa.length) === props.roleList.length && !props.roleList.some(function (roleListRole) {
          return !itemRoleGroupInterfaceUri.some(function (itemRoleListRole) {
            return roleListRole === itemRoleListRole;
          });
        })) {
          // if item has the exact same roles as is roleList (props.componentProps.roleGroupInterfaceUri)
          itemRoleGroupInterfaceUri = undefined;
        }

        itemData.props = {
          roleGroupInterfaceUri: itemRoleGroupInterfaceUri
        };
      }

      return itemData;
    });
    _custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["cache"].itemRoleCache = _objectSpread(_objectSpread({}, _custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["cache"].itemRoleCache), {}, _defineProperty({}, props.editedItem.id, displayValue));
    props.onChangeItems(newItems, {
      roleGroupInterfaceUri: !hasValue
    });
  }

  function getValue() {
    var _itemRoles;

    var itemRoles = props.itemRoleList;

    if (props.displayValue) {
      itemRoles = props.displayValue;
    } else if (!props.editedItem.isNew && !((_itemRoles = itemRoles) !== null && _itemRoles !== void 0 && _itemRoles.length)) {
      itemRoles = _custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["cache"].initialRoleList;
    }

    var parsedItemRoles = Array.isArray(itemRoles) ? itemRoles.map(function (role) {
      return uu_plus4u5g01__WEBPACK_IMPORTED_MODULE_2__["Common"].Url.parse(role);
    }) : undefined;
    return props.roleList.map(function (role) {
      var parsedRole = uu_plus4u5g01__WEBPACK_IMPORTED_MODULE_2__["Common"].Url.parse(role);
      var shownValue = parsedRole.parameters.code || parsedRole.parameters.id;
      var matchingParsedRole;

      if (parsedItemRoles) {
        var _iterator = _createForOfIteratorHelper(parsedItemRoles),
            _step;

        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var parsedItemRole = _step.value;

            if (parsedItemRole.parameters.id && parsedItemRole.parameters.id === parsedRole.parameters.id) {
              matchingParsedRole = parsedRole;
              break;
            } else if (parsedItemRole.parameters.code && parsedItemRole.parameters.code === parsedRole.parameters.code) {
              matchingParsedRole = parsedRole;
              break;
            }
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
      }

      return {
        name: role,
        label: shownValue,
        value: !!matchingParsedRole
      };
    });
  }

  if (!props.editedItem.props.authorized) {
    return null;
  } else if (!props.roleList || props.roleList.length === 0) {
    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["InfoMessage"], {
      message: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Lsi, {
        lsi: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].roleGroupAuthorized.rolesNoUrisMessage
      })
    });
  } else {
    var feedback;
    var message;

    if (props.errors && props.errors.roleGroupInterfaceUri) {
      feedback = "error";
      message = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Lsi, {
        lsi: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].roleGroupAuthorized.rolesError
      });
    }

    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Forms.Checkboxes, {
      value: getValue(),
      onChange: onChange,
      label: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Lsi, {
        lsi: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].roleGroupAuthorized.rolesLabel
      }),
      required: true,
      feedback: feedback,
      message: message
    });
  }
};
var editablePropsSetup = [{
  name: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Lsi, {
    lsi: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].common.componentPropsLabel
  }),
  setup: [function (props) {
    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["RoleGroupInterfaceUriEditComponent"], _extends({}, props, {
      validate: true
    }));
  }, {
    name: "firstMatch",
    type: "switchSelector",
    label: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].authorized.firstMatchLabel,
    getProps: function getProps() {
      return {
        items: [{
          value: true,
          content: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Lsi, {
            lsi: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].authorized.firstMatchValueTrue
          })
        }, {
          value: false,
          content: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Lsi, {
            lsi: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].authorized.firstMatchValueFalse
          })
        }]
      };
    }
  }, function () {
    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["InfoMessage"], {
      message: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Bricks.Lsi, {
        lsi: _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].authorized.firstMatchMessage
      })
    });
  }]
}];
var editableItemPropsSetup = {
  setup: ItemEditation
};
var newEditableItem = {
  tagName: "Plus4U5.App.RoleGroupAuthorized.Item",
  isElement: true,
  isNew: true,
  props: {
    contentEditable: true,
    notAuthorized: true
  }
};
var RoleGroupAuthorizedEditable = uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.VisualComponent.create({
  //@@viewOn:mixins
  mixins: [uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.BaseMixin],
  //@@viewOff:mixins
  //@@viewOn:statics
  statics: {
    tagName: "Plus4U5.App.RoleGroupAuthorizedEditable",
    classNames: {
      main: "plu4u5-app-role-group-authorized-editable"
    },
    lsi: function lsi() {
      return _objectSpread(_objectSpread(_objectSpread({}, _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].common), _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].authorized), _editable_lsi_js__WEBPACK_IMPORTED_MODULE_5__["default"].roleGroupAuthorized);
    }
  },
  //@@viewOff:statics
  //@@viewOn:propTypes
  propTypes: {
    component: uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.PropTypes.object.isRequired
  },
  //@@viewOff:propTypes
  //@@viewOn:getDefaultProps
  getDefaultProps: function getDefaultProps() {
    return {
      component: null
    };
  },
  //@@viewOff:getDefaultProps
  //@@viewOn:reactLifeCycle
  getInitialState: function getInitialState() {
    return {
      editationModalOpen: false
    };
  },
  //@@viewOff:reactLifeCycle
  //@@viewOn:interface
  getPropsToSave: function getPropsToSave() {
    return {};
  },
  //@@viewOff:interface
  //@@viewOn:overriding
  //@@viewOff:overriding
  //@@viewOn:private
  _onSettingsClick: function _onSettingsClick() {
    //EditationModal will use the content/children value of the component, but it's children can be already in edit mode, so their actual values can be lost, so endChildrenEditation and make sure that data are correct.
    this.props.component.endChildrenEditation();
    this.setState(function (state) {
      return {
        editationModalOpen: !state.editationModalOpen
      };
    });
  },
  _onCloseEditationModal: function _onCloseEditationModal(newProps) {
    var _this = this;

    if (newProps) {
      if ("roleGroupInterfaceUri" in newProps) {
        newProps.roleGroupInterfaceUri = Object(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["getRoleGroupInterfaceUriValue"])(newProps.roleGroupInterfaceUri);
      }

      this.setState({
        editationModalOpen: false
      }, function () {
        _this.props.component.saveEditation(newProps);
      });
    } else {
      this.setState({
        editationModalOpen: false
      });
    }
  },
  _getToolbarItemLabel: function _getToolbarItemLabel(item) {
    return getItemLabel(item, true);
  },
  _renderMoreSettingsModal: function _renderMoreSettingsModal() {
    var componentProps = this.props.component.getEditablePropsValues(Object.keys(this.props.component.props)); // remove roleUri as it's deprecated

    componentProps.roleGroupInterfaceUri = componentProps.roleGroupInterfaceUri || componentProps.roleUri;
    delete componentProps.roleUri;
    componentProps = _objectSpread(_objectSpread({}, componentProps), {}, {
      roleGroupInterfaceUri: {
        tempValue: "",
        value: Object(_authorization_helpers__WEBPACK_IMPORTED_MODULE_4__["stringListToArray"])(componentProps.roleGroupInterfaceUri)
      }
    });
    _custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["cache"].initialRoleList = componentProps.roleGroupInterfaceUri.value;
    return this.state.editationModalOpen ? uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Suspense, {
      fallback: ""
    }, uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.BricksEditable.Modal, {
      shown: true,
      componentName: this.props.component.getTagName(),
      componentProps: componentProps,
      componentPropsForm: editablePropsSetup,
      header: this.getLsiComponent("modalHeader"),
      onClose: this._onCloseEditationModal,
      itemName: uu_plus4u5g01__WEBPACK_IMPORTED_MODULE_2__["App"].RoleGroupAuthorized.Item.tagName,
      itemDefaultProps: uu_plus4u5g01__WEBPACK_IMPORTED_MODULE_2__["App"].RoleGroupAuthorized.Item.defaultProps,
      itemPropsForm: editableItemPropsSetup,
      newItem: newEditableItem,
      itemsSource: "children",
      getItemLabel: getItemLabel
    })) : null;
  },
  //@@viewOff:private
  //@@viewOn:render
  render: function render() {
    return uu5g04__WEBPACK_IMPORTED_MODULE_0___default.a.Common.Element.create(_custom_editation_components__WEBPACK_IMPORTED_MODULE_3__["AuthorizedInlineEditation"], _extends({}, this.getMainPropsToPass(), {
      component: this.props.component,
      getModal: this._renderMoreSettingsModal,
      onMoreSettingsClick: this._onSettingsClick,
      getItemLabel: this._getToolbarItemLabel
    }));
  } //@@viewOff:render

});
/* harmony default export */ __webpack_exports__["default"] = (RoleGroupAuthorizedEditable);

/***/ })

}]);