!function(t,e){
"object"==typeof exports&&"object"==typeof module?module.exports=e(require("uu_appg01_core-utils"),require("uu_appg01_core-logging"),require("module"),require("uu_appg01_core-perflog")):"function"==typeof define&&define.amd?define("uu_appg01_core-appclient",["uu_appg01_core-utils","uu_appg01_core-logging","module","uu_appg01_core-perflog"],e):"object"==typeof exports?exports["uu_appg01_core-appclient"]=e(require("uu_appg01_core-utils"),require("uu_appg01_core-logging"),require("module"),require("uu_appg01_core-perflog")):(t.UuApp=t.UuApp||{},
t.UuApp.AppClient=e(t["UuApp.Utils"],t["UuApp.Logging"],t[void 0],t["UuApp.Perflog"]))}(window,(function(t,e,r,n){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,
l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){
"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),
8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),
2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t}
;return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=13)}([function(e,r){e.exports=t},function(t,r){t.exports=e},function(t,e,r){"use strict"
;function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,
n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=r(18),a=function(){function t(){!function(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,a;return e=t,a=[{key:"keysToLowerCase",value:function(t){if(!t||"object"!==n(t))return null;var e={}
;for(var r in t)e[r.toLowerCase()]=t[r];return e}},{key:"interceptorMakeResponse",value:function(t,e,r){var n=i(t,e,r);return"undefined"==typeof window?new Proxy(n,{get:function(t,e){var r
;if("unwrap"===e)r=function(){return{status:t.status,headers:t.headers,body:t.data}};else if("status"===e||"headers"===e)r=t[e];else if("data"===e){var n=t.data
;r=null==n?n:n.hasOwnProperty("data")?new Proxy(n,{get:function(t,e){var r=t.data;if("toJSON"==e)return function(){return t};if(null==r)return t[e];var n=r[e]
;return void 0===n?t[e]:("function"==typeof n&&(n=n.bind(r)),n)}}):n}else if("toJSON"==e)r=function(){return t.data};else{var o=t.data
;void 0!==o&&null!=o&&void 0!==o[e]?"function"==typeof(r=o[e])&&(r=r.bind(o)):r=t[e]}return r},ownKeys:function(t){var e=t.data;return null==e?null:Object.keys(e)},
getOwnPropertyDescriptor:function(t,e){var r=t.data;if(null==r)return null;var n=Object.getOwnPropertyDescriptor(r,e);return n&&(n.configurable=!0),n},has:function(t,e){var r=t.data
;return null!=r&&e in r}}):n}},{key:"isObject",value:function(t){return t&&"object"===n(t)&&!Array.isArray(t)}},{key:"mergeOptions",value:function(e,r){
return t.isObject(r)?(Object.keys(r).forEach((function(n){t.isObject(r[n])?e[n]=n in e?t.mergeOptions(e[n],r[n]):r[n]:e[n]=r[n]})),e):e}}],(r=null)&&o(e.prototype,r),a&&o(e,a),t}();t.exports=a
},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){
if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name)
;if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r)
;var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}
throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){
r=t[Symbol.iterator]()},n:function(){var t=r.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw a}}}}function i(t,e){
(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){
return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1
;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){
var r,n=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,e){
return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){
return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=r(0),p=l.BaseError,y=l.Json,h=function(t){!function(t,e){
if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}
}),e&&u(t,e)}(r,t);var e=c(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(a(this,r),
"string"==typeof n)(t=e.call(this,n)).paramMap={},t.dtoOut={};else if(n.uuAppErrorMap){var u=Object.keys(n.uuAppErrorMap);if(0===u.length)(t=e.call(this,y.stringify(n))).paramMap={},t.dtoOut={};else{
var c,f=o(u);try{for(f.s();!(c=f.n()).done;){var l=c.value,p=n.uuAppErrorMap[l];if("error"===p.type){(t=e.call(this,p.message)).code=l,p.id&&(t.id=p.id),t.paramMap=p.paramMap;break}}}catch(t){f.e(t)
}finally{f.f()}t.dtoOut=n}}else(t=e.call(this,y.stringify(n))).paramMap={},t.dtoOut={};return i&&(t.response=i,t.status=i.status),s(t)}return r}(p);t.exports=h},function(t,e,r){"use strict"
;function n(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function o(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,
"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=r(20).Perflog,u=function(){function t(e){o(this,t),this._next=e}var e,r,u,c,s;return e=t,(r=[{key:"invoke",
value:(c=regeneratorRuntime.mark((function t(e){var r,n,o,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:null,
n=this._next,a.measureSection("UU_APP_CLIENT_REQUEST",(function(t){e.headers["x-request-id"]=t.getId().toString();var i=e.uri.toString().replace(/access_token=[^&]+/,"access_token=hidden")
;t.setAttribute("uri",i),o=n.invoke(e,r)})),t.abrupt("return",o);case 4:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=c.apply(t,e)
;function a(t){n(i,r,o,a,u,"next",t)}function u(t){n(i,r,o,a,u,"throw",t)}a(void 0)}))},function(t){return s.apply(this,arguments)})}])&&i(e.prototype,r),u&&i(e,u),t}();t.exports=u},function(t,e,r){
"use strict";function n(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function o(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,
"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=r(6),u=r(7),c=function(){function t(e){o(this,t),this._next=e}var e,r,c,s,f;return e=t,(r=[{key:"invoke",
value:(s=regeneratorRuntime.mark((function t(e){var r,n,o,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:null,
t.next=3,this._next.invoke(e,r);case 3:if(!((n=t.sent).status>=400)){t.next=11;break}if(o=n.data||{},!(n.status<500)){t.next=10;break}throw new a(o,n);case 10:throw new u(o,n);case 11:
return t.abrupt("return",n);case 12:case"end":return t.stop()}}),t,this)})),f=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=s.apply(t,e);function a(t){n(i,r,o,a,u,"next",t)
}function u(t){n(i,r,o,a,u,"throw",t)}a(void 0)}))},function(t){return f.apply(this,arguments)})}])&&i(e.prototype,r),c&&i(e,c),t}();t.exports=c},function(t,e,r){"use strict";function n(t){
return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}
function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1
;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){
var r,n=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,e){
return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){
return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=function(t){!function(t,e){
if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}
}),e&&i(t,e)}(r,t);var e=a(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o(this,r),
(t=e.call(this,n,i)).status||(t.status=400),t}return r}(r(3));t.exports=s},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){
return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){
var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=c(t);if(e){var o=c(this).constructor
;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){
if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){
return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function")
;t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(r,t);var e=a(r);function r(){
var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o(this,r),(t=e.call(this,n,i)).status||(t.status=500),t}
return r}(r(3));t.exports=s},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}
u.done?e(c):Promise.resolve(c).then(n,o)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r]
;n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=r(21),c=r(0),s=c.Config,f=c.OptsReader,l=c.BaseError,p=c.Json,y=function(){
function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,t),this._next=e,this._options=r}var e,r,c,y,h;return e=t,(r=[{key:"invoke",
value:(y=regeneratorRuntime.mark((function t(e){var r,o,i,a,c,y,h,d,m,v,b,g=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
if(r=g.length>1&&void 0!==g[1]?g[1]:null,o=new f(r,this._options,s),i=e.method.match(/^(put|post)$/i),a=u.contentTransformers||{},c=i?e.headers["content-type"]:null,
"content-type"in e.headers||(i?(y=null!=e.body&&(e.body instanceof FormData||e.body instanceof Blob||"object"==n(e.body)&&Object.keys(e.body).some((function(t){return e.body[t]instanceof Blob}))),
c=y?"multipart/form-data":"application/json; charset=utf-8",e.headers["content-type"]=c):c="application/x-www-form-urlencoded"),"accept"in e.headers||(e.headers.accept="application/json"),
!1!==o.getBoolean("transformParameters")&&!i&&null!=e.body&&o.getBoolean("wrapQuery")&&"application/x-www-form-urlencoded"===c&&(e.body={dto:p.stringify(e.body)}),
!1===o.getBoolean("transformParameters")||null==e.body){t.next=17;break}h=a[this._getMimeMainType(c)],t.prev=10,h&&(e.body=h.serialize(e.body)),t.next=17;break;case 14:throw t.prev=14,
t.t0=t.catch(10),new l("Error while serializing data.",t.t0);case 17:return t.next=19,this._next.invoke(e,r);case 19:if(d=t.sent,m=d.headers("content-disposition"),
!1===o.getBoolean("transformResponse")||m){t.next=31;break}v=d.headers("content-type"),b=a[this._getMimeMainType(v)],t.prev=24,204===d.status?d.data=null:b&&(d.data=b.deserialize(d.data)),t.next=31
;break;case 28:throw t.prev=28,t.t1=t.catch(24),new l("Error while deserializing response data.",t.t1);case 31:return t.abrupt("return",d);case 32:case"end":return t.stop()}
}),t,this,[[10,14],[24,28]])})),h=function(){var t=this,e=arguments;return new Promise((function(r,n){var i=y.apply(t,e);function a(t){o(i,r,n,a,u,"next",t)}function u(t){o(i,r,n,a,u,"throw",t)}
a(void 0)}))},function(t){return h.apply(this,arguments)})},{key:"_getMimeMainType",value:function(t){return(t||"").replace(/[+;].*/,"").trim()}}])&&a(e.prototype,r),c&&a(e,c),t}();t.exports=y
},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(0).BaseError;function i(t,e,r,a){
if(a>5)throw new o("Nesting level too deep. Possible circular reference.");if(Array.isArray(e))e.forEach((function(e,n){return i("".concat(t,"[").concat(n,"]"),e,r,a+1)
}));else if(e instanceof Date)r.push({key:t,value:e.toISOString()});else if(e&&"object"===n(e))for(var u in e)i("".concat(t).concat(a?".":"").concat(u),e[u],r,a+1);else r.push({key:t,value:e})}
t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=[];return i(e,t,r,e?1:0),r}},function(t,e,r){"use strict";function n(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value
}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){
for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=r(0),u=a.Config,c=a.OptsReader,s=function(){
function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,t),this._next=e,this._options=r}var e,r,a,s,f;return e=t,(r=[{key:"invoke",
value:(s=regeneratorRuntime.mark((function t(e){var r,n,o,i,a,s,f=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
return r=f.length>1&&void 0!==f[1]?f[1]:null,n="",(o=(e.uri||"").toString()).match(/^https?:/i)?n+=o:(i=new c(r,this._options),
(a=i.getString("baseUri"))&&a.match(/^https?:/i)||(i=new c(r,this._options,u),s=i.getString("gatewayUri","https://uuappg01.plus4u.net"),n+="".concat(s.replace(/\/$/,""),"/")),
a&&(n+="".concat(a.replace(/^\/|\/$/g,""),"/")),n+=o.replace(/^\//,"")),e.uri=n,t.abrupt("return",this._next.invoke(e,r));case 6:case"end":return t.stop()}}),t,this)})),f=function(){
var t=this,e=arguments;return new Promise((function(r,o){var i=s.apply(t,e);function a(t){n(i,r,o,a,u,"next",t)}function u(t){n(i,r,o,a,u,"throw",t)}a(void 0)}))},function(t){
return f.apply(this,arguments)})}])&&i(e.prototype,r),a&&i(e,a),t}();t.exports=s},function(t,e,r){"use strict";function n(t){
return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){
if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);
}catch(t){o=!0,i=t}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(t,e)||i(t,e)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){
if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),
"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length)
;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){
var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){
return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=p(t);if(e){var o=p(this).constructor
;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){
if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){
return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function")
;t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(l,t);var e,r,n,a=f(l);function l(t){
var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return u(this,l),a.call(this,t,e)}return e=l,(r=[{key:"_containStream",value:function(){
var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t instanceof FormData?this._isStreamInFormData(t):!!this._isStream(t)}},{key:"_isStreamInFormData",value:function(t){
if(null==t||!(t instanceof FormData))return!1;var e=t.entries();if("function"!=typeof e[Symbol.iterator])return!1;var r,n=function(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){
if(Array.isArray(t)||(r=i(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}
}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){
r=t[Symbol.iterator]()},n:function(){var t=r.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw a}}}}(e);try{
for(n.s();!(r=n.n()).done;)if(o(r.value,2)[1]instanceof Blob)return!0}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"_isStream",value:function(t){return t instanceof Blob}}])&&c(e.prototype,r),
n&&c(e,n),l}(r(23));t.exports=y},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}
function i(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var o=u(this).constructor
;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){
if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){
return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function")
;t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(r,t);var e=i(r);function r(t,n){var o;return function(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(o=e.call(this,t||"Invalid parameters",n)).code="uu-app-core-appclient/InvalidParameters",o}return r
}(r(0).BaseError);t.exports=c},function(t,e,r){t.exports=r(14)},function(t,e,r){
var n=r(15),o="undefined"!=typeof document,i=((n?n.uri:o&&(document.currentScript||Array.prototype.slice.call(document.getElementsByTagName("script"),-1)[0]||{}).src)||"").toString()
;"/4.0.0/"===(i=i.split(/\//).slice(0,-1).join("/")+"/").substr(-"/4.0.0/".length)&&(i=i.substr(0,i.length-"/4.0.0/".length)+"/4.8.2/"),r.p=i,t.exports=r(16)},function(t,e){t.exports=r
},function(t,e,r){"use strict";t.exports={get AppClient(){return r(17)},get RemoteError(){return r(3)},get ApplicationError(){return r(6)},get SystemError(){return r(7)},get InvalidOptionsError(){
return r(12)},get PerflogHandler(){return r(4)},get RemoteErrorHandler(){return r(5)},get SessionHandler(){return r(24)},get TransformParametersHandler(){return r(8)},get UriHandler(){return r(10)},
get RetryHandler(){return r(11)}}},function(t,e,r){"use strict";function n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?Object(arguments[e]):{},n=Object.keys(r)
;"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),n.forEach((function(e){
o(t,e,r[e])}))}return t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value
}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function u(t){
i(a,n,o,u,c,"next",t)}function c(t){i(a,n,o,u,c,"throw",t)}u(void 0)}))}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){
for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r(0).BaseError
;var s=r(2),f=r(19),l=r(4),p=r(5),y=r(8),h=[l,r(10),p,r(11),y],d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,t),this._options={retryPolicy:{
maxAttempts:3,maxTimeInterval:3e4,baseTimeInterval:100,retryCondition:{httpMethods:["GET","POST"],httpStatusCodes:["502","503"]}}},s.mergeOptions(this._options,e),
this._options.headers=s.keysToLowerCase(this._options.headers),this._aborted=!1}var e,r,o,i,l,p,y,d;return e=t,r=[{key:"get",value:(d=a(regeneratorRuntime.mark((function t(e,r,n){
return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._invoke("get",e,r,n));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e,r){
return d.apply(this,arguments)})},{key:"post",value:(y=a(regeneratorRuntime.mark((function t(e,r,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
return t.abrupt("return",this._invoke("post",e,r,n));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return y.apply(this,arguments)})},{key:"_invoke",
value:(p=a(regeneratorRuntime.mark((function t(e,r,o,i){var a,u,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={method:(e||"post").toLowerCase(),uri:r,
body:o,headers:n({},this._options.headers,s.keysToLowerCase((i||{}).headers))
},u=((i||{}).interceptors||(this._options||{}).interceptors||this.constructor.getDefaultInterceptors()||[]).reduceRight((function(t,e){return new e(t,c._options)}),new f(this._options)),
t.abrupt("return",u.invoke(a,i));case 3:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n){return p.apply(this,arguments)})}],o=[{key:"get",value:(l=a(regeneratorRuntime.mark((function e(r){
var n,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:null,o=i.length>2&&void 0!==i[2]?i[2]:null,
e.abrupt("return",(new t).get(r,n,o));case 3:case"end":return e.stop()}}),e)}))),function(t){return l.apply(this,arguments)})},{key:"post",value:(i=a(regeneratorRuntime.mark((function e(r){
var n,o,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:null,o=i.length>2&&void 0!==i[2]?i[2]:null,
e.abrupt("return",(new t).post(r,n,o));case 3:case"end":return e.stop()}}),e)}))),function(t){return i.apply(this,arguments)})},{key:"getDefaultInterceptors",value:function(){return h}}],
r&&c(e.prototype,r),o&&c(e,o),t}();t.exports=d},function(t,e){function r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}
t.exports=function(t,e){var n={status:t?t.status:0,headers:function(e){return e?t?t.getResponseHeader(e):null:t?t.getAllResponseHeaders():[]},data:null!=t.body?t.body:t}
;return t.filename&&(n.filename=t.filename),t.contentType&&(n.contentType=t.contentType),t.encoding&&(n.encoding=t.encoding),e?function(t){for(var e=1;e<arguments.length;e++){
var n=null!=arguments[e]?Object(arguments[e]):{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(t){
return Object.getOwnPropertyDescriptor(n,t).enumerable})))),o.forEach((function(e){r(t,e,n[e])}))}return t}({},n,e):n}},function(t,e,r){"use strict";function n(t,e,r,n,o,i,a){try{
var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}
function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}
var a=r(1).LoggerFactory,u=r(0),c=u.Config,s=u.OptsReader,f=u.BaseError,l=u.Json,p=r(2),y=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o(this,t),
this._options=e,this._logger=a.get("UuApp.AppClient.Client")}var e,r,u,y,h;return e=t,(r=[{key:"invoke",value:(y=regeneratorRuntime.mark((function t(e){var r,n,o,i=this,a=arguments
;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:null,n=new s(r,this._options,c),o=e.xhr=new XMLHttpRequest,
t.abrupt("return",new Promise((function(t,r){var a,u=e.method.match(/^(put|post)$/i),c=e.uri.toString();u?a=e.body:e.body&&(c+=(-1===c.indexOf("?")?"?":"&")+e.body)
;var s=e.headers,y=n.getNumber("requestTimeout",300);for(var h in i._logger.isDebugLoggable()&&i._logger.debug("Invoking Ajax request: "+l.stringify({method:e.method,url:c,body:a,requestTimeout:y,
headers:s})),o.open(e.method,c,!0),y>0&&(o.timeout=1e3*y),o.withCredentials=!0,s){var d=s[h];if(h&&null!=d){if("content-type"===h&&a instanceof FormData&&"multipart/form-data"===d)continue
;o.setRequestHeader(h.replace(/(^|-)./g,(function(t){return t.toUpperCase()})),d+"")}}o.ontimeout=function(t){i._logger.error("Request timed out: "+l.stringify({url:c}),t),
r(p.interceptorMakeResponse(o,{error:new f("Request timed out - "+c,t)}))},o.onload=function(e){var r=i._formatResponse(o)
;i._logger.isDebugLoggable()&&i._logger.debug("Received response: "+l.stringify({url:c,status:o.status,data:r.response})),t(p.interceptorMakeResponse(r))},o.onabort=function(t){
i._logger.warn("Request has been aborted: "+l.stringify({url:c}),t),r(p.interceptorMakeResponse(o,{error:new f("Request has been aborted - "+c,t)}))},o.onerror=function(t){
var e=!1===n.getBoolean("transformResponse")?new Uint8Array(o.response):o.response;i._logger.error("Request ended with network error: "+l.stringify({url:c}),t),r(p.interceptorMakeResponse(o,{
error:new f("Network error - "+c,t),data:e}))},o.onreadystatechange=function(){2===o.readyState&&(!0===n.getBoolean("transformResponse",!0)?i._autodetectBinaryData(o):o.responseType="arraybuffer")},
o.send(a)})));case 4:case"end":return t.stop()}}),t,this)})),h=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=y.apply(t,e);function a(t){n(i,r,o,a,u,"next",t)}function u(t){
n(i,r,o,a,u,"throw",t)}a(void 0)}))},function(t){return h.apply(this,arguments)})},{key:"_formatResponse",value:function(t){
return"arraybuffer"===t.responseType?t.body=new Uint8Array(t.response):t.body=t.response,t}},{key:"_autodetectBinaryData",value:function(t){var e;try{e=t.getResponseHeader("Content-Disposition")
}catch(t){}if(e){t.responseType="arraybuffer",t.filename=function(t){
for(var e,r=/filename[^;=\n]*=(?:(\\?['"])(.*?)\1|(?:[^\s]+'.*?')?([^;\n]*))/g,n=[];null!=(e=r.exec(t));)n=n.concat(e.slice(1).filter((function(t){return t})));var o=n[n.length-1]
;return o?decodeURIComponent(o):null}(e);var r=t.getResponseHeader("Content-Type");if(r){var n=r.trim().match(/^([^;\s]+)(?:\s*;\s*charset\s*=\s*([^;]+))?/i)||[];t.contentType=n[1]||null,
t.encoding=n[2]||null}}}}])&&i(e.prototype,r),u&&i(e,u),t}();t.exports=y},function(t,e){t.exports=n},function(t,e,r){"use strict";function n(t){
return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,
n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i,a=r(0).Json,u=r(1).LoggerFactory,c=r(22),s=r(9),f=function(){function t(){!function(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,f;return e=t,f=[{key:"contentTransformers",get:function(){return Object.freeze({
"application/json":t.Json,"application/x-www-form-urlencoded":t.Form,"multipart/form-data":t.MultiPart})}},{key:"Json",get:function(){return{serialize:function(t){return a.stringify(t)},
deserialize:function(t){return t?a.parse(t):null}}}},{key:"Form",get:function(){return{serialize:function(e){
return null==e?e:"object"!==n(e)?(t._getLogger().warn("Unrecognized value when serializing as application/x-www-form-urlencoded - passing as-is. Value:",{value:e}),e):s(e).map((function(t){
var e=t.key,r=t.value;return null==r?"":"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(r))})).join("&")},deserialize:function(e){if(null==e)return e
;if("string"!=typeof e)return t._getLogger.warn("Unrecognized value when deserializing as application/x-www-form-urlencoded - passing as-is. Value:",{value:e}),e
;for(var r=e.replace(/\+/g," ").split("&"),n={},o=0;o<r.length;++o)r[o].replace(/^([^=]*)=?(.*)$/,(function(t,e,r){var o=decodeURIComponent(e),i=decodeURIComponent(r)
;n.hasOwnProperty(o)?(Array.isArray(n[o])||(n[o]=[n[o]]),n[o].push(i)):n[o]=i}));return n}}}},{key:"MultiPart",get:function(){return c}},{key:"_getLogger",value:function(){
return i||(i=u.get("UuApp.AppClient.Client")),i}},{key:"_stringify",value:function(e,r,o,i){if(Array.isArray(r))r.forEach((function(r,n){return t._stringify("".concat(e,"[").concat(n,"]"),r,o,!1)
}));else if(r&&"object"===n(r))for(var a in r)t._stringify("".concat(e).concat(i?"":".").concat(a),r[a],o,!1);else o.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}}],
(r=null)&&o(e.prototype,r),f&&o(e,f),t}();t.exports=f},function(t,e,r){"use strict";function n(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){
if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name)
;if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r)
;var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}
throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){
r=t[Symbol.iterator]()},n:function(){var t=r.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw a}}}}function o(t,e){
(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t
}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a,u=r(0).BaseError,c=r(1).LoggerFactory,s=r(9),f={serialize:function(t){
if(!t)return t;if("object"!==i(t))return this._getLogger().warn("Unrecognized value when serializing as multipart/form-data - passing as-is. Value:",{value:t}),t
;if(t instanceof FormData&&"function"!=typeof t.entries)return t;t instanceof Blob&&(t={file:t});var e={};if(t instanceof FormData){var r,o=n(t.entries());try{for(o.s();!(r=o.n()).done;){var a=r.value
;e[a[0]]=a[1]}}catch(t){o.e(t)}finally{o.f()}}else e=t;var c,f=[];for(var l in e){var p=e[l]
;if(p instanceof Blob)c&&this._getLogger().warn("Too many binary fields. Only single binary field per multipart request is supported."),c=!0;else if("object"===i(p))try{f=f.concat(s(p,l));continue
}catch(t){throw new u("Serialization of key: ".concat(l," into FormData failed.")+"Try serializing the nested object beforehand.",t)}f.push({key:l,value:p})}var y=f.length,h=0;f.sort((function(t,e){
var r=(t.value instanceof Blob?h+y:h)-(e.value instanceof Blob?h+y:h);return h++,r}));var d=new FormData;return f.forEach((function(t){
t.value instanceof Blob?d.append(t.key,t.value,t.value.name||"".concat(Date.now(),".bin")):d.append(t.key,t.value)})),d},deserialize:function(t){
throw new u("Deserializing multipart/form-data is not supported. Value: "+t)},_getLogger:function(){return a||(a=c.get("UuApp.AppClient.Client")),a}};t.exports=f},function(t,e,r){"use strict"
;function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){
if(Array.isArray(t)||(r=a(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}
}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,c=!1;return{s:function(){
r=t[Symbol.iterator]()},n:function(){var t=r.next();return u=t.done,t},e:function(t){c=!0,i=t},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw i}}}}function i(t,e){
return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,i=void 0;try{
for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r
}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
function a(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),
"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length)
;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function s(t){
return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){c(i,n,o,a,u,"next",t)}function u(t){c(i,n,o,a,u,"throw",t)}a(void 0)}))}}function f(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,
"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var p=r(2),y=r(12),h=r(1).LoggerFactory,d=r(0).Json,m=function(){function t(e){
var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;f(this,t),this._next=e,this._validateOptions(r),this._options=r.retryPolicy,this._attempt=0,this._originalRequestId=null,
this._logger=h.get("UuApp.AppClient.Interceptor.RetryHandler")}var e,r,a,u,c,m;return e=t,(r=[{key:"invoke",value:(m=s(regeneratorRuntime.mark((function t(e){var r,n,o=arguments
;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:null,t.next=3,this._next.invoke(e,r);case 3:if(n=t.sent,
null!=r&&(this._options=p.mergeOptions(this._options,r.retryPolicy)),this._originalRequestId=e.headers["x-request-id"],this._shouldRetry(e,n,this._options)){t.next=8;break}return t.abrupt("return",n)
;case 8:if(!e.headers["content-type"]||!e.headers["content-type"].startsWith("multipart/form-data")&&!e.headers["content-type"].startsWith("application/octet-stream")||!this._containStream(e.body)){
t.next=11;break}return this._logger.debug("Request failed and wont be repeated as it contains binary stream. requestId=".concat(this._originalRequestId)),t.abrupt("return",n);case 11:return t.next=13,
this._processRetryPolicy(e,n,r);case 13:return n=t.sent,t.abrupt("return",n);case 15:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)})},{key:"_processRetryPolicy",
value:(c=s(regeneratorRuntime.mark((function t(e,r,n){var o,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=!1,this._attempt++,
this._shouldRetry(e,r,this._options)){t.next=4;break}return t.abrupt("return",r);case 4:if(503===r.status&&(i=this._parseHeaders(r.headers())["retry-after"])&&(o=this._getRetryAfterFromHeader(i)),
!(o&&o>this._options.maxTimeInterval)){t.next=8;break}
return this._logger.debug("Request wont be repeated. Response retry-after header is after max time interval. requestId=".concat(this._originalRequestId,", retryAfter=").concat(o,", maxTimeInterval=").concat(this._options.maxTimeInterval)),
t.abrupt("return",r);case 8:return e.headers["x-request-id"]="".concat(this._originalRequestId,"-").concat(this._attempt.toString().padStart(3,"0")),
o||(a=this._getRandomIntInclusive(0,Math.min(this._options.maxTimeInterval,this._options.baseTimeInterval*Math.pow(2,this._attempt)))),
this._logger.error("Request failed. Retry conditions valid, retrying the request in ".concat(a,"ms. originalRequestId=").concat(this._originalRequestId,", originalResponseStatus=").concat(r.status,", originalResponseData=").concat(r.data,", attempt=").concat(this._attempt,", retryPolicy=").concat(d.stringify(this._options))),
t.next=13,this._timeout(a);case 13:return t.next=15,this._next.invoke(e,n);case 15:return r=t.sent,t.next=18,this._processRetryPolicy(e,r,n);case 18:return t.abrupt("return",t.sent);case 19:case"end":
return t.stop()}}),t,this)}))),function(t,e,r){return c.apply(this,arguments)})},{key:"_timeout",value:(u=s(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){
for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){return setTimeout(t,e)})));case 1:case"end":return t.stop()}}),t)}))),function(t){return u.apply(this,arguments)})
},{key:"_parseHeaders",value:function(t){var e={};return t.split("\n").forEach((function(t){var r=i(t.split(/\s*:\s/),2),n=r[0],o=r[1];e[n]=o})),e}},{key:"_getRetryAfterFromHeader",value:function(t){
if(!t)return!1;if(!isNaN(t))return 1e3*parseInt(t);var e=Date.parse(t);if(isNaN(e))return!1;var r=e-Date.now();return!(r<=0)&&r}},{key:"_getRandomIntInclusive",value:function(t,e){
return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}},{key:"_shouldRetry",value:function(t,e,r){
return!(r.maxAttempts<1||(this._attempt>this._options.maxAttempts?(this._logger.debug("Request wont be repeated. Max attempts exceeded. requestId=".concat(this._originalRequestId,", requestAttempt=").concat(this._attempt,", maxAttempts=").concat(this._options.maxAttempts)),
1):this._checkHttpMethod(this._options.retryCondition.httpMethods,t.method)?(!this._options.retryCondition.httpStatusCodes||!this._checkStatusCode(this._options.retryCondition.httpStatusCodes,e.status.toString()))&&(this._logger.debug("Request wont be repeated. Http status condition invalid. requestId=".concat(this._originalRequestId,", responseHttpStatus=").concat(e.status.toString(),", retryHttpStatus=").concat(this._options.retryCondition.httpStatusCodes)),
1):(this._logger.debug("Request wont be repeated. Http method condition invalid. requestId=".concat(this._originalRequestId,", requestHttpMethod=").concat(t.method,", retryHttpMethods=").concat(this._options.retryCondition.httpMethods)),
1)))}},{key:"_checkHttpMethod",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;if(t.length<1)return!1;var r=e.toUpperCase()
;return!!t.includes(r)}},{key:"_checkStatusCode",value:function(){
var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,r=new RegExp("[0-9]([0-9]|x){2}"),n=new RegExp("x","g");if(t.length<1)return!1;if(!e)return!1
;if("string"!=typeof e||!e.match(r))return!1;var i,a=o(t);try{for(a.s();!(i=a.n()).done;){var u=i.value,c=new RegExp(u.replace(n,"[0-9]"));if(e.match(c))return!0}}catch(t){a.e(t)}finally{a.f()}
return!1}},{key:"_containStream",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!this._isStream(t)}},{key:"_isStream",value:function(t){return!1}},{
key:"_validateOptions",value:function(t){if(!t)throw new y("Options are required in RetryHandler");if("object"!==n(t))throw new y("Options must be object")
;if(!t.retryPolicy)throw new y("Options.retryPolicy is required");if("object"!==n(t.retryPolicy))throw new y("Options.retryPolicy must be object")
;if(!t.retryPolicy.maxTimeInterval)throw new y("Options.retryPolicy.maxTimeInterval is required")
;if("number"!=typeof t.retryPolicy.maxTimeInterval||t.retryPolicy.maxTimeInterval<0)throw new y("Options.retryPolicy.maxTimeInterval must be positive integer")
;if(!t.retryPolicy.baseTimeInterval)throw new y("Options.retryPolicy.baseTimeInterval is required")
;if("number"!=typeof t.retryPolicy.baseTimeInterval||t.retryPolicy.baseTimeInterval<0)throw new y("Options.retryPolicy.baseTimeInterval must be positive integer")
;if(null==t.retryPolicy.maxAttempts)throw new y("Options.retryPolicy.maxAttempts is required")
;if("number"!=typeof t.retryPolicy.maxAttempts||t.retryPolicy.maxAttempts<0)throw new y("Options.retryPolicy.maxAttempts must be positive integer")
;if(!t.retryPolicy.retryCondition)throw new y("Options.retryPolicy.retryCondition is required")
;if("object"!==n(t.retryPolicy.retryCondition))throw new y("Options.retryPolicy.retryCondition must be object")
;if(!t.retryPolicy.retryCondition.httpMethods)throw new y("Options.retryPolicy.retryCondition.httpMethods is required")
;if(!(t.retryPolicy.retryCondition.httpMethods instanceof Array))throw new y("Options.retryPolicy.retryCondition.httpMethods must be array")
;if(t.retryPolicy.retryCondition.httpMethods.forEach((function(t){var e=["GET","POST","HEAD","PUT","DELETE","CONNECT","OPTIONS","TRACE","PATCH"]
;if(!e.includes(t))throw new y("Incorect httpMethod - ".concat(t," in retryCondition.httpMethods list. Should be one of ").concat(d.stringify(e)))})),
!t.retryPolicy.retryCondition.httpStatusCodes)throw new y("Options.retryPolicy.retryCondition.httpStatusCodes is required")
;if(!(t.retryPolicy.retryCondition.httpStatusCodes instanceof Array))throw new y("Options.retryPolicy.retryCondition.httpStatusCodes must be array")
;return t.retryPolicy.retryCondition.httpStatusCodes.forEach((function(t){var e=new RegExp("[0-9]([0-9]|x){2}")
;if("string"!=typeof t)throw new y("HttpStatusCode in retryCondition.httpStatusCodes list must be string")
;if(!t.match(e))throw new y("HttpStatusCode in retryCondition.httpStatusCodes must meet regex pattern ".concat("[0-9]([0-9]|x){2}"))})),!0}}])&&l(e.prototype,r),a&&l(e,a),t}();t.exports=m
},function(t,e,r){"use strict";function n(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function o(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,
"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,t),this._next=e,
this._options=r||{}}var e,r,a,u,c;return e=t,(r=[{key:"invoke",value:(u=regeneratorRuntime.mark((function t(e){var r,n,o,i,a,u=arguments;return regeneratorRuntime.wrap((function(t){
for(;;)switch(t.prev=t.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:null,!("authorization"in e.headers)){t.next=4;break}return t.abrupt("return",this._next.invoke(e,r));case 4:
if(n=Object.assign(this._options,r),!(o=n.session)){t.next=19;break}if(i=null,"function"!=typeof o.getCallTokenScope){t.next=14;break}return t.next=11,o.getCallTokenScope(e.uri,n);case 11:i=t.sent,
t.next=15;break;case 14:i=e.uri.toString().split("?")[0];case 15:return t.next=17,o.getCallToken(i,n);case 17:(a=t.sent)&&(e.headers.authorization=a);case 19:
return t.abrupt("return",this._next.invoke(e,r));case 20:case"end":return t.stop()}}),t,this)})),c=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=u.apply(t,e);function a(t){
n(i,r,o,a,c,"next",t)}function c(t){n(i,r,o,a,c,"throw",t)}a(void 0)}))},function(t){return c.apply(this,arguments)})}])&&i(e.prototype,r),a&&i(e,a),t}();t.exports=a}])}));