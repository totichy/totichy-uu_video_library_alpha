/*!
 * Copyright (c) 2018 Unicorn a.s.
 * All rights reserved.
 */
module.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,
n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{
value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null)
;if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){
var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t){
e.exports=require("uu5g04")},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3]
;if(!i)return n;if(t&&"function"==typeof btoa){var r=(a=i,o=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),
"/*# ".concat(l," */")),s=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[n].concat(s).concat([r]).join("\n")}var a,o,l;return[n].join("\n")}(t,e)
;return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(i)for(var s=0;s<this.length;s++){var a=this[s][0]
;null!=a&&(r[a]=!0)}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);i&&r[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},function(e,t){function n(e){
var t=document.head||document.body;e.setAttribute("data-owner","uu_plus4u5filesg01/uu_plus4u5filesg01@4.5.1"),e.setAttribute("data-emotion","plusu-files"),e.setAttribute("data-tech","less")
;for(var n=t.querySelectorAll('style[data-emotion="plusu-files"]'),i=n.length-1;i>=0;i--){var r=n[i];if("less"===r.getAttribute("data-tech"))return void r.parentNode.insertBefore(e,r.nextSibling)}
for(var s=0;s<n.length;s++){var a=n[s];if("less"!==a.getAttribute("data-tech"))return void a.parentNode.insertBefore(e,a)}var o=document.querySelector("[data-uu-app-styles-insert-before]")
;o?o.parentNode.insertBefore(e,o):t.appendChild(e)}var i={appendChild:n,insertBefore:n,insertAfter:n};e.exports=function(){return i}},function(e,t,n){var i,r,s={},a=(i=function(){
return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=i.apply(this,arguments)),r}),o=function(e,t){return t?t.querySelector(e):document.querySelector(e)},l=function(e){
var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var i=o.call(this,e,n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{
i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}}(),u=null,p=0,c=[],d=n(13);function m(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=s[i.id];if(r){r.refs++
;for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(_(i.parts[a],t))}else{var o=[];for(a=0;a<i.parts.length;a++)o.push(_(i.parts[a],t));s[i.id]={id:i.id,
refs:1,parts:o}}}}function h(e,t){for(var n=[],i={},r=0;r<e.length;r++){var s=e[r],a=t.base?s[0]+t.base:s[0],o={css:s[1],media:s[2],sourceMap:s[3]};i[a]?i[a].parts.push(o):n.push(i[a]={id:a,parts:[o]
})}return n}function f(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.")
;var i=c[c.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),
c.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{
if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n")
;var r=l(e.insertAt.before,n);n.insertBefore(t,r)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function y(e){
var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var i=function(){0;return n.nc}();i&&(e.attrs.nonce=i)}return b(t,e.attrs),f(e,t),t}
function b(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function _(e,t){var n,i,r,s;if(t.transform&&e.css){
if(!(s="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=s}if(t.singleton){var a=p++;n=u||(u=y(t)),i=T.bind(null,n,a,!1),r=T.bind(null,n,a,!0)
}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){
var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",b(t,e.attrs),f(e,t),t}(t),i=S.bind(null,n,t),r=function(){g(n),
n.href&&URL.revokeObjectURL(n.href)}):(n=y(t),i=E.bind(null,n),r=function(){g(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}
e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment")
;(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=h(e,t)
;return m(n,t),function(e){for(var i=[],r=0;r<n.length;r++){var a=n[r];(o=s[a.id]).refs--,i.push(o)}e&&m(h(e,t),t);for(r=0;r<i.length;r++){var o;if(0===(o=i[r]).refs){
for(var l=0;l<o.parts.length;l++)o.parts[l]();delete s[o.id]}}}};var v,C=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function T(e,t,n,i){var r=n?"":i.css
;if(e.styleSheet)e.styleSheet.cssText=C(t,r);else{var s=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(s,a[t]):e.appendChild(s)}}function E(e,t){
var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}
function S(e,t,n){var i=n.css,r=n.sourceMap,s=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||s)&&(i=d(i)),
r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([i],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(a),
o&&URL.revokeObjectURL(o)}},function(e,t){e.exports=require("uu5g04-bricks")},function(e,t){e.exports=require("uu_appg01")},function(e,t){e.exports=require("uu5tilesg01")},function(e,t){
e.exports=require("uu5imagingg01")},function(e,t,n){var i=n(17);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!1,transform:void 0,insertInto:function(){return n(2)()}};n(3)(i,r)
;i.locals&&(e.exports=i.locals)},function(e,t,n){e.exports=n(10)},function(e,t,n){e.exports=n(37)},function(e,t,n){var i=n(12);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!1,transform:void 0,
insertInto:function(){return n(2)()}};n(3)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){
(t=n(1)(!1)).push([e.i,".plus4u5-files-file-manager-tile{position:relative}.plus4u5-files-file-manager-inner-tile{position:relative;border-radius:2px;border:1px solid #d6d6d6}.plus4u5-files-file-manager-selectable-only{cursor:pointer}.plus4u5-files-file-manager-tile .preview-field{min-height:127px;max-height:127px;height:127px;text-align:center;border-bottom:1px solid rgba(0,0,0,.12);display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center;width:100%}.plus4u5-files-file-manager-tile .preview-content-wrapper{vertical-align:middle;height:100%}.plus4u5-files-file-manager-tile .tile-card{padding:1px}.plus4u5-files-file-manager-tile-selected .tile-card{padding:0}.plus4u5-files-file-manager-tile .preview-content-wrapper .uu5-bricks-image{max-height:127px;margin:0 auto;height:100%;object-fit:scale-down;border:8px solid transparent}.plus4u5-files-file-manager-tile .preview-field .uu5-bricks-icon{font-size:64px;color:rgba(0,0,0,.54)}.plus4u5-files-file-manager-tile .info-field{min-height:64px;padding:8px}.plus4u5-files-file-manager-tile .info-field .primary-attribute,.plus4u5-files-file-manager-tile .info-field .secondary-attribute{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.plus4u5-files-file-manager-tile .info-field .primary-attribute{color:rgba(0,0,0,.7);min-height:22px}.plus4u5-files-file-manager-tile .info-field .secondary-attribute{color:rgba(0,0,0,.54);font-size:12px;min-height:18px}.plus4u5-files-file-manager-tile .select-button{position:absolute;left:0;top:0;width:48px;height:48px;border-radius:0 0 16px 0;opacity:0}.plus4u5-files-file-manager-tile-selected .select-button{left:-1px;top:-1px}.plus4u5-files-file-manager-tile:hover .select-button{opacity:.5}.plus4u5-files-file-manager-tile-selected .select-button,.plus4u5-files-file-manager-tile-selected:hover .select-button{opacity:1}.plus4u5-files-file-manager-tile .button-panel{position:absolute;top:8px;right:8px;opacity:0;transition:opacity .1s;text-align:right}.plus4u5-files-file-manager-tile-selected .button-panel{top:7px;right:7px}.plus4u5-files-file-manager-tile:hover .button-panel{opacity:1}.plus4u5-files-file-manager-tile .button-panel .uu5-bricks-icon{vertical-align:top}.plus4u5-files-file-manager-tile .button-panel .uu5-bricks-button:not(:last-child){margin-right:4px}.plus4u5-files-file-manager-tile .button-panel .uu5-bricks-dropdown{vertical-align:bottom}.plus4u5-files-file-manager-tile .uu5-bricks-link{color:#000!important}.plus4u5-files-file-manager-tile.small-tile .preview-field{display:inline-block;width:64px;height:64px;min-height:64px;max-height:64px;text-align:center;vertical-align:top;border:none}.plus4u5-files-file-manager-tile.small-tile .preview-field .uu5-bricks-icon{font-size:36px;margin-top:4px}.plus4u5-files-file-manager-tile.small-tile .info-field{display:inline-block;width:100%;max-width:calc(100% - 80px);height:64px}.plus4u5-files-file-manager-tile.small-tile .info-field-row:first-child{margin-top:2px}.plus4u5-files-file-manager-tile.small-tile .info-field-row{line-height:16px}.plus4u5-files-file-manager-tile.small-tile .info-field-col{display:inline-block;max-width:65%;color:rgba(0,0,0,.54);font-size:12px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.plus4u5-files-file-manager-tile.small-tile .info-field-row:first-child .info-field-col:first-child{font-size:16px;min-height:24px;color:rgba(0,0,0,.7)}.plus4u5-files-file-manager-tile.small-tile .info-field-col:nth-child(2){float:right;max-width:35%}@media (max-width:768px){.plus4u5-files-file-manager-tile .button-panel{position:static;opacity:1;transition:none;padding:8px;height:48px}.plus4u5-files-file-manager-tile .select-button{position:absolute;left:8px;top:8px;width:32px;height:32px;border-radius:2px;opacity:1;transition:none}.plus4u5-files-file-manager-tile-selected .select-button{left:7px;top:7px}.plus4u5-files-file-manager-tile .preview-field{min-height:144px;height:144px;border-top:1px solid rgba(0,0,0,.12)}.plus4u5-files-file-manager-tile .preview-field .uu5-bricks-icon{font-size:104px;line-height:104px}.plus4u5-files-file-manager-tile .preview-content-wrapper{display:table-cell;vertical-align:middle}.plus4u5-files-file-manager-tile .preview-content-wrapper,.plus4u5-files-file-manager-tile .preview-content-wrapper .uu5-bricks-image{max-height:142px}.plus4u5-files-file-manager-tile .info-field .primary-attribute{font-size:16px;min-height:24px}.plus4u5-files-file-manager-tile .info-field .secondary-attribute{font-size:14px;min-height:20px}.plus4u5-files-file-manager-tile .button-panel .uu5-bricks-button{line-height:16px;font-size:16px}.plus4u5-files-file-manager-tile .button-panel .uu5-bricks-button:not(:last-child){margin-right:8px}.plus4u5-files-file-manager-tile:hover .select-button{opacity:1}.plus4u5-files-file-manager-tile.small-tile .preview-field .uu5-bricks-icon{line-height:1.5}.plus4u5-files-file-manager-tile.small-tile .preview-field{width:64px;padding:0}.plus4u5-files-file-manager-tile.small-tile .info-box{border-top:1px solid rgba(0,0,0,.12)}.plus4u5-files-file-manager-tile.small-tile .info-field{max-width:calc(100% - 71px)}.plus4u5-files-file-manager-tile.small-tile .button-panel{vertical-align:top;padding-left:16px;height:48px}}",""]),
e.exports=t},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e
;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){
var r,s=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}))
;return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(s)?e:(r=0===s.indexOf("//")?s:0===s.indexOf("/")?n+s:i+s.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},function(e,t){
e.exports=require("uu5g04-forms")},function(e,t,n){var i=n(16);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!1,transform:void 0,insertInto:function(){return n(2)()}};n(3)(i,r)
;i.locals&&(e.exports=i.locals)},function(e,t,n){
(t=n(1)(!1)).push([e.i,".plus4u5-files-file-manager-type-filter{width:100%;padding:8px 0 0;border-bottom:1px solid #d6d6d6;display:-webkit-flex;display:flex;-webkit-justify-content:space-between;justify-content:space-between}.plus4u5-files-file-manager-type-filter .left-col .label{margin-right:16px}.plus4u5-files-file-manager-type-filter .left-col .uu5-bricks-button-switch.uu5-bricks-button>*,.plus4u5-files-file-manager-type-filter .right-col .uu5-bricks-button>*{vertical-align:top}.plus4u5-files-file-manager-type-filter .right-col .uu5-bricks-button{background-color:transparent;margin-bottom:8px;padding:0}@media (max-width:480px){.plus4u5-files-file-manager-type-filter{display:block}.plus4u5-files-file-manager-type-filter .left-col,.plus4u5-files-file-manager-type-filter .right-col{min-width:100%;text-align:left}}",""]),
e.exports=t},function(e,t,n){
(t=n(1)(!1)).push([e.i,'.plus4u5-files-dnd-form{min-height:84px}.plus4u5-files-dnd-form .row .uu5-bricks-column:first-child .plus4u5-files-dnd-form-row-label,.plus4u5-files-dnd-form .row .uu5-bricks-column:first-child .uu5-forms-text{width:100%;max-width:240px;float:right}.plus4u5-files-dnd-form .plus4u5-files-dnd-form-row .uu5-bricks-column .plus4u5-files-dnd-form-row-label{color:rgba(0,0,0,.54);font-size:14px}.plus4u5-files-dnd-form .plus4u5-files-dnd-form-row .uu5-bricks-column .plus4u5-files-dnd-form-row-label-required:after{content:"*";display:inline-block;width:0;color:#d0021b}@media (max-width:480px){.plus4u5-files-dnd-form .plus4u5-files-dnd-form-row:not(:nth-child(2)){margin-top:48px}.plus4u5-files-dnd-form .plus4u5-files-dnd-form-row .uu5-bricks-column:first-child .plus4u5-files-dnd-form-row-label,.plus4u5-files-dnd-form .plus4u5-files-dnd-form-row .uu5-bricks-column:first-child .uu5-forms-text,.plus4u5-files-dnd-form .plus4u5-files-dnd-form-row .uu5-bricks-column:last-child .plus4u5-files-dnd-form-row-label{max-width:none;float:none}.plus4u5-files-dnd-form .uu5-forms-input{margin:0}}',""]),
e.exports=t},function(e,t,n){var i=n(19);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!1,transform:void 0,insertInto:function(){return n(2)()}};n(3)(i,r);i.locals&&(e.exports=i.locals)
},function(e,t,n){(t=n(1)(!1)).push([e.i,".plus4u5-files-update-file-form{min-height:84px}",""]),e.exports=t},function(e,t,n){var i=n(21);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!1,
transform:void 0,insertInto:function(){return n(2)()}};n(3)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){
(t=n(1)(!1)).push([e.i,".plus4u5-files-add-file-form{min-height:84px}.plus4u5-files-add-file-form .uu5-forms-file{margin-bottom:24px}.plus4u5-files-add-file-form .uu5-bricks-panel{padding-bottom:20px}.plus4u5-files-add-file-form .uu5-bricks-panel .uu5-forms-input:first-child{margin-top:0}.plus4u5-files-add-file-form .uu5-bricks-panel .uu5-forms-input:last-child{margin-bottom:0}.plus4u5-files-add-file-form .uu5-bricks-panel .uu5-bricks-panel-body-body{padding-left:0;padding-right:0}.plus4u5-files-add-file-form .uu5-bricks-panel .uu5-bricks-panel-header{background-color:transparent;border-bottom:1px solid #bdbdbd;-webkit-justify-content:start;justify-content:start;padding-bottom:4px}.plus4u5-files-add-file-form .uu5-bricks-panel .uu5-bricks-panel-header:focus,.plus4u5-files-add-file-form .uu5-bricks-panel .uu5-bricks-panel-header:hover{background-color:transparent!important}",""]),
e.exports=t},function(e,t,n){var i=n(23);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!1,transform:void 0,insertInto:function(){return n(2)()}};n(3)(i,r);i.locals&&(e.exports=i.locals)
},function(e,t,n){(t=n(1)(!1)).push([e.i,".plus4u5-files-delete-file-form .uu5-bricks-p{text-align:center;margin:40px}",""]),e.exports=t},function(e,t,n){var i=n(25)
;"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!1,transform:void 0,insertInto:function(){return n(2)()}};n(3)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){
(t=n(1)(!1)).push([e.i,".plus4u5-files-preview-file-form{min-height:64px}.plus4u5-files-preview-file-form .uu5-bricks-image{margin:0 auto 8px;max-height:calc(100vh - 112px)}",""]),e.exports=t
},function(e,t,n){var i=n(27);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!1,transform:void 0,insertInto:function(){return n(2)()}};n(3)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){
(t=n(1)(!1)).push([e.i,".plus4u5-files-share-file-form{min-height:64px}.plus4u5-files-share-file-form .uu-uuapp-designkit-embedded-text .uu5-bricks-header{font-size:14px;color:rgba(0,0,0,.54);margin-top:24px;margin-bottom:16px}.plus4u5-files-share-file-form .plus4u5-files-share-file-form-radio-label{font-size:14px;color:rgba(0,0,0,.54);margin-top:16px;margin-bottom:8px}.plus4u5-files-share-file-form .uu5-forms-radios{margin-top:0}.plus4u5-files-share-file-form .uu5-forms-message{border:none}.plus4u5-files-share-file-form .uu5-forms-radios:not(.uu5-common-disabled) .uu5-forms-checkbox-checked:not(.uu5-forms-checkbox-type-switch) .uu5-forms-right-wrapper{background-color:transparent}",""]),
e.exports=t},function(e,t,n){var i=n(29);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!1,transform:void 0,insertInto:function(){return n(2)()}};n(3)(i,r);i.locals&&(e.exports=i.locals)
},function(e,t,n){
(t=n(1)(!1)).push([e.i,".plus4u5-files-controls{text-align:center;padding:0;font-family:ClearSans-Medium}.plus4u5-files-controls .uu5-bricks-button{margin:0 4px;min-width:96px}.plus4u5-files-controls .plus4u5-files-controls-code-buttons{margin-bottom:4px}@media (min-width:992px){.plus4u5-files-controls .plus4u5-files-controls-code-buttons{display:inline-block;position:absolute;left:12px;margin-bottom:0}}@media (max-width:768px){.plus4u5-files-controls .uu5-bricks-button{margin:2px 4px}}",""]),
e.exports=t},function(e,t,n){var i=n(31);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!1,transform:void 0,insertInto:function(){return n(2)()}};n(3)(i,r);i.locals&&(e.exports=i.locals)
},function(e,t,n){(t=n(1)(!1)).push([e.i,".plus4u5-files-form-controller-modal-header{width:100%}",""]),e.exports=t},function(e,t,n){var i=n(33);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!1,
transform:void 0,insertInto:function(){return n(2)()}};n(3)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){
(t=n(1)(!1)).push([e.i,".plus4u5-files-file-uploader{position:relative;border-radius:2px;margin:8px 0}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-initial-content,.plus4u5-files-file-uploader .plus4u5-files-file-uploader-progress-content{font-size:16px;color:rgba(0,0,0,.3);padding:8px 16px;max-height:320px;overflow:auto}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-dnd-content{text-align:center;border:3px dashed rgba(0,0,0,.17);font-size:18px;padding:24px 64px}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-dnd-content .plus4u5-files-file-uploader-stats-wrapper{text-align:left;display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-progress-stat-message{margin-top:-2px}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-hover-area{position:absolute;top:8px;bottom:8px;left:8px;right:8px;background-color:#e3f2fd;z-index:-1}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-progress-content{position:relative}.plus4u5-files-file-uploader.plus4u5-files-file-uploader-success-state{background-color:#f1f8e9}.plus4u5-files-file-uploader.plus4u5-files-file-uploader-success-state .plus4u5-files-file-uploader-dnd-content{border-color:#388e3c}.plus4u5-files-file-uploader.plus4u5-files-file-uploader-success-state .plus4u5-files-file-uploader-progress-stat-message{color:#4caf50}.plus4u5-files-file-uploader.plus4u5-files-file-uploader-failure-state{background-color:#ffebee}.plus4u5-files-file-uploader.plus4u5-files-file-uploader-failure-state .plus4u5-files-file-uploader-dnd-content{border-color:#dd3d3d}.plus4u5-files-file-uploader.plus4u5-files-file-uploader-failure-state .plus4u5-files-file-uploader-progress-stat-message{color:#f44336}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-stats-wrapper{color:#000;margin-top:8px}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-progress-stat{display:-webkit-flex;display:flex;-webkit-align-items:baseline;align-items:baseline}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-progress-stat .plus4u5-files-file-uploader-progress-stat-content{margin-left:12px}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-progress-stat .uu5-bricks-icon{font-size:20px}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-progress-stat+.plus4u5-files-file-uploader-progress-stat{margin-top:2px}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-result-failed,.plus4u5-files-file-uploader .plus4u5-files-file-uploader-result-success{font-family:ClearSans-Medium}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-reset-button{position:absolute;display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center;top:0;right:0;width:32px;height:32px;font-size:20px}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-reset-button.uu5-bricks-link,.plus4u5-files-file-uploader .plus4u5-files-file-uploader-reset-button.uu5-bricks-link:focus,.plus4u5-files-file-uploader .plus4u5-files-file-uploader-reset-button.uu5-bricks-link:hover,.plus4u5-files-file-uploader .plus4u5-files-file-uploader-reset-button.uu5-bricks-link:visited{text-decoration:none;color:rgba(0,0,0,.54)}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-progress-stat .mdi-checkbox-marked-circle,.plus4u5-files-file-uploader .plus4u5-files-file-uploader-result-success{color:#4caf50}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-progress-stat .mdi-alert,.plus4u5-files-file-uploader .plus4u5-files-file-uploader-result-failed{color:#f44336}.plus4u5-files-file-uploader .plus4u5-files-file-uploader-progress-stat .mdi-loading{-webkit-animation:spin 1.2s linear infinite;animation:spin 1.2s linear infinite}@-webkit-keyframes plus4u5-files-file-uploader-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes plus4u5-files-file-uploader-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}",""]),
e.exports=t},function(e,t){e.exports=require("react")},function(e,t,n){var i=n(36);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!1,transform:void 0,insertInto:function(){return n(2)()}};n(3)(i,r)
;i.locals&&(e.exports=i.locals)},function(e,t,n){
(t=n(1)(!1)).push([e.i,".plus4u5-files-file-manager .ReactVirtualized__Grid__innerScrollContainer{overflow:visible!important}.plus4u5-files-file-manager .plus4u5-files-file-manager-empty-list-warning{margin-top:64px;text-align:center;color:rgba(0,0,0,.54)}.plus4u5-files-file-manager .plus4u5-files-file-manager-empty-list-warning .uu5-bricks-icon{font-size:64px}.plus4u5-files-file-manager .plus4u5-files-file-manager-empty-list-warning .uu5-common-div{margin:8px 16px;font-size:24px}.plus4u5-files-file-manager .plus4u5-files-file-manager-dnd-wrapper{border-bottom:1px solid #d6d6d6}.plus4u5-files-file-manager .uu5-tiles-list-controller-toolbar-container{z-index:auto}.plus4u5-files-file-manager .uu5-bricks-card,.plus4u5-files-file-manager .uu5-tiles-list-virtualized{overflow:visible!important}",""]),
e.exports=t},function(e,t,n){"use strict";n.r(t),n.d(t,"FileManager",(function(){return Dt})),n.d(t,"FileUploader",(function(){return et}));var i=n(0),r=n.n(i),s=(n(4),n(6),{LSI_LABEL_ADD_BINARY:{
cs:"Nahrát soubor",en:"Upload File"},LSI_LABEL_ADD_BINARIES:{cs:"Nahrát soubory",en:"Upload Files"},LSI_LABEL_UPDATE_BINARY:{cs:"Upravit soubor",en:"Update File"},
LSI_UPDATE_BINARY_META_DATA_FORM_HEADER:{cs:"Upravit tagy souboru",en:"Update File Tags"},LSI_LABEL_DELETE_BINARY:{cs:"Smazat soubor",en:"Delete File"},LSI_LABEL_FILE_MANAGER:{cs:"Správce souborů",
en:"File Manager"},LSI_LABEL_FILE_MANAGER_HEADER:{cs:"Soubory",en:"Files"},LSI_LABEL_FILE_MANAGER_SEARCH_PLACEHOLDER:{cs:"Hledat soubor...",en:"Search file..."},
LSI_LABEL_FILE_MANAGER_DROP_BAR_CONTENT:{cs:"Sem přetáhněte soubory k nahrání",en:"Drop files to upload here"},LSI_LABEL_FILE_MANAGER_DROP_ZONE:{cs:"Přetáhněte soubory k nahrání",
en:"Drop files to upload"},LSI_LABEL_FILE_MANAGER_EMPTY_WARNING:{cs:"Úložiště neobsahuje žádné soubory.",en:"The storage does not contain any files."},LSI_LABEL_FILE_MANAGER_COPY_INFO:{
cs:"Kód byl zkopírován do schránky.",en:"Code has been copied to clipboard."},LSI_LABEL_FILE_MANAGER_ACTION_FULL_TILE:{cs:"Zobraz velké dlaždice",en:"Show Full Tile"},
LSI_LABEL_FILE_MANAGER_ACTION_SMALL_TILE:{cs:"Zobraz kompaktní dlaždice",en:"Show Compact Tile"},LSI_LABEL_FILE_MANAGER_FILTER_HEADER:{cs:"Filtry",en:"Filters"},LSI_LABEL_FILE_MANAGER_FILTER_RESET:{
cs:"Zrušit filtry",en:"Reset filters"},LSI_LABEL_FILE_MANAGER_FILTER_IMAGE:{cs:"Obrázky",en:"Images"},LSI_LABEL_FILE_MANAGER_FILTER_TEXT:{cs:"Dokumenty",en:"Documents"},
LSI_LABEL_FILE_MANAGER_FILTER_ARCHIVE:{cs:"Archivy",en:"Archives"},LSI_LABEL_FILE_MANAGER_FILTER_OTHER:{cs:"Ostatní",en:"Other"},LSI_LABEL_FILE_MANAGER_SHARE_HEADER:{cs:"Sdílet soubor",en:"Share File"
},LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_PREVIEW:{cs:"Náhled",en:"Preview"},LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_SHARE:{cs:"Sdílet",en:"Share"},LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_DOWNLOAD:{
cs:"Stáhnout",en:"Download"},LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_UPDATE:{cs:"Nahradit",en:"Update"},LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_UPDATE_TAGS:{cs:"Upravit tagy",en:"Update Tags"},
LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_DELETE:{cs:"Smazat",en:"Delete"},LSI_LABEL_FILE_MANAGER_SHARE_RADIO_LABEL:{cs:"Sdílet",en:"Share"},LSI_LABEL_FILE_MANAGER_SHARE_TYPE_CODE:{cs:"Kód",en:"Code"},
LSI_LABEL_FILE_MANAGER_SHARE_TYPE_IMAGE:{cs:"Komponentu obrázku",en:"Image Component"},LSI_LABEL_FILE_MANAGER_SHARE_TYPE_FILE_LINK:{cs:"Komponentu odkazu",en:"Link Component"},
LSI_LABEL_FILE_MANAGER_SHARE_TYPE_URI:{cs:"URI",en:"URI"},LSI_LABEL_DELETE_BINARY_SUCCESS_CONFIRM_MSG:{cs:"Soubor byl úspěšně smazán.",en:"The file has been successfully deleted."},
LSI_LABEL_SHARE_BINARY_SUCCESS_CONFIRM_MSG:{cs:"Zkopírováno do schránky",en:"Copied to clipboard"},LSI_LABEL_FILE_MANAGER_SHARE_TEXT:{cs:"Text ke zkopírování",en:"Text to copy"},
LSI_LABEL_FILE_MANAGER_PREVIEW_ERROR:{en:"File does not exist. It was probably deleted.",cs:"Soubor neexistuje. Nejspíš byl smazán."},LSI_LABEL_FILE_MANAGER_UPLOAD_RESULT_SUCCESS:{
en:"All files were successfuly uploaded.",cs:"Všechny soubory byly úspěšně nahrány."},LSI_LABEL_FILE_MANAGER_UPLOAD_RESULT_FAILED:{en:"Some files could not be uploaded.",
cs:"Některé soubory se nepodařilo nahrát."},LSI_IMAGE_QUALITY_LOW:{en:"Low Quality",cs:"Nízká kvalita"},LSI_IMAGE_QUALITY_OPTIMAL:{en:"Optimal Quality",cs:"Optimální kvalita"},
LSI_IMAGE_QUALITY_MEDIUM:{en:"Medium Quality",cs:"Střední kvalita"},LSI_IMAGE_QUALITY_ORIGINAL:{en:"Original Quality",cs:"Orignální kvalita"},LSI_IMAGE_QUALITY_TO_JPG_OPTIMAL:{
en:"Convert to JPG (optimal quality)",cs:"Převést na JPG (optimální kvalita)"},LSI_IMAGE_QUALITY_TO_JPG_MEDIUM:{en:"Convert to JPG (medium quality)",cs:"Převést na JPG (střední kvalita)"},
LSI_IMAGE_QUALITY_ORIGINAL_PNG:{en:"Original PNG",cs:"Původní PNG"},LSI_IMAGE_SIZE_OPTIMAL:{en:"Optimal Size",cs:"Optimální velikost"},LSI_IMAGE_SIZE_ORIGINAL:{en:"Original Size",
cs:"Originální velikost"},LSI_NOT_REQUIRED_CODE_PLACEHOLDER:{en:"Code will be generated",cs:"Kód bude vygenerován"},LSI_LABEL_ADD_BINARY_CODE:{cs:"Kód",en:"Code"},LSI_LABEL_ADD_BINARY_CODE_REQUIRED:{
cs:"Kód je povinný",en:"Code is required"},LSI_LABEL_ADD_TAGS:{cs:"Tagy",en:"Tags"},LSI_LABEL_ADD_BINARY_FILE_SIZE_EXCEEDED:{cs:"Soubor je příliš velký. Maximální velikost souboru je ${maxSize}kB.",
en:"The file is too large. Maximal file size is ${maxSize}kB."},LSI_LABEL_ADD_BINARY_FILE:{cs:"Soubor",en:"File"},LSI_LABEL_ADD_BINARY_FILE_REQUIRED:{cs:"Soubor je povinný.",en:"File is required."},
LSI_LABEL_ADD_BINARY_QUALITY:{cs:"Kvalita",en:"Quality"},LSI_LABEL_ADD_BINARY_PRESERVE_DIMENSIONS:{cs:"Zachovat rozměry",en:"Preserve dimensions"},LSI_IMAGE_SIZE_WARNING:{
cs:"Velké obrázky zaplní úložiště rychleji.",en:"Large images fill the storage faster."},LSI_IMAGE_QUALITY_WARNING:{cs:"Obrázky ve vysoké kvalitě zaplní úložiště rychleji.",
en:"High quality images fill the storage faster."},LSI_LABEL_ADD_BINARY_ADVANCED:{cs:"Rozšířené",en:"Advanced"},LSI_LABEL_DELETE_BINARY_MSG:{cs:"Opravdu chcete trvale odstranit soubor ${filename}?",
en:"Do you really want to delete the file ${filename}?"},LSI_LABEL_COPY_FILE_MANAGER_LIST_FAILED:{en:"An error occurred while receiving data from server.",cs:"Nepodařilo se načíst data ze serveru."},
LSI_LABEL_BUTTON_CANCEL:{cs:"Zrušit",en:"Cancel"},LSI_LABEL_BUTTON_SAVE:{cs:"Uložit",en:"Save"},LSI_LABEL_BUTTON_DELETE:{cs:"Smazat",en:"Delete"},LSI_LABEL_BUTTON_COPY:{cs:"Kopírovat",en:"Copy"},
LSI_INVALID_CODE:{cs:"Kód je nevalidní.",en:"Code is invalid."},LSI_REQUIRED_CODE:{cs:"Prosím vyplňte",en:"Please fill in code"},LSI_INVALID_TAGS:{cs:"Tagy $1 nejsou povolené.",
en:"Set tags $1 are not allowed."},LSI_DUPLICATE_CODE:{en:"Given code is not unique.",cs:"Zadaný kód je již obsazen."},LSI_DEFAULT_ERROR_MESSAGE:{en:"Sending failed!",cs:"Odeslání selhalo."},
commandErrors:{"uu-app-binarystore/uuBinaryCreateBinary/duplicateCode":{en:"Given code is not unique.",cs:"Zadaný kód je již obsazen."},"uu-app-binarystore/uuBinaryCreateBinary/invalidDtoIn":{
en:"Input data is not valid.",cs:"Zadaná vstupní data nejsou validní."},"uu-app-binarystore/uuBinaryDeleteBinary/invalidDtoIn":{en:"Input data is not valid.",cs:"Zadaná vstupní data nejsou validní."},
resizeFailed:{en:"Resizing failed!",cs:"Změna velikosti selhala."},default:{en:"Sending failed!",cs:"Odeslání selhalo."}}}),a=function(e,t){var n;if("string"==typeof e)n=e;else if(t){var i={}
;for(var s in e)for(var a in t)i[s]=e[s].replace("${".concat(a,"}"),t[a]);n=r.a.Common.Element.create(r.a.Bricks.Lsi,{lsi:i})}else n=r.a.Common.Element.create(r.a.Bricks.Lsi,{lsi:e});return n
},o="Plus4U5.Files.",l="plus4u5-files-",u=70,p=2e3,c=1200,d=(n(7),n(5));function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e)
;t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){
var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){f(e,t,n[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))
}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g={
APP_BASE_URI:location.protocol+"//"+location.host+i.Environment.getAppBasePath(),call:function(e,t,n,i){this._detectIe()&&"get"===e&&(n.data=n.data||{},n.data.Msiets=(new Date).getTime()),
d.Client[e](t,n.data||null,i).then((function(e){return n.done(e.data)}),(function(e){return n.fail(e)}))},callWithHeader:function(e,t,n,i,r){d.Client[e](t,n.data||null,i).then((function(e){
return n.done(e.data,e.headers(r))}),(function(e){return n.fail(e)}))},getCommandUri:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&!e.match(/\/$/)&&(e+="/")
;var r=(e||g.APP_BASE_URI)+t.replace(/^\/+/,""),s=i.Environment;if(s.tid||s.awid||s.vendor||s.app){var a=d.Uri.UriBuilder.parse(r);(s.tid||s.awid)&&(s.gatewayUri&&(a.setGateway=s.gatewayUri),
s.tid&&(a.setTid=s.tid),s.awid&&(a.setAwid=s.awid)),(s.vendor||s.app)&&(s.vendor&&(a.setVendor=s.vendor),s.app&&(a.setApp=s.app),s.subApp&&(a.setSubApp=s.subApp)),r=a.toUri().toString()}var o=!0
;for(var l in n)o?(r+="?",o=!1):r+="&",r+="".concat(l,"=").concat(n[l]);return r},_detectIe:function(){var e=window.navigator.userAgent;if(e.indexOf("MSIE ")>0)return!0;if(e.indexOf("Trident/")>0){
e.indexOf("rv:");return!0}return e.indexOf("Edge/")>0},customPostMultipartCmd:function(e,t,n){var i=g.getCommandUri(e,t),r=new FormData;n.data.sys&&r.append("sys.rev",n.data.sys.rev),
n.data.code&&r.append("code",n.data.code),Array.isArray(n.data.tagList)&&n.data.tagList.forEach((function(e,t){r.append("tagList["+t+"]",e)})),
n.data.data&&r.append("data",n.data.data,n.data.data.name);var s=h(h({},n),{},{data:r});g.call("post",i.toString(),s,{requestTimeout:0,headers:{"content-type":"multipart/form-data"}})},
customPostCmd:function(e,t,n){var i=g.getCommandUri(e,t);g.call("post",i.toString(),n)},customGetCmd:function(e,t,n){var i=g.getCommandUri(e,t);g.call("get",i.toString(),n)},
customGetNotTransformedCmd:function(e,t,n){var i=g.getCommandUri(e,t);g.callWithHeader("get",i.toString(),n,{transformResponse:!1},"content-type")}
},y=g,b=r.a.Common.Css.createCssModule("plusu-files"),_=r.a.Common.VisualComponent.create({mixins:[r.a.Common.BaseMixin],statics:{tagName:o+"TagList",classNames:{main:function(e,t){
return b.css("\n          line-height: 22px;\n          position: relative;\n          ".concat(t.showAllTags?"max-height: auto;":"max-height: 44px;","\n          ").concat(t.showAllTags?"flex-basis: auto;":"flex-basis: 44px;","\n          overflow: hidden;\n        "))
},resize:function(){return b.css("\n          display: flex;\n          flex-direction: column;\n          align-items: stretch;\n        ")},tag:function(){
return b.css("\n          cursor: default;\n          background-color: rgba(0, 0, 0, 0.1);\n          color: rgba(0, 0, 0, .87);\n          margin-right: 4px;\n          margin-bottom: 2px;\n          vertical-align: top;\n\n          .uu5-bricks-icon {\n            display: none;\n          }\n        ")
},tagInvisible:function(){return b.css("\n          visibility: hidden;\n        ")},expander:function(){return b.css("\n          cursor: pointer;\n        ")}}},propTypes:{
items:r.a.PropTypes.arrayOf(r.a.PropTypes.string),onTagExpand:r.a.PropTypes.func,height:r.a.PropTypes.number,width:r.a.PropTypes.number},getDefaultProps:function(){return{items:void 0,
onTagExpand:null,height:0,width:0}},getInitialState:function(){return this._node=r.a.Common.Reference.create(),this._updateState="initial",{width:this.props.width,height:this.props.height,
hiddenCount:0,showAllTags:!1}},componentWillReceiveProps:function(e){var t={};e.height&&Math.abs(e.height-this.props.height)>2&&(t.height=e.height),e.width&&(t.width=e.width),
0!==Object.keys(t)&&this.setState(t,(function(){"function"==typeof e.onTagExpand&&e.onTagExpand()})),this._updateState="initial"},componentDidMount:function(){this._updateHiddenTags()},
componentDidUpdate:function(){this._updateHiddenTags()},_updateHiddenTags:function(){var e=this;if(this._node.current&&!this.state.showAllTags){
var t,n=0,i=this._node.current.scrollHeight,r=this._node.current.getBoundingClientRect();if(i>r.height){
for(var s=this.getClassName("tag"),a=this.getClassName("expander"),o=[],l=0;l<this._node.current.childNodes.length;l++){var u=this._node.current.childNodes[l]
;-1!==u.className.indexOf(s)&&(-1===u.className.indexOf(a)?o.push(u):t=u)}for(var p=0;p<o.length;p++){if(o[p].getBoundingClientRect().bottom-4>=r.bottom){n=o.length-p;break}}}
this.setState((function(i){
if(i.hiddenCount===n)return t&&t.getBoundingClientRect().bottom-4>=r.bottom?("initial"===e._updateState?e._updateState="shrinked":"shrinked,expanded"===e._updateState&&(e._updateState="shrinked,expanded,shrinked"),
{hiddenCount:i.hiddenCount+1}):null;if("shrinked"===e._updateState&&n<i.hiddenCount)e._updateState="shrinked,expanded";else if("shrinked,expanded,shrinked"===e._updateState)return null;return{
hiddenCount:n}})),Promise.resolve().then((function(){return e._updateState="initial"}))}},_showAllTags:function(){var e=this;this.setState({showAllTags:!0},(function(){
"function"==typeof e.props.onTagExpand&&e.props.onTagExpand()}))},render:function(){var e=this;if(!Array.isArray(this.props.items)||!this.props.items.length)return null
;var t=this.state.showAllTags?0:this.state.hiddenCount,n=this.props.items.length-t,i=this.props.items.slice(0,n),s=t?this.props.items.slice(n):null;return r.a.Common.Element.create("div",{
className:this.getClassName("main")+(this.props.className?" "+this.props.className:""),ref:this._node,style:{maxHeight:this.state.height&&!this.state.showAllTags?this.state.height+"px":void 0}
},i.map((function(t){return r.a.Common.Element.create(r.a.Bricks.Label,{key:t,colorSchema:"custom",className:e.getClassName("tag")},t)})),t?r.a.Common.Element.create(r.a.Bricks.Label,{key:"show-all",
colorSchema:"custom",className:this.getClassName("tag")+" "+this.getClassName("expander"),onClick:this._showAllTags},"+",this.state.hiddenCount):null,s&&s.map((function(t){
return r.a.Common.Element.create(r.a.Bricks.Label,{key:t,colorSchema:"custom",className:e.getClassName("tag")+" "+e.getClassName("tagInvisible")},t)})))}});function v(){
return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}
function C(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t)
;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}
function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),
n.push.apply(n,i)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){S(e,t,n[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))
}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L={displayName:o+"ImageFromCall"
},A=Object(i.createComponent)(E(E({},L),{},{propTypes:{srcMeta:r.a.PropTypes.shape({data:r.a.PropTypes.any,uuCmd:r.a.PropTypes.oneOfType([r.a.PropTypes.func,r.a.PropTypes.string]),
stringSrc:r.a.PropTypes.string,callback:r.a.PropTypes.func}).isRequired,srcReadyKey:r.a.PropTypes.string,onSrcReady:r.a.PropTypes.func},defaultProps:{srcMeta:void 0},getInitialState:function(){return{
src:this._updateSrc("src",this.props.srcMeta),thumbSrc:this._updateSrc("thumbSrc",this.props.thumbSrcMeta)}},componentWillReceiveProps:function(e){var t={}
;r.a.Common.Tools.deepEqual(this.props.srcMeta,e.srcMeta)||(t.src=this._updateSrc("src",e.srcMeta)),
r.a.Common.Tools.deepEqual(this.props.thumbSrcMeta,e.thumbSrcMeta)||(t.thumbSrc=this._updateSrc("thumbSrc",e.thumbSrcMeta)),Object.keys(t).length>0&&this.setState(t)},componentDidMount:function(){
this._checkSrcReady()},componentDidUpdate:function(e,t){this._checkSrcReady()},componentWillUnmount:function(){this._unmounted=!0},_checkSrcReady:function(){
this._id_src===this._id_srcFinished&&this._id_thumbSrc===this._id_thumbSrcFinished&&this._lastReportedId!==this._id_src+" "+this._id_thumbSrc+" "+this.props.srcReadyKey&&(this._lastReportedId=this._id_src+" "+this._id_thumbSrc+" "+this.props.srcReadyKey,
"function"==typeof this.props.onSrcReady&&this.props.onSrcReady({src:this.state.src,thumbSrc:this.state.thumbSrc}))},_updateSrc:function(e,t){var n=this;if(!t)return null
;var i=this["_id_"+e]=r.a.Common.Tools.generateUUID(),s=t.data,a=t.uuCmd,o=t.stringSrc,l=t.callback;return o||"function"!=typeof a?(this._updateSrcDone(i,o,e,l),o):void a(s).then((function(t){
return n._updateSrcDone(i,t,e,l)}),(function(t){return n._updateSrcFail(i,t,e,l)}))},_updateSrcDone:function(e,t,n,i){var r=this;this._unmounted||this["_id_"+n]===e&&(this["_id_"+n+"Finished"]=e,
this.state&&this.setState((function(e){e[n]&&e[n].match(/^blob:/)&&window.URL.revokeObjectURL(e[n]);var i={};return i[n]="string"==typeof t?t:window.URL.createObjectURL(t),i}),(function(){
"function"==typeof callack&&i(r.state)})))},_updateSrcFail:function(e,t,n,i){var r=this;if(!this._unmounted&&this["_id_"+n]===e&&(this["_id_"+n+"Finished"]=e,this.state)){var s={};s[n]=null,
console.log(t),this.setState(s,(function(){"function"==typeof callack&&i(r.state)}))}},render:function(){var e=this.props,t=e.imageComponent,n=(e.srcMeta,e.thumbSrcMeta),i=(e.onSrcReady,
C(e,["imageComponent","srcMeta","thumbSrcMeta","onSrcReady"])),s=this.state,a=s.src,o=s.thumbSrc,l=t||r.a.Bricks.Image;return void 0!==a&&(!n||void 0!==o)&&a?r.a.Common.Element.create(l,v({},i,{
src:a||void 0,thumbSrc:o||void 0})):null}}));n(11);function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]
;for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){
var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function I(e){
for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){D(e,t,n[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))
}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=[{id:"image",
src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",authenticate:!0}],w=i.Common.Component.memo((function(e){return i.Common.Element.create(i.Imaging.Lightbox,e)
})),F=i.Common.VisualComponent.create({mixins:[i.Common.BaseMixin,i.Common.PureRenderMixin],statics:{tagName:o+"FileManagerTile",classNames:{main:l+"file-manager-tile",
mainSelected:l+"file-manager-tile-selected",selectableOnly:l+"file-manager-selectable-only",innerTile:l+"file-manager-inner-tile",smallTile:"small-tile",previewField:"preview-field",image:"image",
previewContentWrapper:"preview-content-wrapper",infoField:"info-field",tileCard:"tile-card",infoBox:"info-box",infoFieldRow:"info-field-row",infoFieldCol:"info-field-col",
primaryAttribute:"primary-attribute",secondaryAttribute:"secondary-attribute",buttonPanel:"button-panel",selectButton:"select-button",flex:function(e){
return"small"===e.tileType?"":b.css("\n              display: flex;\n              align-items: stretch;\n\n              & > .plus4u5-files-file-manager-tile {\n                display: flex;\n                flex-direction: column;\n                align-items: stretch;\n\n                & > .tile-card {\n                  flex: 1 0 auto;\n                  display: flex;\n                  flex-direction: column;\n                  align-items: stretch;\n\n                  & > .info-box {\n                    flex: 1 0 auto;\n                    display: flex;\n                    flex-direction: column;\n                    align-items: stretch;\n\n                    & > .info-field {\n                      flex: 1 0 auto;\n                      display: flex;\n                      flex-direction: column;\n                      align-items: stretch;\n                    }\n                  }\n                }\n              }\n            ")
}},defaults:{maxButtons:3},opt:{nestingLevelWrapper:!0,pureRender:!0}},propTypes:{fileManager:i.PropTypes.object,tileType:i.PropTypes.string,getThumbnail:i.PropTypes.func,isS:i.PropTypes.bool,
uuCmdGetBinaryData:i.PropTypes.oneOfType([i.PropTypes.func,i.PropTypes.string]),uuCmdGetBinaryDataUri:i.PropTypes.func,
uuCmdGetThumbnailData:i.PropTypes.oneOfType([i.PropTypes.func,i.PropTypes.string]),uuCmdGetThumbnailDataUri:i.PropTypes.func,onFileClick:i.PropTypes.func,shouldShowThumbnail:i.PropTypes.bool,
fileButtons:i.PropTypes.object,customSelectable:i.PropTypes.string,selectableOnly:i.PropTypes.bool,onFilenameSet:i.PropTypes.func},getDefaultProps:function(){return{selectableOnly:!1}},
getInitialState:function(){return this._authenticatedUrls={},I(I({loadError:!1,renderButtons:this.props.isS,src:void 0,
srcMeta:this._updateSrc(this.props.uuCmdGetBinaryData,this.props.uuCmdGetBinaryDataUri),thumbSrc:void 0,thumbThumbSrc:void 0},this._updateThumbnails()),{},{icon:this.props.data.icon||"mdi-file",
thumbnailType:this.props.data.thumbnailType||"icon",binaryType:this.props.data.type||"other"})},componentDidMount:function(){this._updateLightbox(),this._updateDownloadUrl()},
componentWillUnmount:function(){this._updateDownloadUrlInterval&&clearInterval(this._updateDownloadUrlInterval),this._authenticatedUrls={}},componentDidUpdate:function(e,t){var n=this
;this.setState((function(e){if(!e.renderButtons&&n.props.isS)return{renderButtons:!0}})),this._updateLightbox(t.src),this._updateDownloadUrl()},componentWillReceiveProps:function(e){var t={}
;e.baseUri===this.props.baseUri&&e.uuCmdGetBinaryData===this.props.uuCmdGetBinaryData&&e.code===this.props.code||(t.srcMeta=this._updateSrc(e.uuCmdGetBinaryData,e.uuCmdGetBinaryDataUri,{
baseUri:e.baseUri,binary:e.data.binary,data:{code:e.code}}));var n=this._updateThumbnails(e);i.Common.Tools.deepEqual(n.thumbSrcMeta,this.state.thumbSrcMeta)||(t.thumbSrcMeta=n.thumbSrcMeta),
i.Common.Tools.deepEqual(n.thumbThumbSrcMeta,this.state.thumbThumbSrcMeta)||(t.thumbThumbSrcMeta=n.thumbThumbSrcMeta),
e.data.icon===this.props.data.icon&&e.data.thumbnailType===this.props.data.thumbnailType&&e.data.binaryType===this.props.data.binaryType||(t=I(I({},t),{},{icon:e.data.icon||"mdi-file",
thumbnailType:e.data.thumbnailType||"icon",binaryType:e.data.type||"other"})),Object.keys(t).length&&this.setState(t)},_updateLightbox:function(e){
this._lightbox&&e!==this.state.src&&void 0!==this.state.src&&this._lightbox.replaceImage(this.state.src||P[0].src,"image"),
this._lightbox&&this._lastOpenId!==this.state.lightboxOpenId&&void 0!==this.state.src&&(this._lastOpenId=this.state.lightboxOpenId,this._lightbox.open())},_updateSrc:function(e,t){
var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=r.baseUri,a=r.binary,o=r.stringParams,l=r.data,u=r.download,p=void 0!==u&&u,c=r.reAuthenticate,d=void 0!==c&&c,m=arguments.length>3?arguments[3]:void 0
;if(l=l||{code:this.props.data.binary.code},s=s||this.props.baseUri,"function"==typeof t?n=t(a||this.props.data.binary,p):"function"!=typeof e&&(n=y.getCommandUri(s,e,l),o&&(n+="&"+o),
p&&(n+="&contentDisposition=attachment")),p&&n&&i.Environment.isTrustedDomain(n)){var h=i.Environment.getSession(),f=this._getAuthenticatedUrl(n,h,d);f&&(n=f)}return{data:l,uuCmd:e,stringSrc:n,
callback:m}},_getAuthenticatedUrl:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=this._authenticatedUrls[e]
;return s&&!r||i.Common.Tools.getAuthenticatedUrl(e,t).then((function(t){n.isRendered()&&(n._authenticatedUrls[e]=t)})),s},_updateThumbnails:function(){
var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.data.binary.code,n=t.length>61?t.substr(0,61):t;n+="_th";var i,r,s=e.getThumbnail(n);if(s){var a=s.sys.mts
;a=a.replace(/[:.-]/g,""),i=this._updateSrc(e.uuCmdGetThumbnailData,e.uuCmdGetThumbnailDataUri,{data:{code:t},binary:e.data.binary,stringParams:a}),
r=this._updateSrc(e.uuCmdGetThumbnailData,e.uuCmdGetThumbnailDataUri,{data:{code:n},binary:s,stringParams:a})}return{thumbSrcMeta:i,thumbThumbSrcMeta:r}},_buildPreview:function(e){var t,n=this
;if("original"===this.state.thumbnailType)if(e){var r=this.getMainPropsToPass();t="none"!==this.props.customSelectable&&this.props.selectableOnly?i.Common.Element.create(A,{srcMeta:this.state.srcMeta,
onSrcReady:function(e){var t=e.src;return n.setState({src:t})},style:{maxWidth:r.style&&r.style.width?r.style.width-4:200},authenticate:!0}):i.Common.Element.create(A,{srcMeta:this.state.srcMeta,
onSrcReady:function(e){var t=e.src;return n.setState({src:t})},imageComponent:i.Imaging.Image,fit:"coverNoScaleUp",authenticate:!0,onClick:this.props.onFileClick?function(){
return n.props.onFileClick(n.props.data.binary)}:void 0})}else t=i.Common.Element.create(i.Bricks.Icon,{icon:this.state.icon
});else if("thumbnail"===this.state.thumbnailType)if(this.state.thumbSrcMeta&&e&&!this.state.loadError){var s=this.getMainPropsToPass()
;t="none"!==this.props.customSelectable&&this.props.selectableOnly?i.Common.Element.create(A,{srcMeta:this.state.thumbThumbSrcMeta,onSrcReady:function(e){var t=e.src;return n.setState({thumbThumbSrc:t
})},style:{maxWidth:s.style&&s.style.width?s.style.width-4:200},authenticate:!0}):i.Common.Element.create(A,{srcMeta:this.state.thumbSrcMeta,thumbSrcMeta:this.state.thumbThumbSrcMeta,
imageComponent:i.Imaging.Image,onSrcReady:function(e){var t=e.src,i=e.thumbSrc;return n.setState({thumbSrc:t,thumbThumbSrc:i})},lightbox:this.props.data.id,fit:"coverNoScaleUp",authenticate:!0,
onClick:this.props.onFileClick?function(){return n.props.onFileClick(n.props.data.binary)}:void 0})}else t=i.Common.Element.create(i.Bricks.Icon,{icon:this.state.icon
});else t=i.Common.Element.create(i.Bricks.Icon,{icon:this.state.icon});return this.state.lightboxSrcMeta&&(t=i.Common.Element.create(i.Common.Fragment,null,t,i.Common.Element.create(A,{style:{
display:"none"},srcMeta:this.state.lightboxSrcMeta,onSrcReady:function(e){var t=e.src;return n.setState({src:t})},srcReadyKey:this.state.lightboxOpenId+"",authenticate:!0}))),t},
_openPreviewForm:function(e,t,n){n.preventDefault(),n.stopPropagation(),this.props.onFileClick(e,t)},_getMainAttrValue:function(){
return this.props.onFilenameSet?a(this.props.onFilenameSet(this.props.data.binary)):this.props.data.binary.filename},_toggleSelected:function(){
this.props.selected?this.props.fileManager.customRemoveSelectedItem(this.props.id):this.props.fileManager.customAddSelectedItem(this.props.id)},_getDownloadLinkData:function(e){
return this._updateSrc(this.props.uuCmdGetBinaryData,this.props.uuCmdGetBinaryDataUri,{download:!0,reAuthenticate:e})},_onDownloadLinkClick:function(){
var e=this._getDownloadLinkData(),t=e.data,n=e.stringSrc,i=e.uuCmd;if(n||"function"!=typeof this.props.uuCmdGetBinaryData)window.open(n,"_self");else{var r=this.props.binary.filename
;i(t).then((function(e){var t=new Blob([e],{type:"octet/stream"});if("function"!=typeof navigator.msSaveBlob){var n=window.URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download=r,
i.style="display: none;",document.body.appendChild(i),i.click(),document.body.removeChild(i),setTimeout((function(){window.URL.revokeObjectURL(n)}),6e4)}else navigator.msSaveBlob(t,r)}))}},
_updateDownloadUrl:function(){var e=this;this._updateDownloadUrlInterval&&clearInterval(this._updateDownloadUrlInterval),this._updateDownloadUrlInterval=setInterval((function(){
e._getDownloadLinkData(!0)}),6e5),this._getDownloadLinkData(!0)},_getDownloadLink:function(e,t){return i.Common.Element.create(i.Bricks.Link,{key:"dropdownItem"+t,
className:"uu5-bricks-dropdown-item-link",content:a(e.label),onClick:this._onDownloadLinkClick,download:!0})},_renderButtonPanel:function(){
var e=this,t=[],n=[],r=this.props.fileButtons,s=r.itemList,o=r.hideDropdown
;"none"!==this.props.customSelectable&&this.props.selectableOnly&&this.props.data.clickable&&t.push(i.Common.Element.create(i.Bricks.Button,{key:"magnifyButton",onClick:function(t,n){
n.preventDefault(),n.stopPropagation(),e.props.onFileClick?e.props.onFileClick(e.props.data.binary):e._lightbox&&e.setState((function(e){return{lightboxSrcMeta:e.srcMeta,
lightboxOpenId:(e.lightboxOpenId||0)+1}}))},colorSchema:"primary"},i.Common.Element.create(i.Bricks.Icon,{icon:"mdi-magnify-plus"}))),s=s.filter(Boolean);for(var l=!0,u=function(r){var u=s[r],p=!1
;!u.active||"none"!==e.props.customSelectable&&e.props.selectableOnly||"small"===e.props.tileType&&e.props.isS||(p=!0),p&&t.push(i.Common.Element.create(i.Bricks.Button,{key:"button"+r,
onClick:function(t,n){n.preventDefault(),n.stopPropagation(),"function"==typeof u.onClick&&u.onClick(e.props.data.binary,e.state.binaryType)},colorSchema:"primary",
tooltip:u.label?e.getLsiItem(u.label):void 0},i.Common.Element.create(i.Bricks.Icon,{icon:u.icon}))),
o&&("small"!==e.props.tileType||!e.props.isS)||"none"!==e.props.customSelectable&&e.props.selectableOnly||(u.isDownload?(l&&(l=p),
n.push(e._getDownloadLink(u,r))):("mdi-magnify-plus"!==u.icon||"mdi-magnify-plus"===u.icon&&e.props.data.clickable)&&(l&&(l=p),n.push(i.Common.Element.create(i.Bricks.Dropdown.Item,{label:a(u.label),
onClick:function(){return u.onClick(e.props.data.binary,e.state.binaryType)},key:"dropdownItem"+r}))))},p=0;p<s.length;p++)u(p);l&&(n=[]);var c=this.getDefault("maxButtons")-(n.length>0?1:0)
;return t.length>c&&t.splice(c),this.state.renderButtons&&i.Common.Element.create(i.Bricks.Div,{className:this.getClassName("buttonPanel")},t,n.length>0&&i.Common.Element.create(i.Bricks.Dropdown,{
label:"",ref_:function(t){return e._dropdown=t},iconOpen:"mdi-dots-vertical",iconClosed:"mdi-dots-vertical",pullRight:!0,colorSchema:"primary",allowTags:["UU5.Bricks.Link"]},n))},
_renderSelectButton:function(){var e=this;return"none"!==this.props.customSelectable&&i.Common.Element.create(i.Bricks.Button,{key:"selectButton",
className:this.getClassName("selectButton")+" "+(this.props.selected?this.getClassName("selectButtonSelected"):""),tooltip:this.getLsiItem({cs:"Vybrat soubor",en:"Select File"}),onClick:function(t,n){
return e._toggleSelected(n)},colorSchema:this.props.isS?this.props.selected?"orange":"blue":"orange"},i.Common.Element.create(i.Bricks.Icon,{icon:"mdi-checkbox-marked-circle",style:{color:"#ffffff",
fontSize:this.props.isS?null:"32px"}}))},_getFullInfoBox:function(){var e=this;return i.Common.Element.create("div",{className:this.getClassName("infoBox")},i.Common.Element.create("div",{
className:this.getClassName("previewField")+(this.props.data.clickable?" "+this.getClassName("image"):"")},i.Common.Element.create("div",{className:this.getClassName("previewContentWrapper")
},this._buildPreview(this.props.shouldShowThumbnail))),i.Common.Element.create("div",{className:this.getClassName("infoField")},i.Common.Element.create("div",{
className:this.getClassName("primaryAttribute"),title:this.props.data.binary.filename},this._getMainAttrValue()),i.Common.Element.create("div",{className:this.getClassName("secondaryAttribute"),
title:this.props.data.binary.code},this.props.data.binary.code),i.Common.Element.create(i.Bricks.Resize,null,(function(t){return i.Common.Element.create(_,{key:"tagList",
items:e.props.data.binary.tagList,onTagExpand:e.props.handleMeasure,className:"tag-list",width:t.width,height:t.height})})),i.Common.Element.create("div",{
className:this.getClassName("secondaryAttribute")
},new Date(this.props.data.binary.sys.mts).toLocaleString().slice(0,-3).replace(/:$/,""))),this._renderSelectButton(),!this.props.isS&&this._renderButtonPanel())},_getSmallInfoBox:function(){
return i.Common.Element.create("div",null,i.Common.Element.create("div",{className:this.getClassName("previewField")+(this.props.data.clickable?" "+this.getClassName("image"):"")
},this._buildPreview(!1)),i.Common.Element.create("div",{className:this.getClassName("infoField")},i.Common.Element.create("div",{className:this.getClassName("infoFieldRow")
},i.Common.Element.create("div",{className:this.getClassName("infoFieldCol"),title:this.props.data.binary.filename},this._getMainAttrValue()),i.Common.Element.create("div",{
className:this.getClassName("infoFieldCol")},new Date(this.props.data.binary.sys.mts).toLocaleString().slice(0,-3))),i.Common.Element.create("div",{className:this.getClassName("infoFieldRow")
},i.Common.Element.create("div",{className:this.getClassName("infoFieldCol"),title:this.props.data.binary.code
},this.props.data.binary.code))),this._renderSelectButton(),!this.props.isS&&this._renderButtonPanel())},_setLightboxRef:function(e){this._lightbox=e},render:function(){
var e=this,t=this.getMainPropsToPass();return this.props.selected&&(t.className+=" "+this.getClassName("mainSelected")),
"none"!==this.props.customSelectable&&this.props.selectableOnly&&(t.className+=" "+this.getClassName("selectableOnly")),
"small"===this.props.tileType&&(t.className+=" "+this.getClassName("smallTile")),i.Common.Element.create(i.Bricks.Div,{style:this.props.wrapperStyle,className:this.getClassName("flex")
},i.Common.Element.create(i.Bricks.Div,x({},t,{mainAttrs:{onMouseOver:function(){return e.setState({renderButtons:!0})},onClick:function(t){t.preventDefault(),t.stopPropagation(),
"none"!==e.props.customSelectable&&e.props.selectableOnly&&e._toggleSelected()}}}),i.Common.Element.create(i.Bricks.Card,{className:this.getClassName("tileCard"),elevation:1,elevationHover:2,
colorSchema:this.props.selected?"orange":null,bgStyle:"outline",style:{borderWidth:this.props.selected?"2px":"1px",margin:"0"}
},this.props.isS&&this._renderButtonPanel(),"small"===this.props.tileType?this._getSmallInfoBox():this._getFullInfoBox()),i.Common.Element.create("div",{onClick:function(e){return e.stopPropagation()}
},this.props.selectableOnly?i.Common.Element.create(w,{name:this.props.data.id,ref_:this._setLightboxRef,data:P}):null)))}}),k=(n(14),{}),O={
popover:"\n    width: 100%;\n    max-height: 350px;\n    overflow-y: auto;\n  ",
link:"\n    && {\n      color: rgba(0,0,0, .87);\n      display: block;\n      padding: 8px 16px;\n      width: 100%;\n  \n      &:hover {\n        text-decoration: none;\n        background-color: #E0E0E0;\n      }\n    }\n  "
},R=function(e){return k[e]||(k[e]=b.css(O[e])),k[e]},M=function(e){if(!e.shown||!Array.isArray(e.items)||!e.items.length)return null;var t=e.items;return e.filterValue&&(t=t.filter((function(t){
return-1!==t.indexOf(e.filterValue)}))),Array.isArray(e.filterItems)&&(t=t.filter((function(t){return-1===e.filterItems.indexOf(t)}))),0===t.length?null:i.Common.Element.create(i.Bricks.Popover,{
shown:!0,fitHeightToViewport:!0,forceRender:!0,className:R("popover")},t.map((function(t){return i.Common.Element.create(i.Bricks.Link,{className:R("link"),colorSchema:"default",key:t,mainAttrs:{
onMouseDown:function(n){n.preventDefault(),e.onClick(t)}}},t)})))};M.displayName=o+"AutocompleteItems",M.tagName=o+"AutocompleteItems",M.defaultProps={filterValue:"",shown:!1};var N=M;function U(e){
return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return
;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e)
;if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){
(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var G=r.a.Common.VisualComponent.create({displayName:o+"TagsSelect",
mixins:[r.a.Common.BaseMixin,r.a.Common.ElementaryMixin,r.a.Forms.TextInputMixin],statics:{tagName:o+"TagsSelect",classNames:{main:function(){
return l+"TagsSelect "+b.css("align-items: baseline; .uu5-bricks-button.uu5-forms-input-button { width: auto; padding: 0 16px; }")},tag:function(){
return b.css("\n          && {\n            margin-right: 4px;\n            background-color: rgba(0, 0, 0, 0.1);\n            color: rgba(0, 0, 0, .87);\n\n            .uu5-bricks-icon {\n              font-size: inherit;\n              position: static;\n              padding: 0;\n            }\n          }\n        ")
},textButton:function(e,t){
return b.css("\n          input:-ms-input-placeholder { color: #bdbdbd; }\n          ".concat("top"===e.tagListPosition?"&&& { margin-bottom: 0px; }":"margin-bottom: 8px;","\n          ").concat(t.value&&t.value.length?"&&& { margin-top: 8px; }":"","\n        "))
}},lsi:{addButtonLabel:{cs:"Přidat",en:"Add"},tagIsAlreadyAdded:{cs:'Tag "$1" je již přidaný.',en:'The tag "$1" is already added.'},customTagIsNotAllowed:{cs:"Není povolené přidávat vlastní tagy.",
en:"It is not allowed to create custom tags."},tagIsNotAllowed:{cs:'Tag "$1" není povolený.',en:'The tag "$1" is not allowed.'},placeholder:{cs:"Název tagu",en:"Tag Name"},noTagInfoText:{
cs:"Vložte tag pomocí vstupního pole níže",en:"Insert a tag via input field lower"}}},propTypes:{availableTags:r.a.PropTypes.arrayOf(r.a.PropTypes.string),
ignoreTags:r.a.PropTypes.arrayOf(r.a.PropTypes.string),allowCustomTgas:r.a.PropTypes.bool,colorSchema:r.a.PropTypes.string,buttonColorSchema:r.a.PropTypes.string,onTagSelect:r.a.PropTypes.func,
tagListPosition:r.a.PropTypes.oneOf(["top","bottom"]),displayHint:r.a.PropTypes.bool},getDefaultProps:function(){return{availableTags:null,ignoreTags:null,allowCustomTags:!1,onTagSelect:null,
tagListPosition:"top",buttonColorSchema:"default",displayHint:!0}},getInitialState:function(){var e=this;return this._removeFnCache={},this._buttons=[{icon:"mdi-plus",
colorSchema:this.props.buttonColorSchema,onClick:function(){return e._addTagValue()},content:r.a.Common.Element.create(r.a.Bricks.ScreenSize,null,r.a.Common.Element.create(r.a.Bricks.ScreenSize.Item,{
screenSize:"xs"},r.a.Common.Element.create(r.a.Bricks.Icon,{icon:"mdi-plus"})),r.a.Common.Element.create(r.a.Bricks.ScreenSize.Item,{screenSize:"*"},this.getLsiComponent("addButtonLabel")))}],{
textValue:"",focused:!1}},componentWillMount:function(){this.setState({value:this.props.value||[]})},_buttons:void 0,_removeFnCache:void 0,_registerTextButton:function(e){this._textButton=e},
_getRemoveFn:function(e){var t=this;return this._removeFnCache[e]||(this._removeFnCache[e]=function(){t.setState((function(n){var i=n.value.filter((function(t){return t!==e}))
;if(i.length!==n.value.length)return delete t._removeFnCache[e],{value:i}}))}),this._removeFnCache[e]},_addTagValue:function(e){var t=this;this.setState((function(n){
if(e=void 0===e?n.textValue:e)if(t.props.ignoreTags&&-1!==t.props.ignoreTags.indexOf(e))t._textButton.setError(t.getLsiValue("tagIsNotAllowed").replace("$1",e));else if(n.value&&-1!==n.value.indexOf(e))t._textButton.setWarning(t.getLsiValue("tagIsAlreadyAdded").replace("$1",e));else{
if(t.props.allowCustomTags||t.props.availableTags&&-1!==t.props.availableTags.indexOf(e))return"function"==typeof t.props.onTagSelect?(t.props.onTagSelect({component:t,value:n.value,tag:e}),{
textValue:""}):(t._textButton.setInitial(""),{value:[].concat(U(n.value),[e]),textValue:""});t._textButton.setError(t.getLsiValue("customTagIsNotAllowed"))}}))},_updateTextValue:function(e){
var t=e.value;this.setState({textValue:t})},_onTextInputBlur:function(){this.setState({focused:!1})},_onTextInputFocus:function(){this.setState({focused:!0})},_renderTagList:function(){var e=this
;return this.state.value&&this.state.value.length?this.state.value.map((function(t,n){return r.a.Common.Element.create(r.a.Bricks.Label,{key:t,colorSchema:"custom",onClick:e._getRemoveFn(t),
icon:"mdi-close",className:e.getClassName("tag")},t)})):this.props.displayHint?r.a.Common.Element.create("span",{className:b.css("color: rgba(0, 0, 0, .24)")},this.getLsiValue("noTagInfoText")):null},
render:function(){var e=this.getId()+"-input"
;return r.a.Common.Element.create(r.a.Bricks.Div,this._getInputAttrs(),this.getLabel(e),this.getInputWrapper(r.a.Common.Element.create(r.a.Common.Fragment,null,"top"===this.props.tagListPosition&&this._renderTagList(),r.a.Common.Element.create(r.a.Forms.TextButton,{
colorSchema:this.props.colorSchema,key:"textButton",ref_:this._registerTextButton,buttons:this._buttons,actionOnEnter:!0,inputAttrs:{onFocus:this._onTextInputFocus,onBlur:this._onTextInputBlur},
onChange:this._updateTextValue,inline:!0,spacing:0,className:this.getClassName("textButton"),placeholder:this.getLsiValue("placeholder"),mainAttrs:{onKeyPress:function(e){
13!==(e.keyCode||e.which)||e.shiftKey||e.ctrlKey||e.preventDefault()}},value:this.state.textValue}),r.a.Common.Element.create(N,{key:"autocomplete-items",items:this.props.availableTags,
filterValue:this.state.textValue,filterItems:this.state.value,shown:this.state.focused,onClick:this._addTagValue}),"top"!==this.props.tagListPosition&&this._renderTagList())))}});n(15);function H(e){
return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||W(e)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){return function(e){
if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,s=void 0;try{
for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw s}}return n
}(e,t)||W(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
function W(e,t){if(e){if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),
"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}function q(e,t){(null==t||t>e.length)&&(t=e.length)
;for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Q=i.Common.VisualComponent.create({mixins:[i.Common.BaseMixin,i.Common.ElementaryMixin],statics:{tagName:o+"FileManagerTypeFilter",
classNames:{main:l+"file-manager-type-filter",leftCol:"left-col",rightCol:"right-col",label:"label",addTagFilterPanel:function(){
return b.css("\n          .uu5-bricks-panel-header {\n            display: none;\n          }\n\n          .uu5-bricks-panel-body-body {\n            padding: 0;\n          }\n        ")},
filterButton:function(){
return b.css("\n          && {\n            border-radius: 16px;\n          }\n\n          margin: 0 0 8px 8px;\n          \n          &:last-child{\n            margin-right: 0px;\n          }\n        ")
},addTagFilterSelect:function(){
return b.css("\n          &&& {\n            margin: 0;\n          }\n\n          .uu5-forms-input-wrapper > span:first-child {\n            display: none;\n          }\n\n          .uu5-forms-input-wrapper > .uu5-forms-text-button.uu5-forms-text-button {\n            margin-top: 0;\n          }\n        ")
},rightTagFilterPanelColumn:function(){return b.css("text-align: right; && { padding: 0; }")}},lsi:{addFilterButtonLabel:{cs:"Filtrovat podle tagu",en:"Filter by tag"},tagFilterButtonPrefix:{
cs:"Tag: ",en:"Tag: "}},opt:{nestingLevelWrapper:!0}},propTypes:{controller:i.PropTypes.object,fileTypeFilters:i.PropTypes.object,tags:i.PropTypes.arrayOf(i.PropTypes.string),
displayFilterByTags:i.PropTypes.bool},getDefaultProps:function(){return{fileTypeFilters:{image:{label:s.LSI_LABEL_FILE_MANAGER_FILTER_IMAGE,active:!1,types:["image","svg"]},text:{
label:s.LSI_LABEL_FILE_MANAGER_FILTER_TEXT,active:!1,types:["text","xml","pdf"]},other:{label:s.LSI_LABEL_FILE_MANAGER_FILTER_OTHER,active:!1,types:["other","archive","json"]}},tags:null,
displayFilterByTags:!0}},getInitialState:function(){var e=this;return this._bs={},this._filters={},this.props.fileTypeFilters&&Object.keys(this.props.fileTypeFilters).forEach((function(t){
if(e.props.fileTypeFilters.hasOwnProperty(t)&&e.props.fileTypeFilters[t].active)for(var n=0;n<e.props.fileTypeFilters[t].types.length;n++)e._filters[e.props.fileTypeFilters[t].types[n]]={visible:!0}
})),{buttons:this.props.fileTypeFilters,tagFilters:[]}},componentWillMount:function(){this.props.controller.registerBar("typeFilter",this)},componentDidMount:function(){this._buildFilter()},
componentWillUnmount:function(){this.props.controller.unregisterBar("typeFilter")},_filterFn:function(e){return this._filters[a(e.type).toLowerCase()]},_buildFilter:function(){var e=[]
;if(Object.entries(this._filters).forEach((function(t){var n=z(t,2),i=n[0];n[1].visible&&e.push(i)})),e.length>0){
var t=i.Common.Element.create(i.Bricks.Span,null,i.Common.Element.create(i.Bricks.Icon,{icon:"mdi-paw"})," ",e.join(", "));this.props.controller.addFilterExt("type",t,null,this._filterFn,null)
}else this.props.controller.removeFilterExt("type")},_handleClick:function(e){var t=this;return function(n){var i=t.state.buttons;if(i[e].active=!i[e].active,t.setState({buttons:i}),
i[e].active)for(var r=0;r<i[e].types.length;r++)t._filters[i[e].types[r]]={visible:!0};else for(var s=0;s<i[e].types.length;s++)delete t._filters[i[e].types[s]];t._buildFilter()}},
_registerBS:function(e,t){this._bs[e]=t},_registerAddTagFilterPanel:function(e){this._addTagFilterPanel=e},_shouldRenderCancel:function(){var e=!1
;if(this.state.tagFilters&&this.state.tagFilters.length)return!0;for(var t in this.state.buttons)if(this.state.buttons[t].active){e=!0;break}return e},_clearFilter:function(){
var e=this,t=this.state.buttons;for(var n in t)t[n].active=!1;this._filters={},this._buildFilter(),this.setState((function(n){return n.tagFilters.forEach((function(t){
return e.props.controller.removeFilterExt("tag-"+t)})),{buttons:t,tagFilters:[]}}))},_toggleAddFilterPanel:function(){this._addTagFilterPanel&&this._addTagFilterPanel.toggle()},
_closeTagFilterPanel:function(){this._addTagFilterPanel&&this._addTagFilterPanel.collapse()},_addTagFilter:function(e){var t=this,n=e.tag;this.setState((function(e){
if(-1===e.tagFilters.indexOf(n))return t.props.controller.addFilterExt("tag-"+n,n,null,(function(e){return e.binary.tagList&&-1!==e.binary.tagList.indexOf(n)})),{
tagFilters:[].concat(H(e.tagFilters),[n])}}))},_removeTagFilter:function(e){var t=this,n=e.props._tag;this.setState((function(e){return t.props.controller.removeFilterExt("tag-"+n),{
tagFilters:e.tagFilters.filter((function(e){return e!==n}))}}))},_filterIgnoreTags:function(e){var t=this
;return!e.binary.tagList||!Array.isArray(this.props.ignoreTags)||e.binary.tagList.every((function(e){return-1===t.props.ignoreTags.indexOf(e)}))},_renderButtonSwitches:function(){
var e=this,t=[],n=function(n){t.push(i.Common.Element.create(i.Bricks.ButtonSwitch,{key:"switch_button_"+n,className:e.getClassName("filterButton"),props:{onClick:e._handleClick(n)},ref_:function(t){
return e._registerBS(n,t)},switchedOn:e.state.buttons[n].active,content:a(e.state.buttons[n].label),onProps:{colorSchema:"primary"},offProps:{bgStyle:"outline",colorSchema:"primary"}}))}
;for(var r in this.state.buttons)n(r);return t},_renderTagFilters:function(){var e=this
;return this.props.tags&&this.props.displayFilterByTags?i.Common.Element.create(i.Common.Fragment,null,this.state.tagFilters.map((function(t){return i.Common.Element.create(i.Bricks.Button,{_tag:t,
key:t,className:e.getClassName("filterButton"),colorSchema:"primary",toggled:!0,onClick:e._removeTagFilter
},e.getLsiComponent("tagFilterButtonPrefix"),i.Common.Element.create(i.Bricks.Span,null,t),i.Common.Element.create(i.Bricks.Icon,{icon:"mdi-close"}))})),i.Common.Element.create(i.Bricks.Button,{
key:"addTagFilter",className:this.getClassName("filterButton"),onClick:this._toggleAddFilterPanel,colorSchema:"primary",bgStyle:"outline"},i.Common.Element.create(i.Bricks.Icon,{icon:"mdi-plus"
}),this.getLsiComponent("addFilterButtonLabel"))):null},_getAvailableTags:function(){var e=this;return this.props.tags.filter((function(t){return-1===e.state.tagFilters.indexOf(t)}))},
_getChild:function(){return i.Common.Element.create(i.Common.Fragment,null,i.Common.Element.create(i.Bricks.Div,this.getMainPropsToPass(),i.Common.Element.create(i.Bricks.Div,{
className:this.getClassName("leftCol")},i.Common.Element.create(i.Bricks.Span,{content:a(s.LSI_LABEL_FILE_MANAGER_FILTER_HEADER),className:this.getClassName("label")
}),this._renderButtonSwitches(),this._renderTagFilters()),this._shouldRenderCancel()&&i.Common.Element.create(i.Bricks.Div,{className:this.getClassName("rightCol")
},i.Common.Element.create(i.Bricks.Button,{bgStyle:"transparent",onClick:this._clearFilter,content:a(s.LSI_LABEL_FILE_MANAGER_FILTER_RESET)}))),i.Common.Element.create(i.Bricks.Panel,{
className:this.getClassName("addTagFilterPanel"),ref_:this._registerAddTagFilterPanel},i.Common.Element.create(i.Bricks.Well,{colorSchema:"blue"
},i.Common.Element.create(i.Bricks.Row,null,i.Common.Element.create(i.Bricks.Column,{colWidth:"xs-10 s-8 m-6 l-4"},i.Common.Element.create(G,{availableTags:this._getAvailableTags(),allowCustomTags:!0,
buttonColorSchema:"blue",onTagSelect:this._addTagFilter,className:this.getClassName("addTagFilterSelect")})),i.Common.Element.create(i.Bricks.Column,{colWidth:"xs-2 s-4 m-6 l-8",
className:this.getClassName("rightTagFilterPanelColumn")},i.Common.Element.create(i.Bricks.Button,{onClick:this._closeTagFilterPanel},i.Common.Element.create(i.Bricks.Icon,{icon:"mdi-chevron-up"
})))))))},render:function(){return this._getChild()}});function Y(e,t,n,i,r,s,a){try{var o=e[s](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function V(e){
return function(){var t=this,n=arguments;return new Promise((function(i,r){var s=e.apply(t,n);function a(e){Y(s,i,r,a,o,"next",e)}function o(e){Y(s,i,r,a,o,"throw",e)}a(void 0)}))}}var K=function(){
var e=V(regeneratorRuntime.mark((function e(t){var n,r,s,a,o,l,u,p,c,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:{},
s=r.outputQuality,a=r.outputMaxWidth,o=r.outputMaxHeight,l=r.outputType,J(t)){e.next=3;break}return e.abrupt("return",t);case 3:if(u=t,!a&&!o||!se(t)){e.next=15;break}return e.prev=5,e.next=8,
i.Imaging.Adjustment.resizeMax(u,a,o);case 8:p=e.sent,u=p.imageFile,e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(5),e.abrupt("return",Promise.reject({error:Object.assign(e.t0,{
code:"resizeFailed"})}));case 15:if(!(s&&ne(null===(n=te(t))||void 0===n?void 0:n.toLowerCase())||l)){e.next=20;break}return e.next=18,i.Imaging.Adjustment.changeType(u,l||"image/jpeg",s);case 18:
c=e.sent,u=c.imageFile;case 20:return e.abrupt("return",u);case 21:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),$=function(e){
return e?Math.min(131072,e):131072};function J(e){return e&&e.type&&!!e.type.match(/image\//)}function Z(e){var t,n,i="icon",r=!1,s=e.contentType,a=e.filename;return s.match(/\/svg/)?(t="svg",
n="mdi-file-image",i="original",r=!0):s.match(/image\//)?(t="image",n="mdi-file-image",i="thumbnail",r=!0):s.match(/\/pdf/)?(t="pdf",n="mdi-file-pdf",r=!0):s.match(/(\/html)|(\/xml)/)?(t="xml",
n="mdi-file-xml"):s.match(/(\/text$)|(^text\/)/)?(t="text",n="mdi-file-document"):s.match(/\/json/)?(t="json",
n="mdi-json"):a&&a.match(/(\.rar$)|(\.zip$)|(\.7z$)|(\.tgz$)|(\.tar$)|(\.tar\.gz$)/)?(t="archive",n="mdi-package"):(t="other",n="mdi-file"),{type:t,icon:n,thumbnail:i,clickable:r}}function X(e){var t
;try{t=URL.createObjectURL(e)}catch(e){t=void 0}return t}function ee(e){return new Promise((function(t,n){var i=new Image;i.src=X(e),i.onload=function(){t(i)},i.onerror=function(){
n(new Error("Image failed to load in <img> element."))}}))}function te(e){if(e&&J(e)){var t=e.name.split(".");return t[t.length-1]}}function ne(e){
return["jpg","jpeg","jpe","jif","jfif","jfi"].indexOf(e)>-1}function ie(e){return re.apply(this,arguments)}function re(){return(re=V(regeneratorRuntime.mark((function e(t){var n,r,s,a
;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=te(t))||void 0===n?void 0:n.toLowerCase(),(s=ne(r))||"png"!==r||!i.Imaging.Adjustment.getImageMetadata){
e.next=7;break}return e.next=5,i.Imaging.Adjustment.getImageMetadata(t);case 5:a=e.sent,s=!a.transparency&&"toJpg";case 7:return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)
})))).apply(this,arguments)}function se(e){var t,n=null===(t=te(e))||void 0===t?void 0:t.toLowerCase();return n&&"gif"!==n}var ae,oe,le,ue,pe,ce;n(8);function de(){
return(de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}
function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),
n.push.apply(n,i)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){fe(e,t,n[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))
}))}return e}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(e,t,n,i,r,s,a){try{var o=e[s](a),l=o.value}catch(e){
return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function ye(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var s=e.apply(t,n);function a(e){
ge(s,i,r,a,o,"next",e)}function o(e){ge(s,i,r,a,o,"throw",e)}a(void 0)}))}}function be(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var _e={
low:50,optimal:70,medium:85,original:-1},ve={optimal:!1,original:!0},Ce={feedback:void 0,message:void 0};function Te(e){return{file:e.file,adjustedFile:e.file,src:e.file?X(e.file):void 0,
quality:null==e.outputQuality?u:e.outputQuality,preserveDimensions:!1,code:void 0,tags:e.tagList,fileFeedback:Ce,codeFeedback:Ce,sizeFeedback:Ce,qualityFeedback:Ce,allowResize:!0,
canAdjustQuality:void 0}}var Ee,Se,Le=i.Common.VisualComponent.create({mixins:[i.Common.BaseMixin,i.Common.ElementaryMixin,i.Common.LsiMixin],statics:{tagName:o+"DnDBinaryFormRow",classNames:{
main:l+"dnd-form-row "+b.css(ae||(ae=be(["\n        padding: 24px 0;\n      "]))),label:l+"dnd-form-row-label",labelRequired:l+"dnd-form-row-label-required",fileInput:function(){
return b.css(oe||(oe=be(["\n        margin: 0;\n      "])))},flexWrapper:function(){return b.css(le||(le=be(["\n        display: flex;\n        padding-top: 8px;\n      "])))},inputs:function(){
return b.css(ue||(ue=be(["\n        flex: 1 1 0;\n\n        & > .uu5-forms-input {\n          &:first-child {\n            margin: 0;\n          }\n\n          &:not(:first-child) {\n            margin: 8px 0 0;\n          }\n        }\n      "])))
},imagePreview:function(){
return b.css(pe||(pe=be(["\n        position: relative;\n        flex-basis: ","px;\n        margin-left: 16px;\n        display: flex;\n        justify-content: center;\n      "])),112)},
imagePreviewMagnify:function(){
return b.css(ce||(ce=be(["\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        position: absolute;\n        top: 4px;\n        right: 4px;\n        width: 24px;\n        height: 24px;\n        opacity: 0.8;\n        background: #FFFFFF;\n        box-shadow: 0 2px 4px 0 rgba(0,0,0,0.50);\n        border-radius: 4px;\n        font-size: 18px;\n        pointer-events: none;\n      "])))
}},opt:{nestingLevelWrapper:!0}},propTypes:{},getInitialState:function(){return this._imageMaxWidth=this.props.outputMaxWidth||p,this._imageMaxHeight=this.props.outputMaxHeight||c,Te(this.props)},
componentDidMount:function(){this._adjustFile(),this._checkImageSize(),this._checkCanAdjustQuality()},componentWillReceiveProps:function(e){this._imageMaxWidth=e.outputMaxWidth||p,
this._imageMaxHeight=e.outputMaxHeight||c,this.props.file!==e.file&&(this.setState(Te(e),this._adjustFile),this._checkImageSize(),this._checkCanAdjustQuality(e.file))},focusCodeInput:function(){
this._codeRef&&this._codeRef.focus()},getValues:function(){return{originalFile:this.state.file,file:this.state.adjustedFile,code:this.state.code,tags:this.state.tags}},_registerCodeInput:function(e){
this._codeRef=e},_checkCanAdjustQuality:function(){var e=arguments,t=this;return ye(regeneratorRuntime.mark((function n(){var i,r;return regeneratorRuntime.wrap((function(n){
for(;;)switch(n.prev=n.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:t.props.file,n.next=3,ie(i);case 3:r=n.sent,t.setAsyncState({canAdjustQuality:r},(function(){
t.state.canAdjustQuality&&t._adjustFile()}));case 5:case"end":return n.stop()}}),n)})))()},_onChangeConversionQuality:function(e){var t=e.value,n=he({},Ce)
;"high"!==t&&"original"!==t||(n.feedback="warning",n.message=a(s.LSI_IMAGE_QUALITY_WARNING)),this.setState({quality:_e[t],qualityFeedback:n},this._adjustFile)},_onChangeQuality:function(e){
var t=e.value,n=he({},Ce);"original"===t&&(n.feedback="warning",n.message=a(s.LSI_IMAGE_QUALITY_WARNING)),this.setState({quality:_e[t],qualityFeedback:n},this._adjustFile)},
_onChangePreserveDimensions:function(e){var t=e.value,n=he({},Ce);"original"===t&&(n.feedback="warning",n.message=a(s.LSI_IMAGE_SIZE_WARNING)),this.setState({preserveDimensions:ve[t],sizeFeedback:n
},this._adjustFile)},_onChangeCode:function(e){var t=e.value;this.setState({code:t})},_onBlurCode:function(e){
var t,n=e.value,i=!n||!!n.match(/^([a-zA-Z0-9_]){3,64}$/g),r=!n||"function"!=typeof this.props.validateCodeUniqueness||this.props.validateCodeUniqueness(n),o=!(this.props.customCodesRequired&&!n),l=he({},Ce)
;i&&r&&o||(o?i?r||(t=s.LSI_DUPLICATE_CODE):t=s.LSI_INVALID_CODE:t=s.LSI_REQUIRED_CODE,l.feedback="error",l.message=a(t));this.setState({codeFeedback:l})},_onChangeTags:function(e){var t=e.value
;this.setState({tags:t})},_onChangeFile:function(e){var t=this,n=e.value;this.setState({file:n,adjustedFile:n,canAdjustQuality:void 0},(function(){t._adjustFile(),t._checkImageSize(),
t._checkCanAdjustQuality(t.state.file)}))},_checkImageSize:function(){var e=this;J(this.state.file)&&ee(this.state.file).then((function(t){if(e.isRendered()){
var n,i=t.naturalHeight||t.height,r=t.naturalWidth||t.width;e.setState((function(t){var s=i>e._imageMaxHeight||r>e._imageMaxWidth,a=t.allowResize!==s?{allowResize:s}:void 0;return n=!!a,a
}),(function(){return n?e._adjustFile():void 0}))}}))},_adjustFile:function(){
var e=this,t=this.state.file,n=this.state.preserveDimensions?void 0:this._imageMaxWidth,r=this.state.preserveDimensions?void 0:this._imageMaxHeight;if(t){
var s=this._runId=i.Common.Tools.generateUUID();K(t,{outputQuality:this.state.quality!==_e.original?this.state.quality/100:void 0,outputMaxWidth:null!=n&&this.state.allowResize?n:void 0,
outputMaxHeight:null!=r&&this.state.allowResize?r:void 0,outputType:this.state.quality!==_e.original&&"toJpg"===this.state.canAdjustQuality?"image/jpeg":void 0}).then((function(t){
if(e.isRendered()&&s===e._runId){var n={adjustedFile:t,src:X(t),fileFeedback:he({},Ce)};t&&t.size>1024*$(e.props.sizeLimit)?(n.fileFeedback.feedback="error",
n.fileFeedback.message=a(e.props.lsiLabels.fileSizeExceededError,{maxSize:$(e.props.sizeLimit)})):(n.fileFeedback.feedback="initial",n.fileFeedback.message=void 0),e.setState(n)}}))
}else this.setState(Te(he(he({},this.props),{},{file:t})))},render:function(){
var e=this.props,t=e.availableTags,n=e.allowCustomTags,r=e.customCodesRequired,o=e.ignoreTags,l=e.outputQuality,u=e.outputMaxHeight,p=e.outputMaxWidth,c=this.state,d=c.file,m=c.adjustedFile,h=c.quality,f=c.preserveDimensions,g=c.tags,y=c.code,b=c.src,_=c.fileFeedback,v=c.codeFeedback,C=c.sizeFeedback,T=c.qualityFeedback,E=c.allowResize,S=t||n,L=J(d),A=i.Common.Tools.getLsiValueByLanguage(s[r?"LSI_LABEL_ADD_BINARY_CODE_REQUIRED":"LSI_NOT_REQUIRED_CODE_PLACEHOLDER"],this.getLanguage())
;return t=Array.isArray(t)?t.map((function(e){return{value:e,content:e}})):void 0,i.Common.Element.create(i.Bricks.Row,this.getMainPropsToPass(),i.Common.Element.create(i.Forms.File,de({
className:this.getClassName("fileInput"),value:m,onChange:this._onChangeFile,required:!0},_)),i.Common.Element.create("div",{className:this.getClassName("flexWrapper")},i.Common.Element.create("div",{
className:this.getClassName("inputs")},this.props.customCodesEnabled?i.Common.Element.create(i.Forms.Text,de({ref_:this._registerCodeInput,inputAttrs:{autoComplete:"off"},required:r,
requiredMessage:r&&a(s.LSI_LABEL_ADD_BINARY_CODE_REQUIRED),value:y,onChange:this._onChangeCode,onBlur:this._onBlurCode,placeholder:A},v)):null,S?i.Common.Element.create(i.Forms.TagSelect,{
availableTags:t,ignoreTags:o,allowCustomTags:n,value:g,onChange:this._onChangeTags,multiple:!0}):null,null==l&&"toJpg"===this.state.canAdjustQuality?i.Common.Element.create(i.Forms.Select,de({
value:Object.keys(_e).find((function(e){return h===_e[e]})),onChange:this._onChangeConversionQuality},T),i.Common.Element.create(i.Forms.Select.Option,{value:"optimal",
content:a(s.LSI_IMAGE_QUALITY_TO_JPG_OPTIMAL)}),i.Common.Element.create(i.Forms.Select.Option,{value:"medium",content:a(s.LSI_IMAGE_QUALITY_TO_JPG_MEDIUM)
}),i.Common.Element.create(i.Forms.Select.Option,{value:"original",content:a(s.LSI_IMAGE_QUALITY_ORIGINAL_PNG)})):null==l&&this.state.canAdjustQuality?i.Common.Element.create(i.Forms.Select,de({
value:Object.keys(_e).find((function(e){return h===_e[e]})),onChange:this._onChangeQuality},T),i.Common.Element.create(i.Forms.Select.Option,{value:"low",content:a(s.LSI_IMAGE_QUALITY_LOW)
}),i.Common.Element.create(i.Forms.Select.Option,{value:"optimal",content:a(s.LSI_IMAGE_QUALITY_OPTIMAL)}),i.Common.Element.create(i.Forms.Select.Option,{value:"medium",
content:a(s.LSI_IMAGE_QUALITY_MEDIUM)}),i.Common.Element.create(i.Forms.Select.Option,{value:"original",content:a(s.LSI_IMAGE_QUALITY_ORIGINAL)
})):null,u||p||!se(d)?null:i.Common.Element.create(i.Forms.Select,de({value:E?Object.keys(ve).find((function(e){return f===ve[e]})):"original",onChange:this._onChangePreserveDimensions,disabled:!E
},C),i.Common.Element.create(i.Forms.Select.Option,{value:"optimal",content:a(s.LSI_IMAGE_SIZE_OPTIMAL)}),i.Common.Element.create(i.Forms.Select.Option,{value:"original",
content:a(s.LSI_IMAGE_SIZE_ORIGINAL)}))),L?i.Common.Element.create("div",{className:this.getClassName("imagePreview")},i.Common.Element.create(i.Imaging.Image,{src:b,width:112,height:112,
fit:"coverNoScaleUp"}),i.Common.Element.create(i.Bricks.Icon,{icon:"mdi-magnify-plus-outline",className:this.getClassName("imagePreviewMagnify")})):null))}});function Ae(){
return(Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}
function xe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Be=i.Common.VisualComponent.create({
mixins:[i.Common.BaseMixin,i.Common.ElementaryMixin],statics:{tagName:o+"DnDBinaryForm",classNames:{main:l+"dnd-form",row:l+"dnd-form-row "+b.css(Ee||(Ee=xe(["\n        padding: 24px 0;\n      "]))),
rowLabel:l+"dnd-form-row-label",rowLabelRequired:l+"dnd-form-row-label-required",formItem:b.css(Se||(Se=xe(["\n        &&& {\n          margin: 8px 0 0;\n        }\n      "])))},opt:{
nestingLevelWrapper:!0}},propTypes:{done:i.PropTypes.func,onCancel:i.PropTypes.func,fileList:i.PropTypes.oneOfType([i.PropTypes.object,i.PropTypes.array]),lsiLabels:i.PropTypes.object,
customCodesEnabled:i.PropTypes.bool,customCodesRequired:i.PropTypes.bool,outputMaxHeight:i.PropTypes.number,outputMaxWidth:i.PropTypes.number,outputQuality:i.PropTypes.number,
ignoreTags:i.PropTypes.arrayOf(i.PropTypes.string),availableTags:i.PropTypes.arrayOf(i.PropTypes.string),allowCustomTags:i.PropTypes.bool,validateCodeUniqueness:i.PropTypes.func},
getDefaultProps:function(){return{}},getInitialState:function(){return this._rowRefs=[],{}},componentDidMount:function(){var e=this;setTimeout((function(){
return e._rowRefs[0]&&e._rowRefs[0].focusCodeInput()}),200)},getForm:function(){return this._form},_onSave:function(){for(var e=[],t=0;t<this._rowRefs.length;t++)e.push(this._rowRefs[t].getValues())
;this.props.done(e),this.props.onCancel()},_getRows:function(){
for(var e=this,t=this.props.outputQuality?100*this.props.outputQuality:void 0,n=!this.props.fileList||Array.isArray(this.props.fileList)?this.props.fileList:[this.props.fileList],r=[],s=function(s){
var a=n[s];r.push(i.Common.Element.create(Le,{file:a,key:s+"-row",ref_:function(t){return e._rowRefs[s]=t},lsiLabels:e.props.lsiLabels,customCodesEnabled:e.props.customCodesEnabled,
customCodesRequired:e.props.customCodesRequired,outputMaxHeight:e.props.outputMaxHeight,outputMaxWidth:e.props.outputMaxWidth,outputQuality:t,ignoreTags:e.props.ignoreTags,
availableTags:e.props.availableTags,allowCustomTags:e.props.allowCustomTags,sizeLimit:e.props.sizeLimit,validateCodeUniqueness:e.props.validateCodeUniqueness,tagList:a?a.tagList:void 0})),
s<n.length-1&&r.push(i.Common.Element.create(i.Bricks.Line,{key:s+"-line"}))},a=0;a<n.length;a++)s(a);return r},render:function(){var e=this
;return i.Common.Element.create(i.Forms.Form,Ae({},this.getMainPropsToPass(),{onSave:function(t){var n=t.component,i=t.values;return e._onSave(n,i)},onCancel:this.props.onCancel,ref_:function(t){
return e._form=t}}),this._getRows())}});n(18);function Ie(){return(Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]
;for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var De=i.Common.VisualComponent.create({mixins:[i.Common.BaseMixin,i.Common.ElementaryMixin],
statics:{tagName:o+"UpdateFileForm",classNames:{main:l+"update-file-form"},opt:{nestingLevelWrapper:!0}},propTypes:{done:i.PropTypes.func,onSuccess:i.PropTypes.func,onCancel:i.PropTypes.func,
addThumbnail:i.PropTypes.func,removeThumbnail:i.PropTypes.func,thumbnail:i.PropTypes.object,binary:i.PropTypes.object,file:i.PropTypes.object,baseUri:i.PropTypes.string,
cmdUpdateBinaryData:i.PropTypes.oneOfType([i.PropTypes.func,i.PropTypes.string]),cmdCreateThumbnail:i.PropTypes.oneOfType([i.PropTypes.func,i.PropTypes.string]),
cmdUpdateThumbnailData:i.PropTypes.oneOfType([i.PropTypes.func,i.PropTypes.string]),cmdDeleteThumbnail:i.PropTypes.oneOfType([i.PropTypes.func,i.PropTypes.string]),
shouldSaveThumbnail:i.PropTypes.bool,lsiLabels:i.PropTypes.object,currentControls:i.PropTypes.func,outputMaxHeight:i.PropTypes.number,outputMaxWidth:i.PropTypes.number,
outputQuality:i.PropTypes.number,validateCodeUniqueness:i.PropTypes.func},getDefaultProps:function(){return{}},getForm:function(){return this._form.getForm()},_registerForm:function(e){this._form=e},
_onDone:function(e){var t,n=this,i=e[0],r=i.file,s=i.originalFile,a=J(r);t=this.props.shouldSaveThumbnail&&(a||this.props.thumbnail)?!a&&this.props.thumbnail?this._deleteThumbnail:function(e){
return n._saveThumbnail(e,s)}:this._saveDone;var o=this._sendFail,l={code:this.props.binary.code,data:r};if(l.sys={rev:this.props.binary.sys.rev},
"function"==typeof this.props.cmdUpdateBinaryData)this.props.cmdUpdateBinaryData(l).then(t,o);else{var u={data:l,done:t,fail:o}
;y.customPostMultipartCmd(this.props.baseUri,this.props.cmdUpdateBinaryData,u)}},_saveThumbnail:function(e,t){var n=this;K(t,{outputMaxHeight:512,outputMaxWidth:512,outputQuality:.85
}).then((function(t){var r={done:function(t){n.props.addThumbnail(t),n._saveDone(e)},fail:function(){i.Common.Tools.warning("Saving image thumbnail failed."),n._saveDone(e)},data:{
code:(e.code.length>61?e.code.substr(0,61):e.code)+"_th",data:t}};n.props.thumbnail?(r.data.sys={rev:n.props.thumbnail.sys.rev},
"function"==typeof n.props.cmdUpdateThumbnailData?n.props.cmdUpdateThumbnailData(r.data).then(r.done,r.fail):y.customPostMultipartCmd(n.props.baseUri,n.props.cmdUpdateThumbnailData,r)):"function"==typeof n.props.cmdCreateThumbnail||"function"==typeof n.props.cmdCreateThumbnail?n.props.cmdCreateThumbnail(r.data).then(r.done,r.fail):y.customPostMultipartCmd(n.props.baseUri,n.props.cmdCreateThumbnail,r)
}))},_deleteThumbnail:function(e){var t=this,n={done:function(){t.props.removeThumbnail(t._getSafeThumbnailCode(t.props.binary.code)),t._saveDone(e)},fail:function(){
i.Common.Tools.warning("Delete image thumbnail failed."),t._saveDone(e)},data:{code:this._getSafeThumbnailCode(this.props.binary.code)}}
;"function"==typeof this.props.cmdDeleteThumbnail?this.props.cmdDeleteThumbnail(n.data).then(n.done,n.fail):y.customPostCmd(this.props.baseUri,this.props.cmdDeleteThumbnail,n)},
_getSafeThumbnailCode:function(e){return(e.length>61?e.substr(0,61):e)+"_th"},_sendFail:function(e){this.props.currentControls()&&this.props.currentControls().setDisabledButton(!1);var t=null
;if(e.error)if(e.error&&e.error.cause&&e.error.cause.uuAppErrorMap["uu-app-objectstore/invalidRevision"]){var n=e.error.code+"/invalidRevision";t=a(s.commandErrors[n]||s.commandErrors.default)
}else t=a(s.commandErrors[e.error.code]||s.commandErrors.default);else t=e.toString();this._form.getAlertBus().setAlert({content:t,colorSchema:"danger"})},_saveDone:function(e,t){
this.props.onSuccess&&this.props.onSuccess(e),this.props.done&&this.props.done(e,t),this._form.disable()},render:function(){return i.Common.Element.create(Be,Ie({},this.getMainPropsToPass(),{
done:this._onDone,onCancel:this.props.onCancel,fileList:[this.props.file],baseUri:this.props.baseUri,lsiLabels:this.props.lsiLabels,outputMaxHeight:this.props.outputMaxHeight,
outputMaxWidth:this.props.outputMaxWidth,outputQuality:this.props.outputQuality,validateCodeUniqueness:this.props.validateCodeUniqueness,ref_:this._registerForm}))}});n(20);function Pe(){
return(Pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}
function we(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return
;if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e)
;if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fe(e,t)}(e)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){
(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ke=i.Common.VisualComponent.create({mixins:[i.Common.BaseMixin,i.Common.ElementaryMixin],statics:{
tagName:o+"UpdateBinaryForm",classNames:{main:l+"update-binary-form"},opt:{nestingLevelWrapper:!0}},propTypes:{done:i.PropTypes.func,onSuccess:i.PropTypes.func,onCancel:i.PropTypes.func,
binary:i.PropTypes.object.isRequired,baseUri:i.PropTypes.string,cmdUpdateBinary:i.PropTypes.oneOfType([i.PropTypes.func,i.PropTypes.string]).isRequired,currentControls:i.PropTypes.func.isRequired,
ignoreTags:i.PropTypes.arrayOf(i.PropTypes.string),availableTags:i.PropTypes.arrayOf(i.PropTypes.string),allowCustomTags:i.PropTypes.bool,onTagCreate:i.PropTypes.func},getDefaultProps:function(){
return{}},getForm:function(){return this._form},_callUpdateBinary:function(e){var t={code:this.props.binary.code,tagList:e.tagList||[],sys:this.props.binary.sys},n=this._saveDone,i=this._sendFail
;if("function"==typeof this.props.cmdUpdateBinary)this.props.cmdUpdateBinary(t).then(n,i);else{var r={data:t,done:n,fail:i};y.customPostCmd(this.props.baseUri,this.props.cmdUpdateBinary,r)}},
_onSave:function(e){e.component;var t=e.values;this.props.currentControls()&&this.props.currentControls().setDisabledButton(!0),this._callUpdateBinary(t)},_sendFail:function(e){
this.props.currentControls()&&this.props.currentControls().setDisabledButton(!1);var t=null;if(e.error)if(e.error&&e.error.cause&&e.error.cause.uuAppErrorMap["uu-app-objectstore/invalidRevision"]){
var n=e.error.code+"/invalidRevision";t=a(s.commandErrors[n]||s.commandErrors.default)}else t=a(s.commandErrors[e.error.code]||s.commandErrors.default);else t=e.toString()
;this._form.getAlertBus().setAlert({content:t,colorSchema:"danger"})},_saveDone:function(e,t){if(this.props.onTagCreate&&e.tagList){
var n=[],i=this.props.binary.tagList||[],r=this.props.availableTags||[];i||r.length?e.tagList.forEach((function(e){-1===i.indexOf(e)&&-1===r.indexOf(e)&&n.push(e)})):n=we(e.tagList),
n.length&&this.props.onTagCreate(n)}this.props.onSuccess&&this.props.onSuccess(e),this.props.done&&this.props.done(e,t)},render:function(){
var e=this,t=Array.isArray(this.props.availableTags)?this.props.availableTags.map((function(e){return{value:e,content:e}})):void 0
;return i.Common.Element.create(i.Forms.Form,Pe({},this.getMainPropsToPass(),{onSave:this._onSave,onCancel:this.props.onCancel,ref_:function(t){return e._form=t},spacing:8
}),i.Common.Element.create(i.Forms.TagSelect,{label:i.Common.Element.create(i.Bricks.Lsi,{lsi:s.LSI_LABEL_ADD_TAGS}),availableTags:t,ignoreTags:this.props.ignoreTags,
allowCustomTags:this.props.allowCustomTags,name:"tagList",value:this.props.binary.tagList,labelColWidth:"xs-12",inputColWidth:"xs-12",multiple:!0}))}});n(22);function Oe(){
return(Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}
function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){
return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){
var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ne(e,t,n){
return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ue=i.Common.VisualComponent.create({
mixins:[i.Common.BaseMixin,i.Common.ElementaryMixin,i.Common.CcrReaderMixin],statics:{tagName:o+"DeleteFileForm",classNames:{main:l+"delete-file-form"},opt:{nestingLevelWrapper:!0}},propTypes:{
done:i.PropTypes.func,onSuccess:i.PropTypes.func,onCancel:i.PropTypes.func,binary:i.PropTypes.object,thumbnail:i.PropTypes.object,removeThumbnail:i.PropTypes.func,baseUri:i.PropTypes.string,
cmdDeleteBinary:i.PropTypes.oneOfType([i.PropTypes.func,i.PropTypes.string]),cmdDeleteThumbnail:i.PropTypes.oneOfType([i.PropTypes.func,i.PropTypes.string]),shouldSaveThumbnail:i.PropTypes.bool,
lsiLabels:i.PropTypes.object,currentControls:i.PropTypes.func},getDefaultProps:function(){return{}},getForm:function(){return this._form},_onSave:function(){
this.props.currentControls()&&this.props.currentControls().setDisabledButton(!0);var e=this.props.shouldSaveThumbnail&&this.props.thumbnail?this._deleteThumbnail:this._saveDone,t=this._sendFail,n={
code:this.props.binary.code};if("function"==typeof this.props.cmdDeleteBinary)this.props.cmdDeleteBinary(n).then(e,t);else{var i={data:n,done:e,fail:t}
;y.customPostCmd(this.props.baseUri,this.props.cmdDeleteBinary,i)}},_deleteThumbnail:function(e){var t=this,n={done:function(){t.props.removeThumbnail(t.props.thumbnail.code),t._saveDone(e)},
fail:function(){i.Common.Tools.warning("Delete image thumbnail failed."),t._saveDone(e)},data:{code:this.props.thumbnail.code}}
;"function"==typeof this.props.cmdDeleteThumbnail?this.props.cmdDeleteThumbnail(n.data).then(n.done,n.fail):y.customPostCmd(this.props.baseUri,this.props.cmdDeleteThumbnail,n)},_sendFail:function(e){
this.props.currentControls()&&this.props.currentControls().setDisabledButton(!1);var t=null;if(e.error&&e.error.cause&&e.error.cause.uuAppErrorMap["uu-app-objectstore/invalidRevision"]){
var n=e.error.code+"/invalidRevision";t=a(s.commandErrors[n]||s.commandErrors.default)}else t=a(s.commandErrors[e.error.code]||s.commandErrors.default);this._form.getAlertBus().setAlert({content:t,
colorSchema:"danger"})},_saveDone:function(e,t){var n=this;this.props.onSuccess&&this.props.onSuccess(this.props.binary.code),this.props.done&&this.props.done(e,t),
this.getCcrComponentByKey(i.Environment.CCRKEY_PAGE)&&this.getCcrComponentByKey(i.Environment.CCRKEY_PAGE).getAlertBus().clearAlerts((function(){
n.getCcrComponentByKey(i.Environment.CCRKEY_PAGE)&&n.getCcrComponentByKey(i.Environment.CCRKEY_PAGE).getAlertBus&&n.getCcrComponentByKey(i.Environment.CCRKEY_PAGE).getAlertBus()&&n.getCcrComponentByKey(i.Environment.CCRKEY_PAGE).getAlertBus().setAlert({
content:a(s.LSI_LABEL_DELETE_BINARY_SUCCESS_CONFIRM_MSG),colorSchema:"success",closeTimer:3e3})}))},_onValidate:function(e){},_getChild:function(){var e,t=this
;if("string"==typeof(e="string"==typeof this.props.lsiLabels.deleteBinaryFormContent?this.props.lsiLabels.deleteBinaryFormContent:function(e){for(var t=1;t<arguments.length;t++){
var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){Ne(e,t,n[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))
}))}return e
}({},this.props.lsiLabels.deleteBinaryFormContent)))e=e.replace("${filename}",this.props.binary.filename);else if("object"===Re(e))for(var n in e)e.hasOwnProperty(n)&&(e[n]=e[n].replace("${filename}",this.props.binary.filename))
;var r=a(e);return i.Common.Element.create(i.Forms.Form,Oe({},this.getMainPropsToPass(),{onSave:function(e){var n=e.component,i=e.values;return t._onSave(n,i)},onCancel:this.props.onCancel,
ref_:function(e){return t._form=e}}),i.Common.Element.create(i.Bricks.P,Oe({},this.getMainPropsToPass(),{content:r})))},render:function(){return this._getChild()}}),je=(n(24),
i.Common.VisualComponent.create({mixins:[i.Common.BaseMixin,i.Common.ElementaryMixin],statics:{tagName:o+"PreviewFileForm",classNames:{main:l+"preview-file-form"},opt:{nestingLevelWrapper:!0}},
propTypes:{code:i.PropTypes.string,done:i.PropTypes.func,onCancel:i.PropTypes.func,rev:i.PropTypes.oneOfType([i.PropTypes.string,i.PropTypes.number]),baseUri:i.PropTypes.string,
cmdGetBinaryData:i.PropTypes.string},getDefaultProps:function(){return{}},getInitialState:function(){return this.props.cmdGetBinaryData&&this.props.code&&this._updateImageSrc(),{error:!1,src:null}},
componentWillReceiveProps:function(e){e.cmdGetBinaryData===this.props.cmdGetBinaryData&&e.code===this.props.code||this._updateImageSrc(e)},getForm:function(){return this._form},
hasUnsavedChanges:function(){return!1},_updateImageSrcDone:function(e){this.setState((function(t){return t.src&&t.src.match(/^blob:/)&&window.URL.revokeObjectURL(t.src),{
src:e.match(/^blob:/)?window.Url.createObjectURL(e):e}}))},_updateImageSrc:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n={code:t.code}
;"function"==typeof t.cmdGetBinaryData?t.cmdGetBinaryData(n).then(this._updateImageSrcDone,this._updateImageSrcDone):(e=(e=y.getCommandUri(t.baseUri,t.cmdGetBinaryData,n))+"&"+t.rev,
this._updateImageSrcDone(e))},_onSave:function(){this.props.done&&this.props.done()},_renderImage:function(){var e=this;return i.Common.Element.create(i.Bricks.Image,{mainAttrs:{onError:function(){
return e.setState({error:!0})}},responsive:!0,src:this.state.src,authenticate:!0})},_renderError:function(){return i.Common.Element.create(i.Bricks.Div,{
content:a(s.LSI_LABEL_FILE_MANAGER_PREVIEW_ERROR)})},_getChild:function(){
return i.Common.Element.create(i.Bricks.Div,this.getMainPropsToPass(),this.state.error?this._renderError():this._renderImage())},render:function(){return this._getChild()}}));n(26);function Ge(){
return(Ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}
var He=i.Common.VisualComponent.create({mixins:[i.Common.BaseMixin,i.Common.ElementaryMixin,i.Common.CcrReaderMixin],statics:{tagName:o+"ShareFileForm",classNames:{main:l+"share-file-form",
radioLabel:l+"share-file-form-radio-label"},opt:{nestingLevelWrapper:!0}},propTypes:{binary:i.PropTypes.object,done:i.PropTypes.func,onCancel:i.PropTypes.func,settings:i.PropTypes.array},
getDefaultProps:function(){return{}},getInitialState:function(){return{option:"1"}},getForm:function(){return this._form},hasUnsavedChanges:function(){return!1},_copyToClipboard:function(e){
var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(e){i.Common.Tools.warning("Oops, unable to copy",e)}
document.body.removeChild(t)},_onSave:function(){var e=this;this._embeddedText&&this._copyToClipboard(this._embeddedText.getValue()),this.props.done&&this.props.done(),
this.getCcrComponentByKey(i.Environment.CCRKEY_PAGE).getAlertBus().clearAlerts((function(){
e.getCcrComponentByKey(i.Environment.CCRKEY_PAGE)&&e.getCcrComponentByKey(i.Environment.CCRKEY_PAGE).getAlertBus&&e.getCcrComponentByKey(i.Environment.CCRKEY_PAGE).getAlertBus()&&e.getCcrComponentByKey(i.Environment.CCRKEY_PAGE).getAlertBus().setAlert({
content:a(s.LSI_LABEL_SHARE_BINARY_SUCCESS_CONFIRM_MSG),colorSchema:"success",closeTimer:3e3})}))},_getOutput:function(){var e=this.props.settings[parseInt(this.state.option)-1].value
;if("function"==typeof e)e=e(this.props.binary);else{var t=e.match(/\${[^(})]*}/g);if(t)for(var n=0;n<t.length;n++){
var i=t[n].substr(2,t[n].length-3).split(".").reduce(this._getVarOnKey,this.props.binary);e=e.replace(t[n],null!=i?i:"")}}return e},_getVarOnKey:function(e,t){return e[t]},_getChild:function(){
for(var e=this,t=i.Common.Tools.findComponent("UuApp.DesignKit.EmbeddedText",{ref_:function(t){e._embeddedText=t},header:a(s.LSI_LABEL_FILE_MANAGER_SHARE_TEXT),level:6,showCopyButton:!1,
codeStyle:this.props.settings[parseInt(this.state.option)-1].codeStyle||"text",content:this._getOutput()}),n=[],r=0;r<this.props.settings.length;r++)n.push({label:a(this.props.settings[r].label),
name:(r+1).toString(),value:this.state.option===(r+1).toString()});return i.Common.Element.create(i.Forms.Form,Ge({},this.getMainPropsToPass(),{onSave:function(t){var n=t.component,i=t.values
;return e._onSave(n,i)},onCancel:this.props.onCancel,ref_:function(t){return e._form=t}}),i.Common.Element.create(i.Bricks.Div,null,i.Common.Element.create(i.Bricks.Div,{
content:a(s.LSI_LABEL_FILE_MANAGER_SHARE_RADIO_LABEL),className:this.getClassName("radioLabel")}),i.Common.Element.create(i.Forms.Radios,{value:n,onChange:function(t){e.setState({option:t.value})}
}),t))},render:function(){return this._getChild()}}),ze=(n(28),i.Common.VisualComponent.create({mixins:[i.Common.BaseMixin,i.Common.ElementaryMixin],statics:{tagName:o+"Controls",classNames:{
main:l+"controls",codeButtons:l+"controls-code-buttons"},opt:{nestingLevelWrapper:!0}},propTypes:{formComponent:i.PropTypes.func,hasDelete:i.PropTypes.bool,
label:i.PropTypes.oneOfType([i.PropTypes.string,i.PropTypes.object])},getDefaultProps:function(){return{hasDelete:!1}},getInitialState:function(){return{disabledButton:!1}},
setDisabledButton:function(e){this.setState({disabledButton:e})},_save:function(e){
return this.props.formComponent()&&this.props.formComponent().getForm()&&this.props.formComponent().getForm().isValid()&&this.props.formComponent()&&this.props.formComponent().getForm()&&this.props.formComponent().getForm().save(),
this},_getMainPropsToPass:function(){var e=this.getMainPropsToPass();return e.disabled=!1,e},_getButtons:function(){var e=this;return[i.Common.Element.create(i.Bricks.Button,{onClick:function(){
return e.props.formComponent().getForm()&&e.props.formComponent().getForm().cancel()},content:a(s.LSI_LABEL_BUTTON_CANCEL),disabled:this.isDisabled(),key:"Cancel"
}),i.Common.Element.create(i.Bricks.Button,{colorSchema:this.props.hasDelete?"danger":"primary",onClick:this._save,
content:a(this.props.label?this.props.label:this.props.hasDelete?s.LSI_LABEL_BUTTON_DELETE:s.LSI_LABEL_BUTTON_SAVE),disabled:this.isDisabled()||this.state.disabledButton,key:"Submit"})]},
render:function(){return i.Common.Element.create(i.Common.Div,this._getMainPropsToPass(),this._getButtons())}}));n(30);function We(){return(We=Object.assign||function(e){
for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}
var qe,Qe,Ye,Ve=i.Common.VisualComponent.create({mixins:[i.Common.BaseMixin,i.Common.CcrReaderMixin],statics:{tagName:o+"FormController",classNames:{main:l+"form-controller",
modalHeader:l+"form-controller-modal-header",alignRight:function(){return b.css("text-align: right;")}},opt:{nestingLevelWrapper:!0}},propTypes:{settings:i.PropTypes.object,
lsiLabels:i.PropTypes.object,allowCustomTags:i.PropTypes.bool,ignoreTags:i.PropTypes.arrayOf(i.PropTypes.string),availableTags:i.PropTypes.arrayOf(i.PropTypes.string),onTagCreate:i.PropTypes.func,
sizeLimit:i.PropTypes.number,validateCodeUniqueness:i.PropTypes.func},getDefaultProps:function(){return{settings:{},allowCustomTags:!1,ignoreTags:void 0,onTagCreate:void 0,availableTags:void 0,
sizeLimit:void 0,validateCodeUniqueness:void 0}},getInitialState:function(){return this._initialDomNode=null,{forceRender:void 0}},componentDidMount:function(){
for(var e=this._initialDomNode;e&&e.tagName&&!e.classList.contains("uu5-bricks-modal");)e=e.parentNode;this.setState({forceRender:!(!e||!e.tagName)})},openDnDForm:function(e,t,n){var r=this,o={
header:i.Common.Element.create(i.Bricks.Div,{className:this.getClassName("modalHeader"),content:a(this.props.lsiLabels.addBinariesFormHeader||s.LSI_LABEL_ADD_BINARIES)}),
content:i.Common.Element.create(Be,We({ref_:function(e){r._currentForm=e},id:i.Common.Tools.generateUUID(),done:function(e){return r._onSaveDndForm(e,t)},fileList:e,onCancel:this._closeModal,
lsiLabels:this.props.lsiLabels,ignoreTags:this.props.ignoreTags,availableTags:this.props.availableTags,allowCustomTags:this.props.allowCustomTags,onTagCreate:this.props.onTagCreate,
sizeLimit:this.props.sizeLimit,outputMaxHeight:this.props.settings.outputMaxHeight,outputMaxWidth:this.props.settings.outputMaxWidth,outputQuality:this.props.settings.outputQuality,
validateCodeUniqueness:this.props.validateCodeUniqueness},n)),onClose:function(){return r._closeModal()},footer:i.Common.Element.create(ze,{formComponent:this._getCurrentForm,
className:this.getClassName("alignRight")}),sticky:!1,size:"m",overflow:!0};this._openModal(o)},openUpdateBinaryForm:function(e,t,n,r,s,o){var l=this,u={header:i.Common.Element.create(i.Bricks.Div,{
className:this.getClassName("modalHeader"),content:a(this.props.lsiLabels.updateBinaryFormHeader)}),content:i.Common.Element.create(De,{ref_:function(e){l._currentForm=e},
id:i.Common.Tools.generateUUID(),file:e,done:this._closeModal,thumbnail:n,addThumbnail:r,removeThumbnail:s,binary:t,onCancel:this._closeModal,onSuccess:o,baseUri:this.props.settings.baseUri,
cmdUpdateBinaryData:this.props.settings.uuCmdUpdateBinaryData,cmdCreateThumbnail:this.props.settings.uuCmdCreateThumbnail,cmdUpdateThumbnailData:this.props.settings.uuCmdUpdateThumbnailData,
cmdDeleteThumbnail:this.props.settings.uuCmdDeleteThumbnail,shouldSaveThumbnail:"none"!==this.props.settings.thumbnailStrategy,lsiLabels:this.props.lsiLabels,currentControls:this._getCurrentControls,
outputMaxHeight:this.props.settings.outputMaxHeight,outputMaxWidth:this.props.settings.outputMaxWidth,outputQuality:this.props.settings.outputQuality,sizeLimit:this.props.sizeLimit,
validateCodeUniqueness:this.props.validateCodeUniqueness}),onClose:this._closeModal,footer:i.Common.Element.create(ze,{ref_:function(e){return l._currentControls=e},formComponent:this._getCurrentForm,
className:this.getClassName("alignRight")}),sticky:!1,size:"m",overflow:!0};this._openModal(u)},openUpdateBinaryMetaDataForm:function(e,t){var n=this,r={header:i.Common.Element.create(i.Bricks.Div,{
className:this.getClassName("modalHeader"),content:a(this.props.lsiLabels.updateBinaryMetaDataFormHeader)}),content:i.Common.Element.create(ke,{ref_:function(e){n._currentForm=e},
id:i.Common.Tools.generateUUID(),done:this._closeModal,binary:e,onCancel:this._closeModal,onSuccess:t,baseUri:this.props.settings.baseUri,cmdUpdateBinary:this.props.settings.uuCmdUpdateBinary,
currentControls:this._getCurrentControls,ignoreTags:this.props.ignoreTags,availableTags:this.props.availableTags,allowCustomTags:this.props.allowCustomTags,onTagCreate:this.props.onTagCreate}),
onClose:function(){return n._closeModal()},footer:i.Common.Element.create(ze,{ref_:function(e){return n._currentControls=e},id:i.Common.Tools.generateUUID(),formComponent:this._getCurrentForm,
className:this.getClassName("alignRight")}),sticky:!1,size:"m",overflow:!0};this._openModal(r)},openDeleteBinaryForm:function(e,t,n,r){var s=this,o={header:i.Common.Element.create(i.Bricks.Div,{
className:this.getClassName("modalHeader"),content:a(this.props.lsiLabels.deleteBinaryFormHeader)}),content:i.Common.Element.create(Ue,{ref_:function(e){s._currentForm=e},
id:i.Common.Tools.generateUUID(),binary:e,filename:e.filename,thumbnail:t,removeThumbnail:n,onSuccess:r,done:this._closeModal,onCancel:this._closeModal,baseUri:this.props.settings.baseUri,
cmdDeleteBinary:this.props.settings.uuCmdDeleteBinary,cmdDeleteThumbnail:this.props.settings.uuCmdDeleteThumbnail,shouldSaveThumbnail:"none"!==this.props.settings.thumbnailStrategy,
lsiLabels:this.props.lsiLabels,currentControls:this._getCurrentControls}),footer:i.Common.Element.create(ze,{ref_:function(e){return s._currentControls=e},formComponent:this._getCurrentForm,
hasDelete:!0,className:this.getClassName("alignRight")}),onClose:function(){return s._closeModal(!0)},sticky:!1,size:"m"};this._openModal(o)},openPreviewBinaryForm:function(e){var t=this,n={
header:i.Common.Element.create(i.Bricks.Div,{className:this.getClassName("modalHeader"),content:e.filename}),content:i.Common.Element.create(je,{ref_:function(e){return t._currentForm=e},
id:i.Common.Tools.generateUUID(),code:e.code,done:this._closeModal,onCancel:this._closeModal,rev:e.sys.rev,baseUri:this.props.settings.baseUri,cmdGetBinaryData:this.props.settings.uuCmdGetBinaryData
}),onClose:function(){return t._closeModal()},sticky:!1,size:"auto"};this._openModal(n)},openShareBinaryForm:function(e,t){var n=this,r={header:i.Common.Element.create(i.Bricks.Div,{
className:this.getClassName("modalHeader"),content:a(this.props.lsiLabels.shareBinaryFormHeader)}),content:i.Common.Element.create(He,{ref_:function(e){n._currentForm=e},
id:i.Common.Tools.generateUUID(),binary:e,settings:this.props.settings.sharingOptions[t]?this.props.settings.sharingOptions[t]:this.props.settings.sharingOptions.default,done:this._closeModal,
onCancel:this._closeModal}),footer:i.Common.Element.create(ze,{formComponent:this._getCurrentForm,label:s.LSI_LABEL_BUTTON_COPY,className:this.getClassName("alignRight")}),onClose:function(){
return n._closeModal()},sticky:!1,size:"l"};this._openModal(r)},_openModal:function(e){this._modal.open(e)},_closeModal:function(){var e=this;this._modal.close(!1),setTimeout((function(){
return e._currentControls&&e._currentControls.setDisabledButton(!1)}),500),this._currentForm=null},_getCurrentForm:function(){return this._currentForm},_getCurrentControls:function(){
return this._currentControls},_setInitialDomNodeRef:function(e){this._initialDomNode=e},_onSaveDndForm:function(e,t){for(var n=[],i=[],r=[],s=0;s<e.length;s++){var a=e[s];n.push(a.file),
i.push(a.code),r.push(a.tags)}t(n,i,r)},render:function(){var e=this,t=this.state.forceRender;return void 0===t?i.Common.Element.create("div",{ref:this._setInitialDomNodeRef
}):i.Common.Element.create(i.Bricks.Modal,{ref:function(t){return e._modal=t},forceRender:t,controlled:!1,location:"portal"})}});n(32);function Ke(){return(Ke=Object.assign||function(e){
for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function $e(e,t,n,i,r,s,a){try{
var o=e[s](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function Je(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var s=e.apply(t,n)
;function a(e){$e(s,i,r,a,o,"next",e)}function o(e){$e(s,i,r,a,o,"throw",e)}a(void 0)}))}}function Ze(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)
}}))}function Xe(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,
(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4)))&&(t=!0),
t}var et=i.Common.VisualComponent.create({mixins:[i.Common.BaseMixin,i.Common.ElementaryMixin],statics:{tagName:o+"FileUploader",classNames:{main:l+"file-uploader",
successState:l+"file-uploader-success-state",failureState:l+"file-uploader-failure-state",heightMeasurer:b.css(qe||(qe=Ze(["\n        overflow: hidden;\n      "]))),wrapper:function(e,t){
return b.css(Qe||(Qe=Ze(["\n        overflow: hidden;\n        transition: height 500ms;\n        ","\n      "])),e.dndEnabled?"":"height: ".concat(t.height,"px;"))},
initialContent:l+"file-uploader-initial-content",hiddenInitialContent:b.css(Ye||(Ye=Ze(["\n        visibility: hidden;\n      "]))),progressContent:l+"file-uploader-progress-content",
dndContent:l+"file-uploader-dnd-content",statsWrapper:l+"file-uploader-stats-wrapper",progressStat:l+"file-uploader-progress-stat",progressStatContent:l+"file-uploader-progress-stat-content",
progressStatMessage:l+"file-uploader-progress-stat-message",resultSuccess:l+"file-uploader-result-success",resultFailed:l+"file-uploader-result-failed",hoverArea:l+"file-uploader-hover-area",
resetButton:l+"file-uploader-reset-button"},opt:{nestingLevelWrapper:!0}},propTypes:{baseUri:i.PropTypes.string,lsiLabels:i.PropTypes.object,
uuCmdCreateBinary:i.PropTypes.oneOfType([i.PropTypes.func,i.PropTypes.string]),onSetFiles:i.PropTypes.func,customCodesEnabled:i.PropTypes.bool,customCodesRequired:i.PropTypes.bool,
outputMaxHeight:i.PropTypes.number,outputMaxWidth:i.PropTypes.number,outputQuality:i.PropTypes.number,sizeLimit:i.PropTypes.number,dndEnabled:i.PropTypes.bool},getDefaultProps:function(){return{
uuCmdCreateBinary:"uu-app-binarystore/createBinary",customCodesEnabled:!1,customCodesRequired:!1,outputMaxHeight:void 0,outputMaxWidth:void 0,outputQuality:void 0,sizeLimit:void 0,dndEnabled:!0}},
getInitialState:function(){if(this._index=0,this._files=[],this._onDragEnterCounter=0,this._codes=[],this._lsiLabels={placeholder:s.LSI_LABEL_FILE_MANAGER_DROP_BAR_CONTENT,
uploadSuccessMsg:s.LSI_LABEL_FILE_MANAGER_UPLOAD_RESULT_SUCCESS,uploadFailedMsg:s.LSI_LABEL_FILE_MANAGER_UPLOAD_RESULT_FAILED,addBinaryFormFile:s.LSI_LABEL_ADD_BINARY_FILE,
addBinaryFormFileRequired:s.LSI_LABEL_ADD_BINARY_FILE_REQUIRED,addBinaryFormQuality:s.LSI_LABEL_ADD_BINARY_QUALITY,addBinaryFormPreserveDimensions:s.LSI_LABEL_ADD_BINARY_PRESERVE_DIMENSIONS},
this.props.lsiLabels)for(var e in this.props.lsiLabels)this._lsiLabels[e]=this.props.lsiLabels[e];return{state:"initial",hover:!1,progressStats:[],height:0}},componentDidUpdate:function(e,t){
if(!this.props.dndEnabled&&!Xe()&&this._heightMeasurer&&(t.progressStats.length!==this.state.progressStats.length||t.state!==this.state.state)){var n
;if("initial"!==this.state.state&&this.state.progressStats.length)n=i.Common.DOM.findNode(this._heightMeasurer).getBoundingClientRect().height;else n=0;this.setState({height:n})}},update:function(){
return!0},getProgress:function(){return this.state.progressStats},setProgress:function(e){var t="initial",n=!0;if(e.length>0){for(var i=!0,r=0;r<e.length;r++)if("failed"===e[r].state&&(n=!1),
"success"!==e[r].state&&"failed"!==e[r].state){i=!1;break}t=i?"done":"inProgress"}this.setState({progressStats:e,state:t,success:n})},setFiles:function(e,t){var n=this
;return Je(regeneratorRuntime.mark((function i(){var r,s,a,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n._files="inProgress"===n.state.state?n._files:[],
!(e.length>0)){i.next=26;break}if(r=e,!n.props.onSetFiles||"function"!=typeof n.props.onSetFiles){i.next=11;break}return i.next=6,n._adjustFiles(e);case 6:r=i.sent,n._files=r,n.props.onSetFiles(r,t),
i.next=26;break;case 11:return s=!n.props.outputMaxHeight&&!n.props.outputMaxWidth,a=null==n.props.outputQuality,i.next=15,Promise.all(e.map(function(){var e=Je(regeneratorRuntime.mark((function e(t){
return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t1=a,!e.t1){e.next=5;break}return e.next=4,ie(t);case 4:e.t1=e.sent;case 5:if(e.t0=e.t1,e.t0){e.next=8;break}
e.t0=s&&se(t);case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 15:if(o=i.sent.some(Boolean),
!n.props.customCodesEnabled&&!o){i.next=21;break}n._files=r,n._openDnDForm(r),i.next=26;break;case 21:return i.next=23,n._adjustFiles(e);case 23:r=i.sent,n._files=r,n._uploadFiles(r);case 26:
return i.abrupt("return",n);case 27:case"end":return i.stop()}}),i)})))()},_registerHeightMeasurer:function(e){this._heightMeasurer=e},_adjustFiles:function(e){var t=this
;return Je(regeneratorRuntime.mark((function n(){var i,r,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=[],r=0;case 2:if(!(r<e.length)){n.next=10;break}
return n.next=5,K(e[r],t.props);case 5:s=n.sent,i.push(s);case 7:r++,n.next=2;break;case 10:return n.abrupt("return",i);case 11:case"end":return n.stop()}}),n)})))()},_saveImageDone:function(e){
var t=this.state.progressStats;t[this._index].state="success",this._index+1<this._files.length?(t[this._index+1].state="started",this.setState({progressStats:t}),this._index++,
this._saveImage()):(this.setState({progressStats:t}),this._uploadDone())},_saveImageFail:function(e){var t=this.state.progressStats;t[this._index].state="failed",
this._index+1<this._files.length?(t[this._index+1].state="started",this.setState({progressStats:t}),this._index++,this._saveImage()):(this.setState({progressStats:t}),this._uploadDone())},
_saveImage:function(){if(this._files[this._index]&&this._files[this._index].size>1024*$(this.props.sizeLimit)){var e=this.state.progressStats;e[this._index].state="failed",
this._index+1<this._files.length?(e[this._index+1].state="started",this.setState({progressStats:e}),this._index++,this._saveImage()):(this.setState({progressStats:e}),this._uploadDone())}else{
var t=this._files[this._index],n=this._saveImageDone,i=this._saveImageFail;if(this._codes[this._index]&&(t.code=this._codes[this._index]),
"function"==typeof this.props.uuCmdCreateBinary)this.props.uuCmdCreateBinary(t).then(n,i);else{var r={data:t,done:n,fail:i};y.customPostMultipartCmd(this.props.baseUri,this.props.uuCmdCreateBinary,r)}
}},_uploadFiles:function(e){for(var t=this,n="inProgress"===this.state.state,i=n?this.state.progressStats:[],r=0;r<e.length;r++)i.push({name:e[r].name,state:n||0!==r?"waiting":"started"})
;this.setState({progressStats:i,state:"inProgress"},(function(){n||(t._index=0,t._saveImage())}))},_uploadDone:function(){
for(var e=!0,t=0;t<this.state.progressStats.length;t++)if("failed"===this.state.progressStats[t].state){e=!1;break}this.setState({state:"done",success:e})},_openDnDForm:function(e){var t=this
;this._formController.openDnDForm(e,(function(e,n){t._files=e,t._codes=n,t._uploadFiles(e)}),{customCodesEnabled:this.props.customCodesEnabled,customCodesRequired:this.props.customCodesRequired})},
_onDropHandler:function(e){this._onDragEnterCounter=0,this.setState({hover:!1}),e.preventDefault(),e.stopPropagation();var t=[];if("inProgress"!==this.state.state){
if(e.dataTransfer.items)for(var n=0;n<e.dataTransfer.files.length;n++)if(e.dataTransfer.files[n].type||e.dataTransfer.files[n].size%4096!=0){var i=e.dataTransfer.files[n];t.push(i)}this.setFiles(t)}},
_onDragOverHandler:function(e){e.preventDefault(),e.stopPropagation()},_onDragEnterHandler:function(e){this._onDragEnterCounter++,!this.state.hover&&this.setState({hover:!0}),e.preventDefault(),
e.stopPropagation()},_onDragEndHandler:function(e){this._onDragEnterCounter=0,this.setState({hover:!1}),e.preventDefault(),e.stopPropagation()},_onDragLeaveHandler:function(e){
this._onDragEnterCounter--,this._onDragEnterCounter<=0&&this.setState({hover:!1}),e.preventDefault(),e.stopPropagation()},_getInitialContent:function(e){
var t=this,n=this.getClassName("initialContent");return e||(n+=" "+this.getClassName("hiddenInitialContent")),e&&(n+=" "+this.getClassName("dndContent")),i.Common.Element.create(i.Bricks.Div,{
className:n,content:a(this._lsiLabels.placeholder),ref_:function(e){t._dropZone=e},mainAttrs:e?{onDragOver:this._onDragOverHandler,onDragEnter:this._onDragEnterHandler,onDrop:this._onDropHandler,
onDragEnd:this._onDragEndHandler,onDragLeave:this._onDragLeaveHandler}:null})},_getResultContent:function(){return this.state.success?i.Common.Element.create(i.Bricks.Div,{
content:a(this._lsiLabels.uploadSuccessMsg),className:this.getClassName("resultSuccess")}):i.Common.Element.create(i.Bricks.Div,{content:a(this._lsiLabels.uploadFailedMsg),
className:this.getClassName("resultFailed")})},_getClearButton:function(){var e=this;return i.Common.Element.create(i.Bricks.Link,{onClick:function(){return e.setState({state:"initial"})},
className:this.getClassName("resetButton"),colorSchema:"custom"},i.Common.Element.create(i.Bricks.Icon,{icon:"mdi-close"}))},_getProgressContent:function(e){
for(var t=[],n=0;n<this.state.progressStats.length;n++){var r=this.state.progressStats[n],s=void 0;switch(r.state){case"waiting":s="mdi-timer";break;case"started":s="mdi-loading";break;case"success":
s="mdi-checkbox-marked-circle";break;case"failed":s="mdi-alert"}t.push(i.Common.Element.create(i.Bricks.Div,{key:"stat_"+n,className:this.getClassName("progressStat")
},i.Common.Element.create(i.Bricks.Icon,{icon:s}),i.Common.Element.create("div",{className:this.getClassName("progressStatContent")},i.Common.Element.create(i.Bricks.Span,{
content:this.state.progressStats[n].name}),r.message?i.Common.Element.create("div",{className:this.getClassName("progressStatMessage")},r.message):null)))}var a=this.getClassName("progressContent")
;return e&&(a+=" "+this.getClassName("dndContent")),i.Common.Element.create(i.Bricks.Div,{className:a,mainAttrs:e?{onDragOver:this._onDragOverHandler,onDragEnter:this._onDragEnterHandler,
onDrop:this._onDropHandler,onDragEnd:this._onDragEndHandler,onDragLeave:this._onDragLeaveHandler}:null
},"inProgress"===this.state.state&&i.Common.Element.create(i.Bricks.Loading,null),"done"===this.state.state&&this._getResultContent(),"done"===this.state.state&&this._getClearButton(),i.Common.Element.create(i.Bricks.Div,{
className:this.getClassName("statsWrapper")},t))},_getMainPropsToPass:function(){var e=this.getMainPropsToPass()
;return"done"===this.state.state&&(this.state.success?e.className+=" "+this.getClassName("successState"):e.className+=" "+this.getClassName("failureState")),e},_getChild:function(){
var e,t=this,n=this.props.dndEnabled&&!Xe();switch(this.state.state){case"initial":e=this._getInitialContent(n);break;case"inProgress":case"done":e=this._getProgressContent(n)}
return i.Common.Element.create(i.Common.Fragment,null,i.Common.Element.create(Ve,{lsiLabels:this._lsiLabels,key:"formController",ref_:function(e){return t._formController=e},settings:{
outputQuality:this.props.outputQuality,outputMaxWidth:this.props.outputMaxWidth,outputMaxHeight:this.props.outputMaxHeight}}),i.Common.Element.create(i.Bricks.Div,Ke({},this._getMainPropsToPass(),{
key:"uploader"}),e,i.Common.Element.create(i.Bricks.Div,{className:this.getClassName("hoverArea"),style:this.state.hover?null:{display:"none"}})))},render:function(){
return i.Common.Element.create(i.Bricks.Div,{className:this.getClassName("wrapper")},i.Common.Element.create("div",{className:this.getClassName("heightMeasurer"),ref:this._registerHeightMeasurer
},this._getChild()))}}),tt={},nt={getInstances:function(e){return tt[e]||[]},Mixin:{componentDidMount:function(){var e=tt[this.getTagName()];e||(e=tt[this.getTagName()]=[]),e.push(this)},
componentWillUnmount:function(){var e=tt[this.getTagName()];if(e){var t=e.indexOf(this);-1!=t&&e.splice(t,1)}}}};function it(e){if(!0!==e.repeat){
var t=nt.getInstances("Plus4U5.Files.FileManager").filter((function(e){var t=!1;if(!e.props.ignorePaste){var n=e.findDOMNode();if(n){var i=getComputedStyle(n)
;"hidden"!==i.visibility&&"none"!==i.display&&(t=!0)}}return t}));if(1===t.length){var n=(e.clipboardData||e.originalEvent.clipboardData||{}).items,i=[];for(var r in n){var s=n[r];if("file"===s.kind){
var a=s.getAsFile();i.push(a)}}if(i.length>0)t[0].pasteFiles_(i)}}}var rt,st,at,ot,lt,ut,pt={mixins:[nt.Mixin],componentDidMount:function(){
if(!this.pasteFiles_)throw new Error("FilePasteHandler requires method pasteFiles_(blobs) to be defined.")
;1===nt.getInstances("Plus4U5.Files.FileManager").length&&document.addEventListener("paste",it)},componentWillUnmount:function(){
0===nt.getInstances("Plus4U5.Files.FileManager").length&&document.removeEventListener("paste",it)}};n(34);function ct(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{}
;var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e)
;for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dt(e,t){return t||(t=e.slice(0)),
Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function mt(){return(mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]
;for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var ht=r.a.Common.Reference.forward((function(e,t){return r.a.Common.Element.create(ft,mt({},e,{
listRef:t}))}));ht.displayName=o+"ListWrapper",ht.hocFor=r.a.Tiles.List.hocFor;var ft=r.a.Common.VisualComponent.create({displayName:"ListWrapperBody",mixins:[r.a.Common.BaseMixin],statics:{
classNames:{main:function(){return b.css(rt||(rt=dt(["\n        position: relative;\n      "])))},emptyListWarning:l+"file-manager-empty-list-warning",dndHoverArea:function(){
return b.css(st||(st=dt(["\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        background: rgba(250, 250, 250, 0.95);\n        border: 4px dashed rgba(0, 0, 0, 0.17);\n      "])))
},hintWrapper:function(){
return b.css(at||(at=dt(["\n        position: absolute;\n        left: 0;\n        right: 0;\n        top: ",";\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n      "])),"number"==typeof state.positionY?state.positionY+"px":"0")
},hintIcon:function(){
return b.css(ot||(ot=dt(["\n        font-size: 80px;\n        color: #616161;\n        width: 80px;\n        height: 80px;\n        display: flex;\n        align-items: center;\n      "])))},
hintText:function(){return b.css(lt||(lt=dt(["\n        font-size: 24px;\n      "])))}}},propTypes:{wrapperAttrs:r.a.PropTypes.object,isEmpty:r.a.PropTypes.bool,isEmptyMessage:r.a.PropTypes.node},
getDefaultProps:function(){return{}},getInitialState:function(){return this._hasRendered=!1,{positionY:null,height:null,hintHeight:null}},componentWillReceiveProps:function(e){
this.props.isHovered!==e.isHovered&&(this._hasRendered=!1)},componentDidUpdate:function(){this._hoverArea&&this._hintWrapper&&!this._hasRendered&&(this._hasRendered=!0,this.forceUpdate())},
_registerHoverArea:function(e){this._hoverArea=e},_registerHintWrapper:function(e){this._hintWrapper=e},_getHintWrapperClassName:function(){if(this._hasRendered){
var e,t=this._hoverArea.getBoundingClientRect(),n=this._hintWrapper.getBoundingClientRect(),i={top:0,height:t.height};return t.top<0&&(i.top-=t.top,i.height-=i.top),
t.bottom>window.innerHeight&&(i.height-=t.bottom-window.innerHeight),e=i.top+(i.height-n.height)/2,
b.css(ut||(ut=dt(["\n        position: absolute;\n        left: 0;\n        right: 0;\n        top: ",";\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n      "])),"number"==typeof e?e+"px":"0")
}},render:function(){var e=this.props,t=e.wrapperAttrs,n=e.isHovered,i=e.listRef,a=e.isEmpty,o=e.isEmptyMessage,l=ct(e,["wrapperAttrs","isHovered","listRef","isEmpty","isEmptyMessage"])
;return r.a.Common.Element.create(r.a.Common.Fragment,null,this.props.children,r.a.Common.Element.create(r.a.Bricks.Div,{mainAttrs:t,className:this.getClassName("main")
},r.a.Common.Element.create(r.a.Tiles.List,mt({},l,{ref:i})),a&&r.a.Common.Element.create(r.a.Bricks.Div,{className:this.getClassName("emptyListWarning")},r.a.Common.Element.create(r.a.Bricks.Icon,{
icon:"mdi-package-variant"}),r.a.Common.Element.create(r.a.Bricks.Div,{content:o})),n?r.a.Common.Element.create("div",{className:this.getClassName("dndHoverArea"),ref:this._registerHoverArea
},r.a.Common.Element.create("div",{className:this._getHintWrapperClassName(),ref:this._registerHintWrapper},r.a.Common.Element.create("span",{className:this.getClassName("hintIcon")
},r.a.Common.Element.create(r.a.Bricks.Icon,{icon:"mdi-upload"})),r.a.Common.Element.create(r.a.Bricks.Lsi,{className:this.getClassName("hintText"),lsi:s.LSI_LABEL_FILE_MANAGER_DROP_ZONE}))):null))}
}),gt=ht;function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable
}))),n.push.apply(n,i)}return n}function bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _t=function(e,t,n){var i={}
;"string"==typeof e?e.split(" ").forEach((function(e){var t=e.split("-");i[t[0]]=t[1]})):i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{}
;t%2?yt(Object(n),!0).forEach((function(t){bt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);var r=t;return["xs","s","m","l","xl"].forEach((function(e){r=i[e]||r,i[e]="function"==typeof n?n(r):r})),i};n(35)
;function vt(){return(vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e
}).apply(this,arguments)}function Ct(e,t,n,i,r,s,a){try{var o=e[s](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function Tt(e){return function(){
var t=this,n=arguments;return new Promise((function(i,r){var s=e.apply(t,n);function a(e){Ct(s,i,r,a,o,"next",e)}function o(e){Ct(s,i,r,a,o,"throw",e)}a(void 0)}))}}function Et(e){
return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){
return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function St(e){return function(e){if(Array.isArray(e))return Lt(e)}(e)||function(e){
if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Lt(e,t)
;var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e)
;if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lt(e,t)}(e)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(e,t){
(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e)
;t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function xt(e){for(var t=1;t<arguments.length;t++){
var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){Bt(e,t,n[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))
}))}return e}function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function It(){var e,t=!1
;return e=navigator.userAgent||navigator.vendor||window.opera,
(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4)))&&(t=!0),
t}var Dt=r.a.Common.VisualComponent.create({mixins:[r.a.Common.BaseMixin,r.a.Common.ScreenSizeMixin,pt],statics:{tagName:o+"FileManager",classNames:{main:l+"file-manager",
dndWrapper:l+"file-manager-dnd-wrapper"}},propTypes:{baseUri:r.a.PropTypes.string,uuCmdListBinaries:r.a.PropTypes.oneOfType([r.a.PropTypes.func,r.a.PropTypes.string]),
uuCmdCreateBinary:r.a.PropTypes.oneOfType([r.a.PropTypes.func,r.a.PropTypes.string]),uuCmdUpdateBinary:r.a.PropTypes.oneOfType([r.a.PropTypes.func,r.a.PropTypes.string]),
uuCmdUpdateBinaryData:r.a.PropTypes.oneOfType([r.a.PropTypes.func,r.a.PropTypes.string]),uuCmdDeleteBinary:r.a.PropTypes.oneOfType([r.a.PropTypes.func,r.a.PropTypes.string]),
uuCmdGetBinaryData:r.a.PropTypes.oneOfType([r.a.PropTypes.func,r.a.PropTypes.string]),uuCmdGetBinaryDataUri:r.a.PropTypes.func,
uuCmdListThumbnails:r.a.PropTypes.oneOfType([r.a.PropTypes.func,r.a.PropTypes.string]),uuCmdCreateThumbnail:r.a.PropTypes.oneOfType([r.a.PropTypes.func,r.a.PropTypes.string]),
uuCmdUpdateThumbnailData:r.a.PropTypes.oneOfType([r.a.PropTypes.func,r.a.PropTypes.string]),uuCmdDeleteThumbnail:r.a.PropTypes.oneOfType([r.a.PropTypes.func,r.a.PropTypes.string]),
uuCmdGetThumbnailData:r.a.PropTypes.oneOfType([r.a.PropTypes.func,r.a.PropTypes.string]),uuCmdGetThumbnailDataUri:r.a.PropTypes.func,fileList:r.a.PropTypes.array,thumbnailList:r.a.PropTypes.array,
onFileCreate:r.a.PropTypes.func,onFileUpdate:r.a.PropTypes.func,onFileDelete:r.a.PropTypes.func,onFileShare:r.a.PropTypes.func,onFileClick:r.a.PropTypes.func,onSelect:r.a.PropTypes.func,
thumbnailStrategy:r.a.PropTypes.string,sortItems:r.a.PropTypes.array,sortValues:r.a.PropTypes.array,onSetFileType:r.a.PropTypes.func,fileTypeFilters:r.a.PropTypes.object,dndEnabled:r.a.PropTypes.bool,
sharingOptions:r.a.PropTypes.object,fileButtons:r.a.PropTypes.shape({hideDropdown:r.a.PropTypes.bool,itemList:r.a.PropTypes.arrayOf(r.a.PropTypes.oneOfType([r.a.PropTypes.string,r.a.PropTypes.shape({
active:r.a.PropTypes.bool,onClick:r.a.PropTypes.func,icon:r.a.PropTypes.string,label:r.a.PropTypes.oneOfType([r.a.PropTypes.string,r.a.PropTypes.object])})]))}),lsiLabels:r.a.PropTypes.object,
onFilenameSet:r.a.PropTypes.string,searchKeyList:r.a.PropTypes.array,selectable:r.a.PropTypes.oneOf(["none","single","multi"]),selectableOnly:r.a.PropTypes.bool,
displayCreateButton:r.a.PropTypes.oneOfType([r.a.PropTypes.bool,r.a.PropTypes.string,r.a.PropTypes.object]),outputMaxHeight:r.a.PropTypes.number,outputMaxWidth:r.a.PropTypes.number,
outputQuality:r.a.PropTypes.number,headerHidden:r.a.PropTypes.bool,allowCustomTags:r.a.PropTypes.bool,ignoreTags:r.a.PropTypes.arrayOf(r.a.PropTypes.string),
availableTags:r.a.PropTypes.arrayOf(r.a.PropTypes.string),onTagCreate:r.a.PropTypes.func,readOnly:r.a.PropTypes.bool,sizeLimit:r.a.PropTypes.number,
createButtonFileCodeRule:r.a.PropTypes.oneOf(["none","required","notRequired"]),dndFileCodeRule:r.a.PropTypes.oneOf(["none","required","notRequired"]),
bulkActions:r.a.PropTypes.arrayOf(r.a.PropTypes.shape({content:r.a.PropTypes.any,onClick:r.a.PropTypes.func,active:r.a.PropTypes.bool})),displayInfoBar:r.a.PropTypes.bool,
displayFilterBar:r.a.PropTypes.bool,displayFilterByTags:r.a.PropTypes.bool,initialCollapseBars:r.a.PropTypes.bool},getDefaultProps:function(){return{
uuCmdListBinaries:"uu-app-binarystore/listBinaries",uuCmdCreateBinary:"uu-app-binarystore/createBinary",uuCmdUpdateBinary:"uu-app-binarystore/updateBinary",
uuCmdUpdateBinaryData:"uu-app-binarystore/updateBinaryData",uuCmdDeleteBinary:"uu-app-binarystore/deleteBinary",uuCmdGetBinaryData:"uu-app-binarystore/getBinaryData",uuCmdGetBinaryDataUri:void 0,
thumbnailStrategy:"createAll",sortItems:[{key:"code",name:{cs:"Kód",en:"Code"}},{key:"filename",name:{cs:"Název souboru",en:"Filename"}},{key:"sys.mts",name:{cs:"Datum změny",en:"Modification Time"}
}],sortValues:[{key:"sys.mts",descending:!0}],dndEnabled:!0,searchKeyList:["code","filename","sys.mts","tagList"],selectable:"none",selectableOnly:!1,displayCreateButton:!0,outputMaxHeight:void 0,
outputMaxWidth:void 0,outputQuality:void 0,headerHidden:!1,allowCustomTags:!1,ignoreTags:void 0,onTagCreate:void 0,availableTags:void 0,readOnly:!1,sizeLimit:void 0,createButtonFileCodeRule:void 0,
dndFileCodeRule:void 0,bulkActions:void 0,displayInfoBar:!0,displayFilterBar:!0,displayFilterByTags:!0,initialCollapseBars:void 0}},getInitialState:function(){this._sharingOptions={default:[{
label:s.LSI_LABEL_FILE_MANAGER_SHARE_TYPE_CODE,value:"${code}",codeStyle:"text"},{label:s.LSI_LABEL_FILE_MANAGER_SHARE_TYPE_URI,
value:y.getCommandUri(this.props.baseUri,"uu-app-binarystore/getBinaryData")+"?code=${code}",codeStyle:"text"}]};var e=this._getCodeStrategies(this.props);if(this._settings=xt(xt({
baseUri:this.props.baseUri,uuCmdCreateBinary:this.props.uuCmdCreateBinary,uuCmdUpdateBinary:this.props.uuCmdUpdateBinary,uuCmdUpdateBinaryData:this.props.uuCmdUpdateBinaryData,
uuCmdDeleteBinary:this.props.uuCmdDeleteBinary,uuCmdGetBinaryData:this.props.uuCmdGetBinaryData,uuCmdGetBinaryDataUri:this.props.uuCmdGetBinaryDataUri,
uuCmdListThumbnails:this.props.uuCmdListThumbnails,uuCmdCreateThumbnail:this.props.uuCmdCreateThumbnail||this.props.uuCmdCreateBinary,
uuCmdUpdateThumbnailData:this.props.uuCmdUpdateThumbnailData||this.props.uuCmdUpdateBinaryData,uuCmdDeleteThumbnail:this.props.uuCmdDeleteThumbnail||this.props.uuCmdDeleteBinary,
uuCmdGetThumbnailData:this.props.uuCmdGetThumbnailData||this.props.uuCmdGetBinaryData,uuCmdGetThumbnailDataUri:this.props.uuCmdGetThumbnailDataUri||this.props.uuCmdGetBinaryDataUri,
thumbnailStrategy:this.props.thumbnailStrategy},e),{},{outputMaxHeight:this.props.outputMaxHeight,outputMaxWidth:this.props.outputMaxWidth,outputQuality:this.props.outputQuality,
sharingOptions:this.props.sharingOptions?this.props.sharingOptions:this._sharingOptions}),this._lsiLabels={header:s.LSI_LABEL_FILE_MANAGER,barHeader:s.LSI_LABEL_FILE_MANAGER_HEADER,
searchPlaceholder:s.LSI_LABEL_FILE_MANAGER_SEARCH_PLACEHOLDER,noBinariesWarning:s.LSI_LABEL_FILE_MANAGER_EMPTY_WARNING,addBinaryFormHeader:s.LSI_LABEL_ADD_BINARY,
addBinariesFormHeader:s.LSI_LABEL_ADD_BINARIES,updateBinaryFormHeader:s.LSI_LABEL_UPDATE_BINARY,deleteBinaryFormHeader:s.LSI_LABEL_DELETE_BINARY,
shareBinaryFormHeader:s.LSI_LABEL_FILE_MANAGER_SHARE_HEADER,dndAreaPlaceholder:s.LSI_LABEL_FILE_MANAGER_DROP_BAR_CONTENT,dndAreaUploadSuccessMsg:s.LSI_LABEL_FILE_MANAGER_UPLOAD_RESULT_SUCCESS,
dndAreaUploadFailedMsg:s.LSI_LABEL_FILE_MANAGER_UPLOAD_RESULT_FAILED,deleteBinaryConfirmMsg:s.LSI_LABEL_DELETE_BINARY_SUCCESS_CONFIRM_MSG,previewFormError:s.LSI_LABEL_FILE_MANAGER_PREVIEW_ERROR,
fileSizeExceededError:s.LSI_LABEL_ADD_BINARY_FILE_SIZE_EXCEEDED,addBinaryFormFile:s.LSI_LABEL_ADD_BINARY_FILE,addBinaryFormFileRequired:s.LSI_LABEL_ADD_BINARY_FILE_REQUIRED,
addBinaryFormQuality:s.LSI_LABEL_ADD_BINARY_QUALITY,addBinaryFormPreserveDimensions:s.LSI_LABEL_ADD_BINARY_PRESERVE_DIMENSIONS,deleteBinaryFormContent:s.LSI_LABEL_DELETE_BINARY_MSG,
updateBinaryMetaDataFormHeader:s.LSI_UPDATE_BINARY_META_DATA_FORM_HEADER},this.props.lsiLabels)for(var t in this.props.lsiLabels)this._lsiLabels[t]=this.props.lsiLabels[t]
;this._fileButtons=this._computeFileButtons(),this._thumbnailMap={},this._noThumbnailImageList=[],this._isDndAllowed=this.props.dndEnabled&&!this.props.readOnly&&!It(),this._onDragEnterCounter=0
;var n=[],i={},r="loading";if(this.props.fileList){if(this.props.thumbnailList){
for(var a=0;a<this.props.fileList.length;a++)this.props.fileList[a].code.match(/_th$/)||n.push(this._buildBinaryJson(this.props.fileList[a]))
;for(var o=0;o<this.props.thumbnailList.length;o++)this.props.thumbnailList[o].code.match(/_th$/)&&(i[this.props.thumbnailList[o].code]=this.props.thumbnailList[o])
}else for(var l=0;l<this.props.fileList.length;l++)this.props.fileList[l].code.match(/_th$/)?i[this.props.fileList[l].code]=this.props.fileList[l]:n.push(this._buildBinaryJson(this.props.fileList[l]))
;r="ready"}return{state:r,type:"full",binaries:n,thumbnailMap:i,displayCreateButton:this._processDisplayCreateButton(),dndHover:!1,collapseBars:this.props.initialCollapseBars}},
componentWillMount:function(){
this.props.customCodeStrategy&&r.a.Common.Tools.warning('Property "customCodeStrategy" is deprecated! Use properties "createButtonFileCodeRule" and "dndFileCodeRule" instead.')},
componentDidMount:function(){this.props.fileList||this._listBinaries(0),this.props.fileList&&"createAll"===this.props.thumbnailStrategy&&this._migrateImagesWithoutThumbnail()},
componentWillReceiveProps:function(e){var t=this._getCodeStrategies(e);this._settings=xt(xt({baseUri:e.baseUri,uuCmdCreateBinary:e.uuCmdCreateBinary,uuCmdUpdateBinary:e.uuCmdUpdateBinary,
uuCmdUpdateBinaryData:e.uuCmdUpdateBinaryData,uuCmdDeleteBinary:e.uuCmdDeleteBinary,uuCmdGetBinaryData:e.uuCmdGetBinaryData,uuCmdGetBinaryDataUri:e.uuCmdGetBinaryDataUri,
uuCmdListThumbnails:e.uuCmdListThumbnails,uuCmdCreateThumbnail:e.uuCmdCreateThumbnail||e.uuCmdCreateBinary,uuCmdUpdateThumbnailData:e.uuCmdUpdateThumbnailData||e.uuCmdUpdateBinaryData,
uuCmdDeleteThumbnail:e.uuCmdDeleteThumbnail||e.uuCmdDeleteBinary,uuCmdGetThumbnailData:e.uuCmdGetThumbnailData||e.uuCmdGetBinaryData,
uuCmdGetThumbnailDataUri:e.uuCmdGetThumbnailDataUri||e.uuCmdGetBinaryDataUri,thumbnailStrategy:e.thumbnailStrategy},t),{},{outputMaxHeight:e.outputMaxHeight,outputMaxWidth:e.outputMaxWidth,
outputQuality:e.outputQuality,sharingOptions:e.sharingOptions?e.sharingOptions:this._sharingOptions}),this._isDndAllowed=e.dndEnabled&&!It(),
this.props.fileButtons===e.fileButtons&&this.props.customFileButtons===e.customFileButtons&&this.props.readOnly===e.readOnly||(this._fileButtons=this._computeFileButtons(e)),
this.props.displayCreateButton!==e.displayCreateButton&&this.setState({displayCreateButton:this._processDisplayCreateButton(e)})},addFile:function(e){var t=this._buildBinaryJson(e)
;this.setState((function(e){var n=St(e.binaries);return n.push(t),{binaries:n}}))},getFile:function(e){for(var t=null,n=0;n<this.state.binaries.length;n++)if(e===this.state.binaries[n].binary.code){
t=this.state.binaries[n].binary;break}return t},updateFile:function(e){var t=this,n=this._listController.getSelectedItemList(),i=function(){return t.setState((function(n){
for(var i=n.binaries,r=0;r<i.length;r++)if(i[r].code===e.code){(i=St(i))[r]=t._buildBinaryJson(xt({},e));break}return{binaries:i}}))},r=!1;n.forEach((function(n){n.code===e.code&&(r=!0,
n=t._buildBinaryJson(xt({},e)),t._listController.addSelectedItem(n,i()))})),r||i()},deleteFile:function(e){var t=this;this._listController.removeSelectedItem(e,(function(){
return t.setState((function(t){for(var n=t.binaries,i=0;i<n.length;i++)if(n[i].binary.code===e){(n=St(n)).splice(i,1);break}return{binaries:n}}))}))},setThumbnail:function(e){
this.setState((function(t){var n=xt({},t.thumbnailMap);return n[e.code]=e,{thumbnailMap:n}}))},unsetThumbnail:function(e){this.setState((function(t){var n=xt({},t.thumbnailMap);return delete n[e],{
thumbnailMap:n}}))},getThumbnail:function(e){return this.state.thumbnailMap[e]},customAddSelectedItem:function(e){"single"===this.props.selectable&&this._listController.clearSelected(),
this._listController.addSelectedItem(e)},customRemoveSelectedItem:function(e){this._listController.removeSelectedItem(e)},getSelectedFiles:function(){return this._listController.getSelectedItemList()
},pasteFiles_:function(e){this.props.readOnly||(e=e.slice(-1)).length>0&&this._addFiles(e[0])},_processDisplayCreateButton:function(){
var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.displayCreateButton;return!0===t&&(t={xs:"texticon"}),t&&(t=_t(t,"texticon",(function(e){return{
displayText:!!e.match("text"),displayIcon:!!e.match("icon")}}))),t},_getCodeStrategies:function(){
var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.createButtonFileCodeRule,n=e.dndFileCodeRule
;return e.customCodeStrategy&&(t||("none"===e.customCodeStrategy?t="none":"single"===e.customCodeStrategy||"multi"===e.customCodeStrategy?t="notRequired":"singleRequired"!==e.customCodeStrategy&&"multiRequired"!==e.customCodeStrategy||(t="required")),
n||("none"===e.customCodeStrategy||"single"===e.customCodeStrategy||"singleRequired"===e.customCodeStrategy?n="none":"multi"===e.customCodeStrategy?n="notRequired":"multiRequired"===e.customCodeStrategy&&(n="required"))),
{createButtonFileCodeRule:t||"notRequired",dndFileCodeRule:n||"none"}},_buildBinaryJson:function(e){
for(var t=this.props.onSetFileType?this.props.onSetFileType(e):Z(e),n={},i=0;i<this.props.sortItems.length;i++)n[this.props.sortItems[i].key]=this.props.sortItems[i].key.split(".").reduce(this._getVarOnKey,e)
;return n.id=e.code,n.binary=e,n.type=t.type,n.icon=t.icon,n.thumbnailType=t.thumbnail,n.clickable=t.clickable,n},_filterBinariesByTags:function(e,t){return t&&0!==t.length?e.filter((function(e){
return!e.binary.tagList||e.binary.tagList.every((function(e){return-1===t.indexOf(e)}))})):e},_getBinaries:function(){return this._filterBinariesByTags(this.state.binaries,this.props.ignoreTags)},
_validateCodeUniqueness:function(e){return!this.state.binaries.some((function(t){return t.code===e}))},_computeFileButtons:function(){
var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,i=n.fileButtons,r=n.deprecatedCustomFileButtons,a=n.readOnly,o=n.availableTags,l=n.allowCustomTags,u=!1
;if(i?e=xt({},i):r?(u=!0,e=xt({},r)):e={hideDropdown:!1,itemList:["share","download","update","updateTags","delete"]},!e.itemList||o||l||(e.itemList=e.itemList.filter((function(e){
return"updateTags"!==e}))),e.itemList&&a&&(e.itemList=e.itemList.filter((function(e){return"update"!==e&&"updateTags"!==e&&"delete"!==e}))),e.itemList&&!this.props.onFileShare){
var p=this._settings.sharingOptions,c=!("object"!==Et(p)||!p)&&Object.keys(p).some((function(e){return p[e].some((function(e){return"function"==typeof e.value}))}))
;"function"!=typeof this.props.uuCmdGetBinaryData||c||(e.itemList=e.itemList.filter((function(e){return"share"!==e})))}return Array.isArray(e.itemList)&&(u&&e.itemList.forEach((function(e){
e.icon&&(e.active=!0)})),e.itemList=e.itemList.map((function(e){var n=null;if("string"==typeof e)switch(e){case"share":n={label:s.LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_SHARE,isDownload:!1,
onClick:t._openShareBinaryForm,icon:"mdi-content-copy",active:!0};break;case"download":n={label:s.LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_DOWNLOAD,isDownload:!0};break;case"update":n={
label:s.LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_UPDATE,isDownload:!1,onClick:t._openUpdateBinaryFileDialog,icon:"mdi-pencil",active:!0};break;case"updateTags":n={
label:s.LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_UPDATE_TAGS,isDownload:!1,onClick:t._openUpdateBinaryDialog,icon:"mdi-tag",active:!0};break;case"delete":n={
label:s.LSI_LABEL_FILE_MANAGER_TILE_DROPDOWN_DELETE,isDownload:!1,onClick:t._deleteBinary}}else n=e;return n}))),e},_shouldListNext:function(e){return(e.pageIndex+1)*e.pageSize<e.total},
_listBinariesDone:function(e,t){var n=this;this.setState((function(t){
for(var i=[],r=xt({},t.thumbnailMap),s=0;s<e.itemList.length;s++)e.itemList[s].code.match(/_th$/)?r[e.itemList[s].code]=e.itemList[s]:i.push(n._buildBinaryJson(e.itemList[s]));return{
binaries:t.binaries.concat(i),thumbnailMap:r}})),this._shouldListNext(e.pageInfo)?this._listBinaries(t+1):this.props.uuCmdListThumbnails?this._listThumbnails(0):this._finishListBinaries()},
_listBinariesFail:function(e){this.setState({state:"error"})},_listBinaries:function(e){var t=this,n={pageInfo:JSON.stringify({pageSize:1e3,pageIndex:e})},i=function(n){return t._listBinariesDone(n,e)
},r=this._listBinariesFail;if("function"==typeof this.props.uuCmdListBinaries)this.props.uuCmdListBinaries(n).then(i,r);else{var s={data:n,done:i,fail:r}
;y.customGetCmd(this.props.baseUri,this.props.uuCmdListBinaries,s)}},_listThumbnailsDone:function(e,t){var n=this;this.setState((function(t){
for(var n=xt({},t.thumbnailMap),i=0;i<e.itemList.length;i++)e.itemList[i].code.match(/_th$/)&&(n[e.itemList[i].code]=e.itemList[i]);return{thumbnailMap:n}}),(function(){
return n._shouldListNext(e.pageInfo)?n._listThumbnails(t+1):n._finishListBinaries()}))},_listThumbnailsFail:function(e){this.setState({state:"error"})},_listThumbnails:function(e){var t=this
;if("none"!==this.props.thumbnailStrategy){var n={pageInfo:JSON.stringify({pageSize:1e3,pageIndex:e})},i=function(n){return t._listThumbnailsDone(n,e)
},r=this._listThumbnailsFail,s=this.props.uuCmdListThumbnails||this.props.uuCmdListBinaries;if("function"==typeof s)s(n).then(i,r);else{var a={data:n,done:i,fail:r}
;y.customGetCmd(this.props.baseUri,s,a)}}else this._finishListBinaries()},_finishListBinaries:function(){this.setState({state:"ready"}),
"createAll"===this.props.thumbnailStrategy&&this._migrateImagesWithoutThumbnail()},_migrateImagesWithoutThumbnail:function(){for(var e=this.state.binaries,t=0;t<e.length;t++){
var n=e[t].binary.code.length>61?e[t].binary.code.substr(0,61):e[t].binary.code;"thumbnail"!==e[t].thumbnailType||this.state.thumbnailMap[n+"_th"]||this._noThumbnailImageList.push(e[t].code)}
this._migrateImage(0)},_migrateImageDone:function(e,t,n){var i=this,r=new Blob([e],{type:t});this._saveThumbnail(this._noThumbnailImageList[n],r,n,(function(){i._migrateImage(n+1),
i._saveOriginalAsThumbnail(i._noThumbnailImageList[n],r)}),(function(e){i.setThumbnail(e),i._migrateImage(n+1)}),!0)},_migrateImageFail:function(e,t){this._migrateImage(t+1)},
_migrateImage:function(e){var t=this;if(this._noThumbnailImageList[e]){var n={code:this._noThumbnailImageList[e]},i=function(n,i){return t._migrateImageDone(n,i,e)},r=function(n){
return t._migrateImageFail(n,e)};if("function"==typeof this._settings.uuCmdGetBinaryData)this._settings.uuCmdGetBinaryData(n).then(i,r);else{var s={data:n,done:i,fail:r}
;y.customGetNotTransformedCmd(this.props.baseUri,this._settings.uuCmdGetBinaryData,s)}}},_saveThumbnail:function(e,t,n,i,s,a){
var o=this,l=new FileReader,u=document.createElement("canvas"),p=null,c=new Image
;a&&"createAll"===this.props.thumbnailStrategy||!a&&("createAll"===this.props.thumbnailStrategy||"createNew"===this.props.thumbnailStrategy)?l.readAsDataURL(t):i(),l.onload=function(){var e=l.result
;c.src=e},c.onerror=function(e){i()},c.onload=function(){if(0===c.width||0===c.height)r.a.Common.Tools.warning("Image is empty"),i();else{var t=o._calculateCanvasSize(c.width,c.height)
;u.id="file-manager-hidden-canvas",u.width=t.canvasWidth,u.height=t.canvasHeight,u.style.visibility="hidden",document.body.appendChild(u),(p=u.getContext("2d")).fillStyle="white",
p.fillRect(0,0,t.canvasWidth,t.canvasHeight),p.drawImage(c,0,0,t.canvasWidth,t.canvasHeight)
;for(var n=u.toDataURL("image/jpeg",.85),a=atob(n.split(",")[1]),l=n.split(",")[0].split(":")[1].split(";")[0],d=new ArrayBuffer(a.length),m=new Uint8Array(d),h=0;h<a.length;h++)m[h]=a.charCodeAt(h)
;var f=new Blob([d],{type:l});document.body.removeChild(u);var g={done:function(e){s(e)},fail:function(){i()},data:{code:(e.length>61?e.substr(0,61):e)+"_th",data:f}}
;"function"==typeof o._settings.uuCmdCreateThumbnail?o._settings.uuCmdCreateThumbnail(g.data).then(g.done,g.fail):y.customPostMultipartCmd(o.props.baseUri,o._settings.uuCmdCreateThumbnail,g)}}},
_saveOriginalAsThumbnail:function(e,t){var n={done:function(){},fail:function(){},data:{code:(e=e.length>61?e.substr(0,61):e)+"_th",data:t}}
;"function"==typeof this._settings.uuCmdCreateThumbnail?this._settings.uuCmdCreateThumbnail(n.data).then(n.done,n.fail):y.customPostMultipartCmd(this.props.baseUri,this._settings.uuCmdCreateThumbnail,n)
},_calculateCanvasSize:function(e,t){var n=512,i=512;return(t>i||e>n)&&(t/i>e/n?(e/=t/i,t=i):(t/=e/n,e=n)),i=Math.min(i,t),n=Math.min(n,e),{canvasWidth:Math.ceil(n),canvasHeight:Math.ceil(i)}},
_openFileDialogue:function(e){var t="add"===e?this._fileFormAdd:this._fileFormUpdate,n=r.a.Common.DOM.findNode(t);n&&(n=n.querySelector("input"))&&(n.value=""),t._open()},_addFiles:function(e){
e=Array.isArray(e)?e:[e],this._dropBar.setFiles(e,{customCodesEnabled:"none"!==this._settings.createButtonFileCodeRule,customCodesRequired:"required"===this._settings.createButtonFileCodeRule})},
_deleteBinary:function(e,t){if(this.props.onFileDelete)this.props.onFileDelete(e,t);else{var n=(e.code.length>61?e.code.substr(0,61):e.code)+"_th"
;this._formController.openDeleteBinaryForm(e,this.state.thumbnailMap[n],this.unsetThumbnail,this.deleteFile)}},_openUpdateBinaryFileDialog:function(e,t){
this.props.onFileUpdate?this.props.onFileUpdate(e,t):(this._binaryToUpdate=e,this._openFileDialogue("update"))},_openUpdateBinaryDialog:function(e,t){
this.props.onFileInfoUpdate?this.props.onFileInfoUpdate(e,t):this._formController.openUpdateBinaryMetaDataForm(e,this.updateFile)},_updateBinary:function(e){
var t=(this._binaryToUpdate.code.length>61?this._binaryToUpdate.code.substr(0,61):this._binaryToUpdate.code)+"_th"
;this._formController.openUpdateBinaryForm(e,this._binaryToUpdate,this.state.thumbnailMap[t],this.setThumbnail,this.unsetThumbnail,this.updateFile)},_openDnDForm:function(e,t,n){
this._formController.openDnDForm(e,t,n)},_openShareBinaryForm:function(e,t){this.props.onFileShare?this.props.onFileShare(e,t):this._formController.openShareBinaryForm(e,t)},_getActions:function(e){
var t=this,n=[];return this.state.displayCreateButton&&n.push({content:this.state.displayCreateButton[e].displayText?this._lsiLabels.addBinaryFormHeader:void 0,
icon:this.state.displayCreateButton[e].displayIcon?"mdi-upload":null,onClick:function(){return t.props.onFileCreate?t.props.onFileCreate():t._openFileDialogue("add")},active:!0,controlledContent:!0}),
"full"!==this.state.type&&n.push({content:"",onClick:function(){return t._setType("full")},icon:"mdi-view-grid",active:!0}),"small"!==this.state.type&&n.push({content:"",onClick:function(){
return t._setType("small")},icon:"mdi-view-headline",active:!0}),n},_setType:function(e){this.state.type!==e&&this.setState({type:e})},_getVarOnKey:function(e,t){return e[t]},
_getAttrValue:function(e,t){return t.split(".").reduce(this._getVarOnKey,e)},_attrContainsValue:function(e,t){return!(!e||!t)&&(Array.isArray(e)?e.some((function(e){
return e&&-1!==e.toLowerCase().indexOf(t)})):-1!==e.toLowerCase().indexOf(t))},_matchSearch:function(e,t){for(var n=this,i=t.toLowerCase().split(/[\s]/),r=!1,s=function(t){
var s=n._getAttrValue(e.binary,n.props.searchKeyList[t]);if(i.some((function(e){return n._attrContainsValue(s,e)})))return r=!0,"break"},a=0;a<this.props.searchKeyList.length;a++){
if("break"===s(a))break}return r},_uploadFiles:function(e,t,n,i){if(!this._dndStats||this._dndStats.finished){for(var r=[],s=0;s<e.length;s++)r.push({name:e[s].name,state:0===s?"started":"waiting"})
;this._dndStats={index:0,fileStats:r,fileList:e,codeList:t,tagList:n},this._dropBar.setProgress(this._dndStats.fileStats),this._uploadFile(i)}else{
for(var a=0;a<e.length;a++)this._dndStats.fileStats.push({name:e[a].name,state:"waiting"});this._dndStats.fileList=this._dndStats.fileList.concat(e),
this._dndStats.codeList&&(this._dndStats.codeList=this._dndStats.codeList.concat(t)),this._dndStats.tagList&&(this._dndStats.tagList=this._dndStats.tagList.concat(n)),
this._dropBar.setProgress(this._dndStats.fileStats)}},_callUploadFileDone:function(e,t,n){var i=this;this._saveThumbnail(e.code,this._dndStats.fileList[t],t,(function(){
i._dndStats.fileStats[t].state="success",i._dndStats.fileStats[t+1]&&(i._dndStats.fileStats[t+1].state="started"),i._dropBar.setProgress(i._dndStats.fileStats),i.addFile(e),i._dndStats.index++,
i._uploadFile(n)}),(function(r){i._dndStats.fileStats[t].state="success",i._dndStats.fileStats[t+1]&&(i._dndStats.fileStats[t+1].state="started"),i._dropBar.setProgress(i._dndStats.fileStats),
i.setThumbnail(r),i.addFile(e),i._dndStats.index++,i._uploadFile(n)}),!1)},_callUploadFileFail:function(e,t){this._dndStats.fileStats[this._dndStats.index].state="failed",
this._dndStats.fileStats[this._dndStats.index].message=t,this._dropBar.setProgress(this._dndStats.fileStats),this._dndStats.index++,this._uploadFile(e)},_callUploadFile:function(e,t,n){var i=this
;if(e){if(e.size&&e.size>1024*$(this.props.sizeLimit))return this._callUploadFileFail(n,r.a.Common.Element.create(r.a.Bricks.Lsi,{lsi:s.LSI_LABEL_ADD_BINARY_FILE_SIZE_EXCEEDED,params:{
maxSize:this.props.sizeLimit}}));var a={data:e},o=function(e){return i._callUploadFileDone(e,t,n)},l=this._callUploadFileFail
;if(this._dndStats.codeList&&this._dndStats.codeList[t]&&(a.code=this._dndStats.codeList[t]),this._dndStats.tagList&&this._dndStats.tagList[t]&&(a.tagList=this._dndStats.tagList[t]),
"function"==typeof this._settings.uuCmdCreateBinary)this._settings.uuCmdCreateBinary(a).then(o,(function(){return l(n)}));else{var u={data:a,done:o,fail:function(e){var t;if(e&&e.code){
var i=e.code.split("/");"duplicateCode"===(i=i[i.length-1])&&(t=r.a.Common.Element.create(r.a.Bricks.Lsi,{lsi:s.LSI_DUPLICATE_CODE}))}t||(t=r.a.Common.Element.create(r.a.Bricks.Lsi,{
lsi:s.LSI_DEFAULT_ERROR_MESSAGE})),l(n,t)}};y.customPostMultipartCmd(this.props.baseUri,this._settings.uuCmdCreateBinary,u)}}else this._dndStats.finished=!0},_uploadFile:function(e){
var t=this,n=this._dndStats.index;if(n>=this._dndStats.fileList.length)this._dndStats.finished=!0;else{var i=this._dndStats.fileList[n];e?K(i,this.props).then((function(i){
return t._callUploadFile(i,n,e)}),(function(n){var i;if(n&&n.code){var a=n.code.split("/");"duplicateCode"===(a=a[a.length-1])&&(i=r.a.Common.Element.create(r.a.Bricks.Lsi,{lsi:s.LSI_DUPLICATE_CODE}))
}i||(i=r.a.Common.Element.create(r.a.Bricks.Lsi,{lsi:s.LSI_DEFAULT_ERROR_MESSAGE})),t._callUploadFileFail(e,i)})):this._callUploadFile(i,n,e)}},_onSetFiles:function(e,t){var n=this
;return Tt(regeneratorRuntime.mark((function i(){var r,s,a,o,l;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:
return r=t?t.customCodesEnabled:"none"!==n._settings.dndFileCodeRule,s=t?t.customCodesRequired:"required"===n._settings.dndFileCodeRule,a=!n.props.outputMaxHeight&&!n.props.outputMaxWidth,
o=null==n.props.outputQuality,i.next=6,Promise.all(e.map(function(){var e=Tt(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:
if(e.t1=o,!e.t1){e.next=5;break}return e.next=4,ie(t);case 4:e.t1=e.sent;case 5:if(e.t0=e.t1,e.t0){e.next=8;break}e.t0=a&&se(t);case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}
}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:l=i.sent.some(Boolean),r||n.props.availableTags||n.props.allowCustomTags||l?n._openDnDForm(e,(function(e,t,i){
n._uploadFiles(e,t,i,!1)}),{customCodesEnabled:r,customCodesRequired:s}):n._uploadFiles(e,void 0,void 0,!0);case 8:case"end":return i.stop()}}),i)})))()},_onTagCreate:function(e){
this.props.onTagCreate({component:this,value:e})},_onDropHandler:function(e){this._onDragEnterCounter=0,this.setState({dndHover:!1}),e.preventDefault(),e.stopPropagation();var t=[]
;if(e.dataTransfer.items)for(var n=0;n<e.dataTransfer.files.length;n++)if(e.dataTransfer.files[n].type||e.dataTransfer.files[n].size%4096!=0){var i=e.dataTransfer.files[n];t.push(i)}
this._onSetFiles(t)},_onDragOverHandler:function(e){e.preventDefault(),e.stopPropagation()},_onDragEnterHandler:function(e){this._onDragEnterCounter++,!this.state.dndHover&&this.setState({dndHover:!0
}),e.preventDefault(),e.stopPropagation()},_onDragEndHandler:function(e){this._onDragEnterCounter=0,this.setState({dndHover:!1}),e.preventDefault(),e.stopPropagation()},
_onDragLeaveHandler:function(e){this._onDragEnterCounter--,this._onDragEnterCounter<=0&&this.setState({dndHover:!1}),e.preventDefault(),e.stopPropagation()},_getFilterableTags:function(){
var e=this._getBinaries();if(!e)return null;var t=new Set;return e.forEach((function(e){e.binary.tagList&&e.binary.tagList.forEach((function(e){return t.add(e)}))})),St(t).sort()},
_getBulkActions:function(){var e=[],t=this.props.bulkActions;return Array.isArray(t)&&(e=e.concat(t)),e},_registerListController:function(e){this._listController=e},_onSelect:function(e){
"function"==typeof this.props.onSelect&&this.props.onSelect(xt(xt({},e),{},{component:this}))},_getChild:function(){var e,t,n=this;return"full"===this.state.type?(e=this.isXs()||this.isS()?232:192,
t=this.isXs()||this.isS()?540:280):(e=400,t=800),[r.a.Common.Element.create(Ve,{ref_:function(e){return n._formController=e},id:r.a.Common.Tools.generateUUID(),settings:this._settings,
lsiLabels:this._lsiLabels,key:"formController",ignoreTags:this.props.ignoreTags,availableTags:this.props.availableTags,allowCustomTags:this.props.allowCustomTags,
onTagCreate:"function"==typeof this.props.onTagCreate?this._onTagCreate:void 0,sizeLimit:this.props.sizeLimit,validateCodeUniqueness:this._validateCodeUniqueness
}),r.a.Common.Element.create(r.a.Forms.File,{ref_:function(e){return n._fileFormAdd=e},key:"fileFormAdd",hidden:!0,multiple:!0,onChange:function(e){n._addFiles(e.value)}
}),r.a.Common.Element.create(r.a.Forms.File,{ref_:function(e){return n._fileFormUpdate=e},key:"fileFormUpdate",hidden:!0,multiple:!1,onChange:function(e){n._updateBinary(e.value)}
}),r.a.Common.Element.create(r.a.Tiles.ListController,{ref_:this._registerListController,data:this._getBinaries(),selectable:"none"!==this.props.selectable,padding:"none",onSelect:this._onSelect,
key:"tiles",outputMaxHeight:this.props.outputMaxHeight,outputMaxWidth:this.props.outputMaxWidth,outputQuality:this.props.outputQuality},r.a.Common.Element.create(r.a.Tiles.ActionBar,{
title:this.getLsiItem(this._lsiLabels.barHeader),actions:this._getActions(this.state.screenSize),onItemSearch:this._matchSearch,searchPlaceHolder:this.getLsiItem(this._lsiLabels.searchPlaceholder),
collapsed:void 0===this.state.collapseBars?"single"===this.props.selectable:this.state.collapseBars}),this.props.displayFilterBar&&r.a.Common.Element.create(Q,{
displayFilterByTags:this.props.displayFilterByTags,fileTypeFilters:this.props.fileTypeFilters,tags:this._getFilterableTags()
}),"multi"===this.props.selectable&&!this.props.readOnly&&r.a.Common.Element.create(r.a.Tiles.BulkActionBar,{key:"bulkBar",actions:this._getBulkActions()
}),this.props.displayInfoBar&&r.a.Common.Element.create(r.a.Tiles.InfoBar,{controller:this._listController,sortItems:this.props.sortItems,sortValues:this.props.sortValues,
selectable:"multi"===this.props.selectable&&!this.props.readOnly}),r.a.Common.Element.create(gt,{ref_:function(e){return n._list=e},tileHeight:"auto",tileMinWidth:e,tileMaxWidth:t,tileSpacing:8,
rowSpacing:8,tileElevation:0,tileJustify:"space-between",skipInnerTile:!0,isEmpty:0===this.state.binaries.length,isEmptyMessage:a(this._lsiLabels.noBinariesWarning),tile:r.a.Common.Element.create(F,{
isS:this.isXs()||this.isS(),fileManager:this,tileType:this.state.type,onFileClick:this.props.onFileClick?this.props.onFileClick:null,uuCmdGetBinaryData:this._settings.uuCmdGetBinaryData,
uuCmdGetBinaryDataUri:this._settings.uuCmdGetBinaryDataUri,uuCmdGetThumbnailData:this._settings.uuCmdGetThumbnailData,uuCmdGetThumbnailDataUri:this._settings.uuCmdGetThumbnailDataUri,
getThumbnail:this.getThumbnail,shouldShowThumbnail:"none"!==this.props.thumbnailStrategy,fileButtons:this._fileButtons,customSelectable:this.props.readOnly?"none":this.props.selectable,
selectableOnly:this.props.selectableOnly,onFilenameSet:this.props.onFilenameSet,baseUri:this.props.baseUri}),wrapperAttrs:this._isDndAllowed?{onDragOver:this._onDragOverHandler,
onDragEnter:this._onDragEnterHandler,onDrop:this._onDropHandler,onDragEnd:this._onDragEndHandler,onDragLeave:this._onDragLeaveHandler}:null,isHovered:this.state.dndHover
},!this.props.readOnly&&r.a.Common.Element.create(r.a.Bricks.Div,{className:this.getClassName("dndWrapper")},r.a.Common.Element.create(et,{ref_:function(e){return n._dropBar=e},
onSetFiles:this._onSetFiles,lsiLabels:{placeholder:this._lsiLabels.dndAreaPlaceholder,uploadSuccessMsg:this._lsiLabels.dndAreaUploadSuccessMsg,uploadFailedMsg:this._lsiLabels.dndAreaUploadFailedMsg},
sizeLimit:this.props.sizeLimit,customCodesEnabled:"none"!==this._settings.dndFileCodeRule,customCodesRequired:"required"===this._settings.dndFileCodeRule,dndEnabled:!1}))))]},render:function(){var e
;return"loading"===this.state.state?e=r.a.Common.Element.create(r.a.Bricks.Loading,null):"ready"===this.state.state?e=this._getChild():"error"===this.state.state&&(e=r.a.Common.Element.create(r.a.Bricks.Div,{
content:a(s.LSI_LABEL_COPY_FILE_MANAGER_LIST_FAILED)})),r.a.Common.Element.create(r.a.Bricks.Section,vt({},this.getMainPropsToPass(),{header:this.props.headerHidden?null:a(this._lsiLabels.header),
level:1}),e)}});console.log("".concat("uu_plus4u5filesg01","-").concat("4.5.1"," © Unicorn\nTerms of Use: https://unicorn.com/tou/").concat("uu_plus4u5filesg01")),r.a.Environment.addRuntimeLibrary({
name:"uu_plus4u5filesg01",version:"4.5.1"});var Pt={FileManager:Dt,FileUploader:et};window.Plus4U5=window.Plus4U5||{},window.Plus4U5.Files=Pt,window.Plus4U5.Files.Lsi=s;t.default=Pt}]);